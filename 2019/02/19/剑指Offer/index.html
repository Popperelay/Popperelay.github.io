<!DOCTYPE HTML>
<html>

<head><meta name="generator" content="Hexo 3.9.0">
	<link rel="bookmark" type="image/x-icon" href="/img/logo_miccall.png">
	 <link rel="shortcut icon" href="/img/logo_miccall.png">
	
			
    <title>
    Elays'Blog
    </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
	<script>
	(function(){
		if('{{ page.password }}'){
			if (prompt('请输入博客密码') !== "aaa"){
				alert('密码错误！');
				history.back();
			}
		}
	})();
	</script>
    <link rel="stylesheet" href="/css/mic_main.css">
    <link rel="stylesheet" href="/css/dropdownMenu.css">
    
    	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	
    <noscript>
        <link rel="stylesheet" href="/css/noscript.css">
    </noscript>
			    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.scrollex.min.js"></script>
    <script src="/js/jquery.scrolly.min.js"></script>
    <script src="/js/skel.min.js"></script>
    <script src="/js/util.js"></script>
    <script src="/js/main.js"></script>
	
<link rel="stylesheet" href="/css/prism-dark.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>
    
		
<!-- Layouts -->


<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<!--<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">-->
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-MML-AM_CHTML">
</script>

<!--  代码渲染  -->
<link rel="stylesheet" href="/css/prism_undefined.css">
<link rel="stylesheet" href="/css/typo.css">
<!-- 文章页 -->
<body class="is-loading">
    <!-- Wrapper 外包 s-->
    <div id="wrapper" class="fade-in">
        <!-- Intro 头部显示 s -->
        <!-- Intro 头部显示 e -->
        <!-- Header 头部logo start -->
        <header id="header">
    <a href="/" class="logo">MICCALL</a>
</header>
        <!-- Nav 导航条 start -->
        <nav id="nav" class="special">
            <ul class="menu links">
			<!-- Homepage  主页  --> 
			<li>
	            <a href="/" rel="nofollow">主页</a>
	        </li>
			<!-- categories_name  分类   --> 
	        
	        <li class="active">
	            <a href="#s1">分类</a>
	                    <ul class="submenu">
	                        <li>
	                        <a class="category-link" href="/categories/C/">C#</a></li><li><a class="category-link" href="/categories/C-语法/">C#语法</a></li><li><a class="category-link" href="/categories/C/">C++</a></li><li><a class="category-link" href="/categories/C语言/">C语言</a></li><li><a class="category-link" href="/categories/Graphics/">Graphics</a></li><li><a class="category-link" href="/categories/Math/">Math</a></li><li><a class="category-link" href="/categories/OpenGL/">OpenGL</a></li><li><a class="category-link" href="/categories/Unity/">Unity</a></li><li><a class="category-link" href="/categories/博客配置/">博客配置</a></li><li><a class="category-link" href="/categories/并行计算/">并行计算</a></li><li><a class="category-link" href="/categories/操作系统/">操作系统</a></li><li><a class="category-link" href="/categories/数据结构/">数据结构</a></li><li><a class="category-link" href="/categories/毕设/">毕设</a></li><li><a class="category-link" href="/categories/游戏开发/">游戏开发</a></li><li><a class="category-link" href="/categories/计算机系统/">计算机系统</a></li><li><a class="category-link" href="/categories/设计模式/">设计模式</a></li><li><a class="category-link" href="/categories/面试/">面试</a>
	                    </li></ul>
	        </li>
	        
	        <!-- archives  归档   --> 
	        
	        
		        <!-- Pages 自定义   -->
		        
		        <li>
		            <a href="/gallery/" title="图库">
		                图库
		            </a>
		        </li>
		        
		        <li>
		            <a href="/tag/" title="搜索">
		                搜索
		            </a>
		        </li>
		        


            </ul>
            <!-- icons 图标   -->
			<ul class="icons">
		            
		                <li><a href="https://github.com/miccall" class="icon fa-github"><span class="label">GitHub</span></a></li>
		            
		            
		            
		            
			</ul>
</nav>

        <div id="main">
            <div class="post_page_title_img" style="height: 25rem;background-image: url(https://github.com/Popperelay/Photos/blob/master/Photos/%E5%89%91%E6%8C%87Offer_BG.jpg?raw=true);background-position: center; background-repeat:no-repeat; background-size:cover;-moz-background-size:cover;overflow:hidden;">
                <a href="#" style="padding: 4rem 4rem 2rem 4rem ;"><h2>剑指Offer</h2></a>
            </div>
            <!-- Post -->
            <div class="typo" style="padding: 3rem;">
				<!-- 目录 -->
				<p class="show-toc-btn" id="show-toc-btn" onclick="showToc();" style="display:none">
				<span class="btn-bg"></span>
				<span class="btn-text">文章导航</span>
				</p>
				<div id="toc-article" class="toc-article">
					<span id="toc-close" class="toc-close" title="隐藏导航" onclick="showBtn();">×</span>
					<strong class="toc-title">文章目录</strong>
					<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#第一章-面试的流程"><span class="toc-text">第一章 面试的流程</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第二章-面试需要的基础知识"><span class="toc-text">第二章 面试需要的基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题1：赋值运算符函数"><span class="toc-text">面试题1：赋值运算符函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题2：实现Singleton模式"><span class="toc-text">面试题2：实现Singleton模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#懒汉和饿汉单例模式"><span class="toc-text">懒汉和饿汉单例模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#单线程懒汉单例模式"><span class="toc-text">单线程懒汉单例模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#多线程懒汉单例模式（耗时）"><span class="toc-text">多线程懒汉单例模式（耗时）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#多线程懒汉单例模式-改进"><span class="toc-text">多线程懒汉单例模式(改进)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题3：找出数组中重复的数字"><span class="toc-text">面试题3：找出数组中重复的数字</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题4：二维数组中的查找"><span class="toc-text">面试题4：二维数组中的查找</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题5：替换空格"><span class="toc-text">面试题5：替换空格</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题6：从尾到头反向打印链表"><span class="toc-text">面试题6：从尾到头反向打印链表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题7：重建二叉树"><span class="toc-text">面试题7：重建二叉树</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题8：二叉树中序遍历的下一个节点"><span class="toc-text">面试题8：二叉树中序遍历的下一个节点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题9：用两个栈实现队列"><span class="toc-text">面试题9：用两个栈实现队列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题10：斐波那契数列"><span class="toc-text">面试题10：斐波那契数列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题11：旋转数组的最小数字"><span class="toc-text">面试题11：旋转数组的最小数字</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题12：矩阵中的路径"><span class="toc-text">面试题12：矩阵中的路径</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题13：机器人的运动范围"><span class="toc-text">面试题13：机器人的运动范围</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题14：剪绳子"><span class="toc-text">面试题14：剪绳子</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题15：二进制中1的个数"><span class="toc-text">面试题15：二进制中1的个数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第三章-高质量的代码"><span class="toc-text">第三章 高质量的代码</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题16：数值的整数次方"><span class="toc-text">面试题16：数值的整数次方</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题17：打印从1到最大的n位数"><span class="toc-text">面试题17：打印从1到最大的n位数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题18：删除链表的节点"><span class="toc-text">面试题18：删除链表的节点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题19：正则表达式匹配"><span class="toc-text">面试题19：正则表达式匹配</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题20：表示数值的字符串"><span class="toc-text">面试题20：表示数值的字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题21：调整数组顺序使奇数位于偶数前面"><span class="toc-text">面试题21：调整数组顺序使奇数位于偶数前面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题22：链表中倒数第k个节点"><span class="toc-text">面试题22：链表中倒数第k个节点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题23：链表中环的入口节点"><span class="toc-text">面试题23：链表中环的入口节点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题24：反转链表"><span class="toc-text">面试题24：反转链表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题25：合并两个排序的链表"><span class="toc-text">面试题25：合并两个排序的链表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题26：树的子结构"><span class="toc-text">面试题26：树的子结构</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第四章-解决面试题的思路"><span class="toc-text">第四章 解决面试题的思路</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题27：二叉树的镜像"><span class="toc-text">面试题27：二叉树的镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题28：对称的二叉树"><span class="toc-text">面试题28：对称的二叉树</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题29：顺时针打印矩阵"><span class="toc-text">面试题29：顺时针打印矩阵</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题30：包含min函数的栈"><span class="toc-text">面试题30：包含min函数的栈</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题31：栈的压入、弹出序列"><span class="toc-text">面试题31：栈的压入、弹出序列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题32：从上到下打印二叉树"><span class="toc-text">面试题32：从上到下打印二叉树</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题33：二叉搜索树的后序遍历序列"><span class="toc-text">面试题33：二叉搜索树的后序遍历序列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题34：二叉树中和为某一值的路径"><span class="toc-text">面试题34：二叉树中和为某一值的路径</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题35：复杂链表的复制"><span class="toc-text">面试题35：复杂链表的复制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题36：二叉搜索树与双向链表"><span class="toc-text">面试题36：二叉搜索树与双向链表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题37：序列化二叉树"><span class="toc-text">面试题37：序列化二叉树</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题38：字符串的排列"><span class="toc-text">面试题38：字符串的排列</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第五章-优化时间和空间效率"><span class="toc-text">第五章 优化时间和空间效率</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题39：数组中出现次数超过一半的数字"><span class="toc-text">面试题39：数组中出现次数超过一半的数字</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题40：最小的k个数"><span class="toc-text">面试题40：最小的k个数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题41：数据流中的中位数"><span class="toc-text">面试题41：数据流中的中位数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题42：连续子数组的最大和"><span class="toc-text">面试题42：连续子数组的最大和</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题43：1-n整数中1出现的次数"><span class="toc-text">面试题43：1~n整数中1出现的次数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题44：数字序列中某一位的数字"><span class="toc-text">面试题44：数字序列中某一位的数字</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题45：把数组排成最小的数"><span class="toc-text">面试题45：把数组排成最小的数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题46：把数字翻译成字符串"><span class="toc-text">面试题46：把数字翻译成字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题47：礼物的最大价值"><span class="toc-text">面试题47：礼物的最大价值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题48：最长不含重复字符的子字符串"><span class="toc-text">面试题48：最长不含重复字符的子字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题49：丑数"><span class="toc-text">面试题49：丑数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题50：第一个只出现一次的字符"><span class="toc-text">面试题50：第一个只出现一次的字符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题51：数组中的逆序对"><span class="toc-text">面试题51：数组中的逆序对</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题52：两个链表的第一个公共节点"><span class="toc-text">面试题52：两个链表的第一个公共节点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第六章-面试中的各项能力"><span class="toc-text">第六章 面试中的各项能力</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题53：在排序数组中查找数字"><span class="toc-text">面试题53：在排序数组中查找数字</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题54：二叉搜索树的第k大节点"><span class="toc-text">面试题54：二叉搜索树的第k大节点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题55：二叉树的深度"><span class="toc-text">面试题55：二叉树的深度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题56：数组中数字出现的次数"><span class="toc-text">面试题56：数组中数字出现的次数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题57：和为s的数字"><span class="toc-text">面试题57：和为s的数字</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题58：翻转字符串"><span class="toc-text">面试题58：翻转字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题59：队列的最大值"><span class="toc-text">面试题59：队列的最大值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题60：n个骰子的点数"><span class="toc-text">面试题60：n个骰子的点数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题61：扑克牌中的顺子"><span class="toc-text">面试题61：扑克牌中的顺子</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题62：圆圈中最后剩下的数字"><span class="toc-text">面试题62：圆圈中最后剩下的数字</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题63：股票的最大利润"><span class="toc-text">面试题63：股票的最大利润</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题64：求1-2-…-n"><span class="toc-text">面试题64：求1+2+…+n</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题65：不用加减乘除做加法"><span class="toc-text">面试题65：不用加减乘除做加法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题66：构建乘积数组"><span class="toc-text">面试题66：构建乘积数组</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第七章-两个面试案例"><span class="toc-text">第七章 两个面试案例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题67：把字符串转换成整数（案例一）"><span class="toc-text">面试题67：把字符串转换成整数（案例一）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面试题68：树中两个节点的最低公共祖先"><span class="toc-text">面试题68：树中两个节点的最低公共祖先</span></a></li></ol></li></ol>
			   </div>
			   <script type="text/javascript">
				function showToc(){
					var toc_article = document.getElementById("toc-article");
					var show_toc_btn = document.getElementById("show-toc-btn");
					toc_article.setAttribute("style","display:block");
					show_toc_btn.setAttribute("style","display:none");
					};
				function showBtn(){
					var toc_article = document.getElementById("toc-article");
					var show_toc_btn = document.getElementById("show-toc-btn");
					toc_article.setAttribute("style","display:none");
					show_toc_btn.setAttribute("style","display:block");
					};
			   </script>
				
                <h1 id="第一章-面试的流程"><a href="#第一章-面试的流程" class="headerlink" title="第一章 面试的流程"></a><font size="6" color="orange">第一章 面试的流程</font></h1><ol>
<li>应聘者需要准备好合适的问题问面试官。</li>
<li>不要急于编写代码，应该先和面试官多做沟通，先了解清楚所要解决的问题。</li>
<li>对面试官提出的问题应该先写测试用例（单元测试），再写具体实现。</li>
<li>面试官对项目经验常问的问题：<ul>
<li>你在该项目中碰到的最大问题是什么，你是怎么解决的？</li>
<li>从这个项目中你学到了什么？</li>
<li>什么时候会和其他团队成员有什么样的冲突，你们是怎么解决冲突的？</li>
</ul>
</li>
<li>在介绍项目经验（包括在简历上介绍和面试时口头介绍）时，应聘者不必详述项目的背景，<strong>而要突出介绍自己完成的工作及取得的成绩</strong>。</li>
<li>在参加面试之前需要熟练掌握链表、树、栈、队列和哈希表等数据结构。</li>
<li>大部分公司都会注重考查查找、排序等算法，应该在了解各种查找和排序算法的基础上，重点掌握二分查找、归并排序和快速排序，很多面试题都是这些算法的变体。一些对算法很重视的公司（谷歌、百度等）会要求熟练掌握动态规划和贪心算法。</li>
<li><p>为每一轮面试准备2~3个问题。</p>
<p> 不适合在技术面试环节问的问题：</p>
<ul>
<li>公司未来五年的发展战略是什么？毕竟我们面的不是CTO、CEO，这个问题离我们太远，而且面试官也是个程序员，他也不知道。</li>
<li>技术面不要问薪水。这是后面和HR谈的事。</li>
<li><p>不要打听面试结果。因为面试是好几轮的综合结果，面试官不可能会立即告知结果的，会让面试官觉得你没有自我评估的能力。</p>
<p>推荐的问题：</p>
</li>
<li>是否有新员工培训？</li>
<li>工作中常用的技术以及开发引擎等等（想要预先学习一下）</li>
<li>项目管理方式，团队沟通方式</li>
<li>公司是否有经验知识分享平台以供流和学习</li>
<li>当前招聘的项目。</li>
</ul>
</li>
</ol>
<h1 id="第二章-面试需要的基础知识"><a href="#第二章-面试需要的基础知识" class="headerlink" title="第二章 面试需要的基础知识"></a><font size="6" color="orange">第二章 面试需要的基础知识</font></h1><hr>
<p>推荐书籍《深度探索C++对象模型》、《Professional C#》。</p>
<h2 id="面试题1：赋值运算符函数"><a href="#面试题1：赋值运算符函数" class="headerlink" title="面试题1：赋值运算符函数"></a><font size="6" color="orange">面试题1：赋值运算符函数</font></h2><hr>
<p>题目：<br>如下为类型CMyString的声明，请为该类型添加赋值运算符函数。</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">CMyString</span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">CMyString</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> pData <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">CMyString</span><span class="token punctuation">(</span><span class="token keyword">const</span> CMyString<span class="token operator">&amp;</span> vStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CMyString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">char</span><span class="token operator">*</span> m_pData<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>首先写测试用例：</p>
<ul>
<li>把一个CMyString对象赋给另一个CMyString对象</li>
<li>把一个CMyString对象赋给自己</li>
<li>连续赋值</li>
</ul>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//----------------------------------------------测试代码----------------------------------------------</span>
<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> CMyString<span class="token operator">::</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_pData<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例1：不同的CMyString实例之间赋值</span>
<span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"test1 begins:"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

    <span class="token keyword">char</span> Text<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Hello"</span><span class="token punctuation">;</span>
    CMyString <span class="token function">Str1</span><span class="token punctuation">(</span>Text<span class="token punctuation">)</span><span class="token punctuation">,</span> Str2<span class="token punctuation">;</span>
    Str2 <span class="token operator">=</span> Str1<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result: "</span> <span class="token operator">&lt;&lt;</span> Text <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> Str2<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例2：赋值给自己</span>
<span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"test2 begins:"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

    <span class="token keyword">char</span> Text<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"World"</span><span class="token punctuation">;</span>
    CMyString <span class="token function">Str1</span><span class="token punctuation">(</span>Text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Str1 <span class="token operator">=</span> Str1<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result: "</span> <span class="token operator">&lt;&lt;</span> Text <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> Str1<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例3：连续赋值</span>
<span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"test3 begins:"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

    <span class="token keyword">char</span> Text<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"World"</span><span class="token punctuation">;</span>
    CMyString Str1<span class="token punctuation">,</span> Str2<span class="token punctuation">,</span> <span class="token function">Str3</span><span class="token punctuation">(</span>Text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Str1 <span class="token operator">=</span> Str2 <span class="token operator">=</span> Str3<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result:"</span> <span class="token operator">&lt;&lt;</span> Text <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> Text <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> Str2<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> Str3<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>对于赋值运算符函数，需要注意的有以下几点：</p>
<ul>
<li>返回值应该是引用类型，为了减少拷贝操作，以及保证连续赋值在集合律下也是正确的。</li>
<li>参数应该是const的引用类型</li>
<li>在delete之前应该先判断输入的参数是否等与this，否则后面无法有效访问<code>m_pData</code>。</li>
<li>在删除<code>char*</code>类型的指针时应该用<code>delete[]</code>。</li>
<li>在new内存时，大小应该是<code>strlen</code>的结果加1。</li>
</ul>
<p>还需要注意的是其中的拷贝构造函数：</p>
<ul>
<li>不需要<code>delete[] m_pData;</code>，因为在构造时m_pData还没有指向任何一块内存</li>
<li>不需要delete，那自然也就不需要判断是否等与this了。</li>
</ul>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//这份赋值运算符的代码没有考虑异常安全性，对应届大学生或者初级程序员能通过面试要求</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;string></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>

<span class="token keyword">class</span> <span class="token class-name">CMyString</span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">CMyString</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> pData <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">CMyString</span><span class="token punctuation">(</span><span class="token keyword">const</span> CMyString<span class="token operator">&amp;</span> vStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CMyString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    CMyString<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> CMyString<span class="token operator">&amp;</span> vOtherString<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">char</span><span class="token operator">*</span> m_pData<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

CMyString<span class="token operator">::</span><span class="token function">CMyString</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> pData<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pData<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        m_pData <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
        m_pData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>std<span class="token operator">::</span><span class="token function">strlen</span><span class="token punctuation">(</span>pData<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        std<span class="token operator">::</span><span class="token function">strcpy</span><span class="token punctuation">(</span>m_pData<span class="token punctuation">,</span> pData<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

CMyString<span class="token operator">::</span><span class="token function">CMyString</span><span class="token punctuation">(</span><span class="token keyword">const</span> CMyString<span class="token operator">&amp;</span> vStr<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//不需要delete[] m_pData，因为构造函数里它还没有指向任何一块内存，所以也不需要判断是否等与this</span>
<span class="token punctuation">{</span>
    m_pData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>std<span class="token operator">::</span><span class="token function">strlen</span><span class="token punctuation">(</span>vStr<span class="token punctuation">.</span>m_pData<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span><span class="token function">strcpy</span><span class="token punctuation">(</span>m_pData<span class="token punctuation">,</span> vStr<span class="token punctuation">.</span>m_pData<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

CMyString<span class="token operator">::</span><span class="token operator">~</span><span class="token function">CMyString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> m_pData<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
CMyString<span class="token operator">&amp;</span> CMyString<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> CMyString<span class="token operator">&amp;</span> vOtherString<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> <span class="token operator">&amp;</span>vOtherString<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> m_pData<span class="token punctuation">;</span>
    m_pData <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
    m_pData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>std<span class="token operator">::</span><span class="token function">strlen</span><span class="token punctuation">(</span>vOtherString<span class="token punctuation">.</span>m_pData<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//注意要加1。这里new可能失败导致异常退出，赋值没有成功却已经delete掉了m_pData，没有保证异常安全性（异常不变性）</span>
    std<span class="token operator">::</span><span class="token function">strcpy</span><span class="token punctuation">(</span>m_pData<span class="token punctuation">,</span> vOtherString<span class="token punctuation">.</span>m_pData<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//----------------------------------------------测试代码----------------------------------------------</span>
<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> CMyString<span class="token operator">::</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_pData<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例1：不同的CMyString实例之间赋值</span>
<span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"test1 begins:"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

    <span class="token keyword">char</span> Text<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Hello"</span><span class="token punctuation">;</span>
    CMyString <span class="token function">Str1</span><span class="token punctuation">(</span>Text<span class="token punctuation">)</span><span class="token punctuation">,</span> Str2<span class="token punctuation">;</span>
    Str2 <span class="token operator">=</span> Str1<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result: "</span> <span class="token operator">&lt;&lt;</span> Text <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> Str2<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例2：赋值给自己</span>
<span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"test2 begins:"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

    <span class="token keyword">char</span> Text<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"World"</span><span class="token punctuation">;</span>
    CMyString <span class="token function">Str1</span><span class="token punctuation">(</span>Text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Str1 <span class="token operator">=</span> Str1<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result: "</span> <span class="token operator">&lt;&lt;</span> Text <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> Str1<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例3：连续赋值</span>
<span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"test3 begins:"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

    <span class="token keyword">char</span> Text<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"World"</span><span class="token punctuation">;</span>
    CMyString Str1<span class="token punctuation">,</span> Str2<span class="token punctuation">,</span> <span class="token function">Str3</span><span class="token punctuation">(</span>Text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Str1 <span class="token operator">=</span> Str2 <span class="token operator">=</span> Str3<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result:"</span> <span class="token operator">&lt;&lt;</span> Text <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> Text <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> Str2<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> Str3<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>但是，上面的代码是不符合异常安全性的。在赋值运算符中，如果new的时候因为内存不足等等原因造成异常退出，导致赋值实际上没有成功，但是这时已经运行了<code>delete[] m_pData;</code>，讲道理没赋值成功就不应该改变原对象的数据状态。所以这里违反了异常安全性。需要改的就是在new之后再delete。还有另外一种思路就是：创建一个临时对象，利用临时对象的构造函数来分配内存，利用临时对象的析构函数来释放内存：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">// 保证异常安全性的赋值运算符</span>
CMyString<span class="token operator">&amp;</span> CMyString<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> CMyString<span class="token operator">&amp;</span> vOtherString<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> <span class="token operator">&amp;</span>vOtherString<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
    CMyString <span class="token function">TempStr</span><span class="token punctuation">(</span>vOtherString<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span><span class="token operator">*</span> pTemp <span class="token operator">=</span> TempStr<span class="token punctuation">.</span>m_pData<span class="token punctuation">;</span>
    TempStr<span class="token punctuation">.</span>m_pData <span class="token operator">=</span> m_pData<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//交换是为了利用TempStr的析构函数来释放原有内存</span>
    m_pData <span class="token operator">=</span> pTemp<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="面试题2：实现Singleton模式"><a href="#面试题2：实现Singleton模式" class="headerlink" title="面试题2：实现Singleton模式"></a><font size="6" color="orange">面试题2：实现Singleton模式</font></h2><hr>
<p>在常用的设计模式中，Singleton是唯一一个能够用短短几十行代码完整实现的模式，所以常考。</p>
<h3 id="懒汉和饿汉单例模式"><a href="#懒汉和饿汉单例模式" class="headerlink" title="懒汉和饿汉单例模式"></a><font size="5" color="red">懒汉和饿汉单例模式</font></h3><p>单例模式分为：懒汉方式和饿汉方式。<br>懒汉方式只在需要用到的时候才去实例化，也就是说它是在调用<code>getInstance</code>函数时才去实例化类：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">static</span> T<span class="token operator">*</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>m_pInstance<span class="token punctuation">)</span>
        m_pInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> m_pInstance<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>而饿汉方式是一开始就把对象创建好，在调用<code>getInstance</code>函数时直接返回对象指针：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">static</span> T<span class="token operator">*</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_pInstance<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span>
T<span class="token operator">*</span> CSingleton<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">::</span>m_pInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="单线程懒汉单例模式"><a href="#单线程懒汉单例模式" class="headerlink" title="单线程懒汉单例模式"></a><font size="5" color="red">单线程懒汉单例模式</font></h3><p>对于只适用于单线程环境的懒汉式单例模式如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//懒汉式单例模式，只适用于单线程</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;memory></span></span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span>
<span class="token keyword">class</span> <span class="token class-name">CSingleton</span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">static</span> T<span class="token operator">*</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>m_pInstance<span class="token punctuation">)</span>
            m_pInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> m_pInstance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token operator">~</span><span class="token function">CSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">delete</span> m_pInstance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token keyword">protected</span><span class="token operator">:</span>
    <span class="token function">CSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">static</span> T<span class="token operator">*</span> m_pInstance<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span>
T<span class="token operator">*</span> CSingleton<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">::</span>m_pInstance <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">CData</span> <span class="token operator">:</span> <span class="token keyword">public</span> CSingleton<span class="token operator">&lt;</span>CData<span class="token operator">></span>
<span class="token punctuation">{</span>
    <span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">CSingleton</span><span class="token operator">&lt;</span>CData<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> m_Data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token function">CData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">int</span> m_Data <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//测试用例:</span>
<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    CData <span class="token operator">*</span>pData1 <span class="token operator">=</span> CData<span class="token operator">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CData <span class="token operator">*</span>pData2 <span class="token operator">=</span> CData<span class="token operator">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result: 1 10 10"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Result result: "</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>pData1 <span class="token operator">==</span> pData2<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> pData1<span class="token operator">-</span><span class="token operator">></span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> pData2<span class="token operator">-</span><span class="token operator">></span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>但是它是线程不安全的，多线程环境下，很有可能有两个线程在new单例对象时都发现<code>m_pInstance</code>是空的，那么这两个线程都会创建对象实例，但这很明显违反了单例原则。</p>
<h3 id="多线程懒汉单例模式（耗时）"><a href="#多线程懒汉单例模式（耗时）" class="headerlink" title="多线程懒汉单例模式（耗时）"></a><font size="5" color="red">多线程懒汉单例模式（耗时）</font></h3><p>所以我们需要在new对象的时候加锁（使用C++11的mutex头文件）：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span>
<span class="token keyword">class</span> <span class="token class-name">CSingleton</span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">static</span> T<span class="token operator">*</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        std<span class="token operator">::</span>lock_guard<span class="token operator">&lt;</span>std<span class="token operator">::</span>mutex<span class="token operator">></span> <span class="token function">Lock</span><span class="token punctuation">(</span>m_Mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">//加锁，但是每次getInstance时都会加锁（加锁很耗时）</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>m_pInstance <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
            m_pInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> m_pInstance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token operator">~</span><span class="token function">CSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">delete</span> m_pInstance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token keyword">protected</span><span class="token operator">:</span>
    <span class="token function">CSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">static</span> T<span class="token operator">*</span> m_pInstance<span class="token punctuation">;</span>
    <span class="token keyword">static</span> std<span class="token operator">::</span>mutex m_Mutex<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span>
T<span class="token operator">*</span> CSingleton<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">::</span>m_pInstance <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>

<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span>
std<span class="token operator">::</span>mutex CSingleton<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">::</span>m_Mutex<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="多线程懒汉单例模式-改进"><a href="#多线程懒汉单例模式-改进" class="headerlink" title="多线程懒汉单例模式(改进)"></a><font size="5" color="red">多线程懒汉单例模式(改进)</font></h3><p>但是上面的代码里，没调用一次<code>getInstance</code>函数都会加一次锁。加锁操作是很耗时的。我们加锁是为了防止创建多个对象，也就是说如果对象已经创建了，是没有必要再加锁的（因为根据代码，<code>m_pInstance</code>已经为空的话是不会再去new对象的）。所以加锁之前我们可以先判定一下对象是不是为空：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span>
<span class="token keyword">class</span> <span class="token class-name">CSingleton</span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">static</span> T<span class="token operator">*</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>m_pInstance<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            std<span class="token operator">::</span>lock_guard<span class="token operator">&lt;</span>std<span class="token operator">::</span>mutex<span class="token operator">></span> <span class="token function">Lock</span><span class="token punctuation">(</span>m_Mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//加锁，只在真的需要new的时候才加锁，对象已经存在的话都不用再去创建对象，当然也无需加锁了</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>m_pInstance<span class="token punctuation">)</span>
                m_pInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> m_pInstance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token operator">~</span><span class="token function">CSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">delete</span> m_pInstance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token keyword">protected</span><span class="token operator">:</span>
    <span class="token function">CSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">static</span> T<span class="token operator">*</span> m_pInstance<span class="token punctuation">;</span>
    <span class="token keyword">static</span> std<span class="token operator">::</span>mutex m_Mutex<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span>
T<span class="token operator">*</span> CSingleton<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">::</span>m_pInstance <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>

<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span>
std<span class="token operator">::</span>mutex CSingleton<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">::</span>m_Mutex<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="面试题3：找出数组中重复的数字"><a href="#面试题3：找出数组中重复的数字" class="headerlink" title="面试题3：找出数组中重复的数字"></a><font size="6" color="orange">面试题3：找出数组中重复的数字</font></h2><hr>
<p>在一个长度为n的数组里的所有数字都在0~n-1是的范围内。数组中某些数字是重复的，但不知道有几个数字重复了，也不知道每个数字重复了几次。请找出数组中任意一个重复的数字。</p>
<p>最直观的解决当然是使用排序（时间复杂度为$O(nlogn)$）或哈希表（时间复杂度为$O(n)$，空间复杂度为$O(n)$）。其实我们还可以仔细观察题意和数字限制，通过把一个数字换到它对应的下标位置上，来解决这个问题，它的时间复杂度也是$O(n)$，空间复杂度是$O(1)$。</p>
<p>先写测试用例：</p>
<ul>
<li>数组中重复的数字是最小的数字</li>
<li>数组中重复的数字是最大的数字</li>
<li>数组中有多个重复数字</li>
<li>数组中没有重复数字</li>
<li>数组中全是重复数字</li>
<li>无效输入：空数组</li>
<li>无效输入：存在0~n-1之外的数字</li>
</ul>
<p>代码的核心思想是：把数字放到它对应的下标位置上。思路：从左到右依次扫描整个数组（第一个循环），判断当前下标上的数字是否等与下标，如果不等则开始第二个循环：判断当前数字和这个数字所对应的下标上的数字是否相等，如果相等，则说明出现了重复数字，退出第二层循环；如果不等则交换这两个数字，继续第二层循环。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//题目3：找出数组中的重复数字（本代码没有将找出来的所有重复数字进一步去重）</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;</span>i<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>j<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> k <span class="token operator">=</span> i<span class="token punctuation">;</span>
    i <span class="token operator">=</span> j<span class="token punctuation">;</span>
    j <span class="token operator">=</span> k<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">bool</span> <span class="token function">checkRepeatNumber</span><span class="token punctuation">(</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">&amp;</span>vioArray<span class="token punctuation">,</span> std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">&amp;</span>voRepeatNumbers<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> InputNumberCount <span class="token operator">=</span> vioArray<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> vItem <span class="token operator">:</span> vioArray<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>vItem <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> vItem <span class="token operator">>=</span> InputNumberCount<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> InputNumberCount<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">!=</span> vioArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">int</span> j <span class="token operator">=</span> vioArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>vioArray<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">!=</span> vioArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//怎么确保不同的while循环里不会加入相同的重复数字</span>
                <span class="token function">swap</span><span class="token punctuation">(</span>vioArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> vioArray<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span>
            <span class="token punctuation">{</span>
                voRepeatNumbers<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>vioArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">testCommon</span><span class="token punctuation">(</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">&amp;</span>vioArray<span class="token punctuation">,</span> <span class="token keyword">const</span> std<span class="token operator">::</span>string<span class="token operator">&amp;</span> vActualResult<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> RepeatNumbers<span class="token punctuation">;</span>
    <span class="token keyword">bool</span> IsSuccess <span class="token operator">=</span> <span class="token function">checkRepeatNumber</span><span class="token punctuation">(</span>vioArray<span class="token punctuation">,</span> RepeatNumbers<span class="token punctuation">)</span><span class="token punctuation">;</span>

    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result: "</span> <span class="token operator">&lt;&lt;</span> vActualResult<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>IsSuccess<span class="token punctuation">)</span>
        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Invalid Input"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> vItem <span class="token operator">:</span> RepeatNumbers<span class="token punctuation">)</span>
            std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> vItem <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 数组中重复的数字是最小的数字</span>
<span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Array <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">testCommon</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> <span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 数组中重复的数字是最大的数字</span>
<span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Array <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">9</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">testCommon</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> <span class="token string">"9"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 数组中有多个重复数字</span>
<span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Array <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">testCommon</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> <span class="token string">"2 4 6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 数组中没有重复数字</span>
<span class="token keyword">void</span> <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Array <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">testCommon</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 数组中全是重复数字</span>
<span class="token keyword">void</span> <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Array <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">testCommon</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> <span class="token string">"5"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 无效输入：空数组</span>
<span class="token keyword">void</span> <span class="token function">test6</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Array<span class="token punctuation">;</span>
    <span class="token function">testCommon</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 无效输入：存在0~n-1之外的数字</span>
<span class="token keyword">void</span> <span class="token function">test7</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Array<span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">testCommon</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> <span class="token string">"Invalid input"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test7</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>代码中<code>checkRepeatNumber</code>函数看着有两层循环，但其实每个数字最多只需要交换两次就能找到属于它自己的位置（因为会先把某个数字交换到当前下标位置上，然后又把这个数字交换到了该数字对应的下标位置上，所以最多两次）。</p>
<p><font size="6" color="orange">面试题3-1：不修改数组找出重复的数字</font></p>
<hr>
<p>上面的方法由于存在交换，所以实际上改变了输入的数组。题目和面试题3有一点不同，现在是：在一个长度为n+1的数组里的所有数字都在0~n-1的范围内（不再是上题那样0~n-1的范围）。所以数组里至少会存在一个重复的数字。同样的，如果数组在i到j的范围里有超过j-i+1个数字，那说明i到j的范围里肯定至少有一个重复数字。那么问题来了，统计数组在某个范围内的元素个数好说（可以遍历），但是怎么确定这个i到j的范围呢？很自然想到用二分查找来一步一步缩小范围了。</p>
<p>测试用例和面试题3类似。完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//题目3：找出数组中的重复数字（本代码没有将找出来的所有重复数字进一步去重）</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">int</span> <span class="token function">countInSomeRange</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">&amp;</span>vArray<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> Count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> vItem <span class="token operator">:</span> vArray<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>vItem <span class="token operator">>=</span> i <span class="token operator">&amp;&amp;</span> vItem <span class="token operator">&lt;=</span> j<span class="token punctuation">)</span>
            <span class="token operator">++</span>Count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> Count<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">bool</span> <span class="token function">checkRepeatNumber</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">&amp;</span>vArray<span class="token punctuation">,</span> std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">&amp;</span>voRepeatNumbers<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> InputNumberCount <span class="token operator">=</span> vArray<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> vItem <span class="token operator">:</span> vArray<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>vItem <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> vItem <span class="token operator">>=</span> InputNumberCount <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">int</span> End <span class="token operator">=</span> InputNumberCount <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> Start <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>End <span class="token operator">></span> Start<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">int</span> Mid <span class="token operator">=</span> <span class="token punctuation">(</span>End <span class="token operator">-</span> Start<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> Start<span class="token punctuation">;</span>
        <span class="token keyword">int</span> CountInStart2Mid <span class="token operator">=</span> <span class="token function">countInSomeRange</span><span class="token punctuation">(</span>vArray<span class="token punctuation">,</span> Start<span class="token punctuation">,</span> Mid<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> CountInMid2End <span class="token operator">=</span> <span class="token function">countInSomeRange</span><span class="token punctuation">(</span>vArray<span class="token punctuation">,</span> Mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> End<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>CountInStart2Mid <span class="token operator">></span> <span class="token punctuation">(</span>Mid <span class="token operator">-</span> Start <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            End <span class="token operator">=</span> Mid<span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>CountInMid2End <span class="token operator">></span> <span class="token punctuation">(</span>End <span class="token operator">-</span> Mid<span class="token punctuation">)</span><span class="token punctuation">)</span>
            Start <span class="token operator">=</span> Mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>End <span class="token operator">==</span> Start<span class="token punctuation">)</span>
        voRepeatNumbers<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>Start<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">testCommon</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">&amp;</span>vArray<span class="token punctuation">,</span> <span class="token keyword">const</span> std<span class="token operator">::</span>string<span class="token operator">&amp;</span> vActualResult<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> RepeatNumbers<span class="token punctuation">;</span>
    <span class="token keyword">bool</span> IsSuccess <span class="token operator">=</span> <span class="token function">checkRepeatNumber</span><span class="token punctuation">(</span>vArray<span class="token punctuation">,</span> RepeatNumbers<span class="token punctuation">)</span><span class="token punctuation">;</span>

    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result: "</span> <span class="token operator">&lt;&lt;</span> vActualResult<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>IsSuccess<span class="token punctuation">)</span>
        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Invalid Input"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> vItem <span class="token operator">:</span> RepeatNumbers<span class="token punctuation">)</span>
            std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> vItem <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 数组中重复的数字是最小的数字</span>
<span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Array <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">testCommon</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> <span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 数组中重复的数字是最大的数字</span>
<span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Array <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">testCommon</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> <span class="token string">"8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 数组中有多个重复数字</span>
<span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Array <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">testCommon</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> <span class="token string">"2 4 6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 数组中全是重复数字</span>
<span class="token keyword">void</span> <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Array <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">testCommon</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> <span class="token string">"5"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 无效输入：空数组</span>
<span class="token keyword">void</span> <span class="token function">test6</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Array<span class="token punctuation">;</span>
    <span class="token function">testCommon</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 无效输入：存在0~n-1之外的数字(9是无效输入)</span>
<span class="token keyword">void</span> <span class="token function">test7</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Array<span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">testCommon</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> <span class="token string">"Invalid input"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test7</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>需要注意的是，在折半查找里面，如果是在前半段继续查找是<code>End = Mid;</code>，而如果是在后半段查找是<code>Start = Mid + 1;</code>。</p>
<p>折半查找的复杂度是$O(logn)$，遍历数组的复杂度是$O(n)$，所以整个算法的时间复杂度是$O(nlogn)$。而且这种算法不能保证找出所有重复的数字。</p>
<h2 id="面试题4：二维数组中的查找"><a href="#面试题4：二维数组中的查找" class="headerlink" title="面试题4：二维数组中的查找"></a><font size="6" color="orange">面试题4：二维数组中的查找</font></h2><hr>
<p>题目：在一个二维数组中，每一行都按照从左到右递增的顺序排序，每一列都按照从上到下递增的顺序排序。请完成一个函数，输入这样的一个二维数组和一个整数，判断数组中是否含有该整数。</p>
<p>比如数组是下面这样的：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token number">1</span>  <span class="token number">2</span>  <span class="token number">8</span>  <span class="token number">9</span>
<span class="token number">2</span>  <span class="token number">4</span>  <span class="token number">9</span>  <span class="token number">12</span>
<span class="token number">4</span>  <span class="token number">7</span>  <span class="token number">10</span> <span class="token number">13</span>
<span class="token number">6</span>  <span class="token number">8</span>  <span class="token number">11</span> <span class="token number">15</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>我们要从里面找出数字7。如果从左上角的1开始查找的话，由于7比1大，那么下一次就需要在1的右边或者1的下边继续查找（并集），可见查找范围只是缩小了一个1，那比遍历二维数组好不了多少。但是如果从右上角的9开始查找呢？由于7比9小，而且9所在的一列都比9大，所以9这一列都可以不用找了（查找范围缩小了一列），在剩下的三列里继续选择右上角的8，同样的8这一列也可以从查找范围里删掉了。接下来选择右上角的2，由于7比2大，并且2的左边都比2小，所以查找范围里2所在的这一行也可以删掉了，再接下来是查找范围里右上角的4，删掉4所在的这一行，再接下来找到右上角的7，发现相等，结束查找。所以整个过程就是一个循环查找右上角的过程，如果右上角比要查找元素大，则删除最右边的一列；如果右上角比要查找的元素小，则删除最上边的一行。直到找到要查找元素或者查找范围为空为止。可以看到，从右上角（或者左下角）开始查找的好处是每次可以删除一行或者一列来缩小查找范围。</p>
<p>先写测试用例：</p>
<ul>
<li>空数组</li>
<li>二维数组中包含要查找的数字：查找的数字是最大值、最小值、或介于最大最小值之间的值</li>
<li>二维数组中没有要查找的数字：查找的数字大于最大值、小于最小值、或介于最大最小值之间但是没有这个数字。</li>
</ul>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">bool</span> <span class="token function">findNumberInOrdered2DArray</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span><span class="token operator">&amp;</span> vArray<span class="token punctuation">,</span> <span class="token keyword">int</span> vNumber<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> Row <span class="token operator">=</span> vArray<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Row <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> Col <span class="token operator">=</span> vArray<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Col <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> j <span class="token operator">=</span> Col <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> Row <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> j <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>vArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> vNumber<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>vArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> vNumber<span class="token punctuation">)</span>
            <span class="token operator">--</span>j<span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>vArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> vNumber<span class="token punctuation">)</span>
            <span class="token operator">++</span>i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：二维数组中包含要查找的数字</span>
<span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> Array <span class="token operator">=</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//要查找的数字是数组中的最大值</span>
    <span class="token keyword">int</span> Num <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span>
    <span class="token keyword">bool</span> IsFinded <span class="token operator">=</span> <span class="token function">findNumberInOrdered2DArray</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> Num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result: "</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> IsFinded <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//要查找的数字是数组中的最小值</span>
    Num <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    IsFinded <span class="token operator">=</span> <span class="token function">findNumberInOrdered2DArray</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> Num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result: "</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> IsFinded <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//要查找的数字介于最大值和最小值之间</span>
    Num <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
    IsFinded <span class="token operator">=</span> <span class="token function">findNumberInOrdered2DArray</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> Num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result: "</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> IsFinded <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：二维数组中不包含要查找的数字</span>
<span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> Array <span class="token operator">=</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//要查找的数字大于数组中的最大值</span>
    <span class="token keyword">int</span> Num <span class="token operator">=</span> <span class="token number">17</span><span class="token punctuation">;</span>
    <span class="token keyword">bool</span> IsFinded <span class="token operator">=</span> <span class="token function">findNumberInOrdered2DArray</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> Num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result: "</span> <span class="token operator">&lt;&lt;</span> <span class="token number">0</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> IsFinded <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//要查找的数字小于数组中的最小值</span>
    Num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    IsFinded <span class="token operator">=</span> <span class="token function">findNumberInOrdered2DArray</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> Num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result: "</span> <span class="token operator">&lt;&lt;</span> <span class="token number">0</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> IsFinded <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//要查找的数字介于最大最小值之间，但数组中没有该数字</span>
    Num <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    IsFinded <span class="token operator">=</span> <span class="token function">findNumberInOrdered2DArray</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> Num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result: "</span> <span class="token operator">&lt;&lt;</span> <span class="token number">0</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> IsFinded <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：空数组</span>
<span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> Array<span class="token punctuation">;</span>
    <span class="token keyword">int</span> Num <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
    <span class="token keyword">bool</span> IsFinded <span class="token operator">=</span> <span class="token function">findNumberInOrdered2DArray</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> Num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result: "</span> <span class="token operator">&lt;&lt;</span> <span class="token number">0</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> IsFinded <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：非方阵，包含要查找的数字</span>
<span class="token keyword">void</span> <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> Array <span class="token operator">=</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> Num <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
    <span class="token keyword">bool</span> IsFinded <span class="token operator">=</span> <span class="token function">findNumberInOrdered2DArray</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> Num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result: "</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> IsFinded <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：非方阵，不包含要查找的数字</span>
<span class="token keyword">void</span> <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> Array <span class="token operator">=</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> Num <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token keyword">bool</span> IsFinded <span class="token operator">=</span> <span class="token function">findNumberInOrdered2DArray</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> Num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result: "</span> <span class="token operator">&lt;&lt;</span> <span class="token number">0</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> IsFinded <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="面试题5：替换空格"><a href="#面试题5：替换空格" class="headerlink" title="面试题5：替换空格"></a><font size="6" color="orange">面试题5：替换空格</font></h2><hr>
<p>题目：请实现一个函数，把字符串中的每个空格替换成”%20”。例如输入”We are happy.”，则输出”We%20are%20happy.”</p>
<p>最自然的想法肯定是顺序扫描字符串，遇到空格就替换为”%20”，并且把空格后面的所有字符向后移动两格。但是这样一来，对每个空格字符都需要移动后面$O(n)$个字符，对于含有$O(n)$个空格字符的字符串而言，总的时间复杂度为$O(n^2)$。</p>
<p>其实还可以从后往前逆序扫描字符串：先统计出原字符串的长度$L_o$（包括末尾的’\0’）和空格数$m$，那么替换后的字符串长度$L_1=L_o+2m$。我们可以设置两个指针，一个指针p1指向替换后字符串的末尾，另一个指针p0指向原始字符串的末尾。然后将p0从后往前扫描，如果p0所指向的字符不是空格，则把p0处的字符复制到p1处，然后p0和p1都往前移动一格；如果p0处是空格，则在p1处填上三个字符”%20”，p1往前移动三格，p0往前移动1格。直到p0指向原字符串首字符。</p>
<p>先写测试用例：</p>
<ul>
<li>输入空串</li>
<li>输入的字符串中没有空格</li>
<li>输入的字符串有空格：空格位于最前面、最后面、和中间；字符串有多个连续的空格。</li>
<li>输入的字符串只有一个或多个连续的空格。</li>
<li>输入的字符串是一个nullptr指针。</li>
</ul>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;string></span></span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">countStrLengthAndSpaceNum</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> vioStr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>voStrLength<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>voSpaceNum<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    voStrLength <span class="token operator">=</span> voSpaceNum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>vioStr<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">'\0'</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token operator">++</span>voStrLength<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>vioStr<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">' '</span><span class="token punctuation">)</span>
            <span class="token operator">++</span>voSpaceNum<span class="token punctuation">;</span>
        <span class="token operator">++</span>vioStr<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">replaceSpaceInString</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>vioStr<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//_ASSERT(vioStr);</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>vioStr <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> StrLength <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> SpaceNum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">countStrLengthAndSpaceNum</span><span class="token punctuation">(</span>vioStr<span class="token punctuation">,</span> StrLength<span class="token punctuation">,</span> SpaceNum<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> AddCharNum <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> ReplacedStrLength <span class="token operator">=</span> StrLength <span class="token operator">+</span> SpaceNum <span class="token operator">*</span> AddCharNum<span class="token punctuation">;</span>

    <span class="token keyword">char</span> <span class="token operator">*</span>p1 <span class="token operator">=</span> vioStr <span class="token operator">+</span> ReplacedStrLength<span class="token punctuation">;</span>
    <span class="token keyword">char</span> <span class="token operator">*</span>p0 <span class="token operator">=</span> vioStr <span class="token operator">+</span> StrLength<span class="token punctuation">;</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span>p0 <span class="token operator">>=</span> vioStr<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>p0<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">' '</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token operator">*</span>p1<span class="token operator">--</span> <span class="token operator">=</span> <span class="token operator">*</span>p0<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{</span>
            <span class="token operator">*</span>p1<span class="token operator">--</span> <span class="token operator">=</span> <span class="token string">'0'</span><span class="token punctuation">;</span>
            <span class="token operator">*</span>p1<span class="token operator">--</span> <span class="token operator">=</span> <span class="token string">'2'</span><span class="token punctuation">;</span>
            <span class="token operator">*</span>p1<span class="token operator">--</span> <span class="token operator">=</span> <span class="token string">'%'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token operator">--</span>p0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：输入空串</span>
<span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token keyword">int</span> MAX_LENGTH <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> Str<span class="token punctuation">[</span>MAX_LENGTH<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    <span class="token function">replaceSpaceInString</span><span class="token punctuation">(</span>Str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result: "</span> <span class="token operator">&lt;&lt;</span> <span class="token string">""</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> Str <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：输入的字符串中没有空格</span>
<span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token keyword">int</span> MAX_LENGTH <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> Str<span class="token punctuation">[</span>MAX_LENGTH<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"HappyNewYear."</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result: "</span> <span class="token operator">&lt;&lt;</span> Str <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token function">replaceSpaceInString</span><span class="token punctuation">(</span>Str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> Str <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：输入的字符串中有空格</span>
<span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token keyword">int</span> MAX_LENGTH <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> Str<span class="token punctuation">[</span>MAX_LENGTH<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">" Happy New Year.  Are you ready? "</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result: "</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"%20Happy%20New%20Year.%20%20Are%20you%20ready?%20"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token function">replaceSpaceInString</span><span class="token punctuation">(</span>Str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> Str <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：输入的字符串全是空格</span>
<span class="token keyword">void</span> <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token keyword">int</span> MAX_LENGTH <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> Str<span class="token punctuation">[</span>MAX_LENGTH<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"  "</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result: "</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"%20%20"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token function">replaceSpaceInString</span><span class="token punctuation">(</span>Str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> Str <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：输入的字符串是nullptr</span>
<span class="token keyword">void</span> <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">char</span> <span class="token operator">*</span>Str <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result: "</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token function">replaceSpaceInString</span><span class="token punctuation">(</span>Str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>Str <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在合并两个数组（包括字符串）时，如果从前往后复制每个数字（或字符）则需要重复移动数字（或字符）多次，那么我们可以考虑从后往前复制，这样就能减少移动的次数（而且通常是借助两个指针来实现），从而提高效率。</p>
<h2 id="面试题6：从尾到头反向打印链表"><a href="#面试题6：从尾到头反向打印链表" class="headerlink" title="面试题6：从尾到头反向打印链表"></a><font size="6" color="orange">面试题6：从尾到头反向打印链表</font></h2><hr>
<p>题目：输入一个链表的头结点，从尾到头反过来打印出每个结点的值。链表结点定义如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> SListNode
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> m_Key<span class="token punctuation">;</span>
    SListNode<span class="token operator">*</span> m_pNext<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>单向链表只能从头开始向尾顺序遍历，但是要求反过来打印每个节点。很自然想到在遍历过程中把节点存入栈中，遍历完以后把所有节点从栈里弹出打印节点就可以了。</p>
<p>先写测试用例：</p>
<ul>
<li>空链表</li>
<li>链表中只有一个节点</li>
<li>链表中有多个节点</li>
</ul>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stack></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"List.h"</span></span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">printListReversely_Iteratively</span><span class="token punctuation">(</span>SListNode <span class="token operator">*</span>pHead<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>stack<span class="token operator">&lt;</span>SListNode<span class="token operator">*</span><span class="token operator">></span> ListNodeStack<span class="token punctuation">;</span>
    <span class="token keyword">auto</span> pNode <span class="token operator">=</span> pHead<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>pNode<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        ListNodeStack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>pNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
        pNode <span class="token operator">=</span> pNode<span class="token operator">-</span><span class="token operator">></span>m_pNext<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>ListNodeStack<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">auto</span> pNode <span class="token operator">=</span> ListNodeStack<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> pNode<span class="token operator">-</span><span class="token operator">></span>m_Data <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
        ListNodeStack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：链表中有多个节点</span>
<span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    SListNode<span class="token operator">*</span> pNode1 <span class="token operator">=</span> <span class="token function">createListNode</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    SListNode<span class="token operator">*</span> pNode2 <span class="token operator">=</span> <span class="token function">createListNode</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    SListNode<span class="token operator">*</span> pNode3 <span class="token operator">=</span> <span class="token function">createListNode</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    SListNode<span class="token operator">*</span> pNode4 <span class="token operator">=</span> <span class="token function">createListNode</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    SListNode<span class="token operator">*</span> pNode5 <span class="token operator">=</span> <span class="token function">createListNode</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">connectListNodes</span><span class="token punctuation">(</span>pNode1<span class="token punctuation">,</span> pNode2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connectListNodes</span><span class="token punctuation">(</span>pNode2<span class="token punctuation">,</span> pNode3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connectListNodes</span><span class="token punctuation">(</span>pNode3<span class="token punctuation">,</span> pNode4<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connectListNodes</span><span class="token punctuation">(</span>pNode4<span class="token punctuation">,</span> pNode5<span class="token punctuation">)</span><span class="token punctuation">;</span>

    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expect result: 5 4 3 2 1"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span><span class="token punctuation">;</span>

    <span class="token function">printListReversely_Iteratively</span><span class="token punctuation">(</span>pNode1<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">destroyList</span><span class="token punctuation">(</span>pNode1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：链表中只有一个节点</span>
<span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    SListNode<span class="token operator">*</span> pNode1 <span class="token operator">=</span> <span class="token function">createListNode</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expect result: 1"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span><span class="token punctuation">;</span>

    <span class="token function">printListReversely_Iteratively</span><span class="token punctuation">(</span>pNode1<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">destroyList</span><span class="token punctuation">(</span>pNode1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：空链表</span>
<span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expect result: "</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span><span class="token punctuation">;</span>

    <span class="token function">printListReversely_Iteratively</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>既然可以用栈来实现这个函数，那自然也可以用递归来实现了（因为递归本质上就是个栈结构）。用递归的话，访问到一个节点可以先递归输出它后面的节点，再输出该节点自身，这样链表的输出结果就反过来了：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">printListReversely_Recursively</span><span class="token punctuation">(</span>SListNode<span class="token operator">*</span> pHead<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pHead<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>pHead<span class="token operator">-</span><span class="token operator">></span>m_pNext<span class="token punctuation">)</span>
            <span class="token function">printListReversely_Recursively</span><span class="token punctuation">(</span>pHead<span class="token operator">-</span><span class="token operator">></span>m_pNext<span class="token punctuation">)</span><span class="token punctuation">;</span>
        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> pHead<span class="token operator">-</span><span class="token operator">></span>m_Data <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>虽然急于递归的代码看起来很简洁，但是有一个问题：当链表非常长的时候，就会导致函数调用层级太深，导致函数调用栈溢出。用栈际遇循环迭代的方式鲁棒性更好。</p>
<hr>
<p>二叉树中的两个特例是堆和红黑树。堆分为最大堆和最小堆。最大堆中根节点的值最大，最小堆中根节点的值最小。有很多需要快速找到最大值或者最小值的问题都可以用堆来解决。红黑树是把书中的节点定义为红、黑两种颜色，并通过规则确保从根节点到叶节点的最长路径的长度不超过最短路径的两倍。</p>
<h2 id="面试题7：重建二叉树"><a href="#面试题7：重建二叉树" class="headerlink" title="面试题7：重建二叉树"></a><font size="6" color="orange">面试题7：重建二叉树</font></h2><hr>
<p>题目：输入某二叉树的前序遍历和中序遍历的结果，请重建该二叉树。假设输入的前序序列和中序序列的结果中都不包含重复的数字。</p>
<p>根据前序和中序序列重建二叉树的核心是：前序的第一个节点是根节点，而中序里在这个根节点值左右两边的数分别是根节点的左子树和右子树。然后分别根据左右子树的前序和中序序列（如果中序序列里在根节点左边有m个数，那说明左子树里有m个节点，这m个数构成左子树的中序序列，对应前序序列根节点往右的m个树是左子树的前序序列，前序序列中还剩下的是右子树的前序序列），递归地创建左右子树。</p>
<p>先写测试用例：</p>
<ul>
<li>普通二叉树</li>
<li>完全二叉树</li>
<li>左倾斜树</li>
<li>右倾斜树</li>
<li>空树</li>
<li>只有根节点</li>
<li>输入的前序和中序不匹配，无法创建对应的二叉树</li>
</ul>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BinaryTree.h"</span></span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">createBinaryTree</span><span class="token punctuation">(</span>SBinaryTreeNode<span class="token operator">*</span><span class="token operator">&amp;</span> pRoot<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">*</span> pPreOrderStart<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>pPreOrderEnd<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">*</span> pInOrderStart<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">*</span> pInOrderEnd<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> PreOrderLength <span class="token operator">=</span> pPreOrderEnd <span class="token operator">-</span> pPreOrderStart <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> InOrderLength <span class="token operator">=</span> pInOrderEnd <span class="token operator">-</span> pInOrderStart <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>PreOrderLength <span class="token operator">!=</span> InOrderLength<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Invalid preoder and inorder"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>PreOrderLength <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">int</span> RootValue <span class="token operator">=</span> <span class="token operator">*</span>pPreOrderStart<span class="token punctuation">;</span>
        pRoot <span class="token operator">=</span> <span class="token function">createBinaryTreeNode</span><span class="token punctuation">(</span>RootValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span><span class="token operator">*</span> pInOrderTemp <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>pInOrderTemp <span class="token operator">=</span> pInOrderStart<span class="token punctuation">;</span> pInOrderTemp <span class="token operator">&lt;=</span> pInOrderEnd<span class="token punctuation">;</span> <span class="token operator">++</span>pInOrderTemp<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">*</span>pInOrderTemp <span class="token operator">==</span> RootValue<span class="token punctuation">)</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">*</span>pInOrderTemp <span class="token operator">!=</span> RootValue<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//在中序里找不到前序的根节点</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">throw</span><span class="token punctuation">(</span>std<span class="token operator">::</span><span class="token function">exception</span><span class="token punctuation">(</span><span class="token string">"Invalid preoder and inorder"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">int</span> LeftLength <span class="token operator">=</span> pInOrderTemp <span class="token operator">-</span> pInOrderStart<span class="token punctuation">;</span>
        <span class="token keyword">int</span> RightLength <span class="token operator">=</span> pInOrderEnd <span class="token operator">-</span> pInOrderTemp<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>LeftLength <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token function">createBinaryTree</span><span class="token punctuation">(</span>pRoot<span class="token operator">-</span><span class="token operator">></span>m_pLeft<span class="token punctuation">,</span> pPreOrderStart <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> pPreOrderStart <span class="token operator">+</span> LeftLength<span class="token punctuation">,</span> pInOrderStart<span class="token punctuation">,</span> pInOrderTemp <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>RightLength <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token function">createBinaryTree</span><span class="token punctuation">(</span>pRoot<span class="token operator">-</span><span class="token operator">></span>m_pRight<span class="token punctuation">,</span> pPreOrderStart <span class="token operator">+</span> LeftLength <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> pPreOrderEnd<span class="token punctuation">,</span> pInOrderTemp <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> pInOrderEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> pPreOrder<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">*</span> pInOrder<span class="token punctuation">,</span> <span class="token keyword">int</span> vLength<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expect result: "</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> vLength<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> pPreOrder<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span><span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span> pRoot <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
    <span class="token function">createBinaryTree</span><span class="token punctuation">(</span>pRoot<span class="token punctuation">,</span> pPreOrder<span class="token punctuation">,</span> pPreOrder <span class="token operator">+</span> vLength <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> pInOrder<span class="token punctuation">,</span> pInOrder <span class="token operator">+</span> vLength <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printTree</span><span class="token punctuation">(</span>pRoot<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token function">destroyTree</span><span class="token punctuation">(</span>pRoot<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 普通二叉树</span>
<span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token keyword">int</span> Length <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> PreOrder<span class="token punctuation">[</span>Length<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> InOrder<span class="token punctuation">[</span>Length<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function">test</span><span class="token punctuation">(</span>PreOrder<span class="token punctuation">,</span> InOrder<span class="token punctuation">,</span> Length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 完全二叉树</span>
<span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token keyword">int</span> Length <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> PreOrder<span class="token punctuation">[</span>Length<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> InOrder<span class="token punctuation">[</span>Length<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function">test</span><span class="token punctuation">(</span>PreOrder<span class="token punctuation">,</span> InOrder<span class="token punctuation">,</span> Length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 左倾斜树</span>
<span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token keyword">int</span> Length <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> preorder<span class="token punctuation">[</span>Length<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> inorder<span class="token punctuation">[</span>Length<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function">test</span><span class="token punctuation">(</span>preorder<span class="token punctuation">,</span> inorder<span class="token punctuation">,</span> Length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 右倾斜树</span>
<span class="token keyword">void</span> <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> preorder<span class="token punctuation">[</span>length<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> inorder<span class="token punctuation">[</span>length<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function">test</span><span class="token punctuation">(</span>preorder<span class="token punctuation">,</span> inorder<span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 树中只有根节点</span>
<span class="token keyword">void</span> <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> preorder<span class="token punctuation">[</span>length<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> inorder<span class="token punctuation">[</span>length<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function">test</span><span class="token punctuation">(</span>preorder<span class="token punctuation">,</span> inorder<span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 空树</span>
<span class="token keyword">void</span> <span class="token function">test6</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 输入的前序和中序不匹配</span>
<span class="token keyword">void</span> <span class="token function">test7</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token keyword">int</span> Length <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> PreOrder<span class="token punctuation">[</span>Length<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> InOrder<span class="token punctuation">[</span>Length<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expect result: Invalid preoder and inorder"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span><span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span> pRoot <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span>
    <span class="token punctuation">{</span>
        <span class="token function">createBinaryTree</span><span class="token punctuation">(</span>pRoot<span class="token punctuation">,</span> PreOrder<span class="token punctuation">,</span> PreOrder <span class="token operator">+</span> Length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> InOrder<span class="token punctuation">,</span> InOrder <span class="token operator">+</span> Length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">destroyTree</span><span class="token punctuation">(</span>pRoot<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span> <span class="token punctuation">(</span>std<span class="token operator">::</span>exception<span class="token operator">&amp;</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test7</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>其中：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>

<span class="token keyword">struct</span> SBinaryTreeNode
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> m_Value<span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span> m_pLeft<span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span> m_pRight<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
SBinaryTreeNode<span class="token operator">*</span> <span class="token function">createBinaryTreeNode</span><span class="token punctuation">(</span><span class="token keyword">int</span> vValue<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">auto</span> pBinaryTreeNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">SBinaryTreeNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pBinaryTreeNode<span class="token operator">-</span><span class="token operator">></span>m_Value <span class="token operator">=</span> vValue<span class="token punctuation">;</span>
    pBinaryTreeNode<span class="token operator">-</span><span class="token operator">></span>m_pLeft <span class="token operator">=</span> pBinaryTreeNode<span class="token operator">-</span><span class="token operator">></span>m_pRight <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> pBinaryTreeNode<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">connectTreeNodes</span><span class="token punctuation">(</span>SBinaryTreeNode<span class="token operator">*</span> pParent<span class="token punctuation">,</span> SBinaryTreeNode<span class="token operator">*</span> pLeft<span class="token punctuation">,</span> SBinaryTreeNode<span class="token operator">*</span> pRight<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pParent<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        pParent<span class="token operator">-</span><span class="token operator">></span>m_pLeft <span class="token operator">=</span> pLeft<span class="token punctuation">;</span>
        pParent<span class="token operator">-</span><span class="token operator">></span>m_pRight <span class="token operator">=</span> pRight<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">destroyTree</span><span class="token punctuation">(</span>SBinaryTreeNode<span class="token operator">*</span> pRoot<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pRoot<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">destroyTree</span><span class="token punctuation">(</span>pRoot<span class="token operator">-</span><span class="token operator">></span>m_pLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">destroyTree</span><span class="token punctuation">(</span>pRoot<span class="token operator">-</span><span class="token operator">></span>m_pRight<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">delete</span> pRoot<span class="token punctuation">;</span>
        pRoot <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">printTree</span><span class="token punctuation">(</span>SBinaryTreeNode<span class="token operator">*</span> pRoot<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pRoot<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> pRoot<span class="token operator">-</span><span class="token operator">></span>m_Value <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
        <span class="token function">printTree</span><span class="token punctuation">(</span>pRoot<span class="token operator">-</span><span class="token operator">></span>m_pLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printTree</span><span class="token punctuation">(</span>pRoot<span class="token operator">-</span><span class="token operator">></span>m_pRight<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="面试题8：二叉树中序遍历的下一个节点"><a href="#面试题8：二叉树中序遍历的下一个节点" class="headerlink" title="面试题8：二叉树中序遍历的下一个节点"></a><font size="6" color="orange">面试题8：二叉树中序遍历的下一个节点</font></h2><hr>
<p>题目：给定一棵二叉树和其中的一个节点，如何找出中序遍历序列的下一个节点？树中的节点除了有两个分别指向左、右子节点的指针，还有一个指向父节点的指针。</p>
<p>画个图，根据该节点的位置可以分成三种情况：</p>
<ul>
<li>该节点有右子树，那么它在中序遍历中的下一个节点就是其右子树里的最左子节点。也就是说，从右子节点出发一直沿着指向左子节点的指针，我们就能找到它的下一个节点。</li>
<li>该节点没有右子树，但是是它的父节点的左子节点。那么下一个节点就是该节点的父节点。</li>
<li>该节点没有右子树，并且是它的父节点的右子节点。那么沿着指向父节点的指针一直向上遍历，直到发现某个祖宗节点本身是其父节点的左子节点，那么下一个节点就是该祖宗节点的父节点。如果不存在这样的祖宗节点（即一直遍历到了根节点（它的父节点是null）），那么该节点的下一个节点就不存在了，即为nullptr。</li>
</ul>
<p>先写测试用例：</p>
<ul>
<li>空树</li>
<li>只有根节点的树</li>
<li>左倾斜树</li>
<li>右倾斜树</li>
<li>普通二叉树</li>
<li>完全二叉树</li>
<li>下一个节点为当前节点的右子节点、右子树的最左节点、父节点、跨层的父节点、没有下一个节点。</li>
</ul>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;string></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BinaryTree.h"</span></span>

SBinaryTreeNode<span class="token operator">*</span> <span class="token function">findNextNodeInOrder</span><span class="token punctuation">(</span><span class="token keyword">const</span> SBinaryTreeNode<span class="token operator">*</span> vCurrentNode<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    SBinaryTreeNode<span class="token operator">*</span> pNextNode <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>vCurrentNode<span class="token operator">-</span><span class="token operator">></span>m_pRight<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        pNextNode <span class="token operator">=</span> vCurrentNode<span class="token operator">-</span><span class="token operator">></span>m_pRight<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>pNextNode<span class="token operator">-</span><span class="token operator">></span>m_pLeft<span class="token punctuation">)</span>
            pNextNode <span class="token operator">=</span> pNextNode<span class="token operator">-</span><span class="token operator">></span>m_pLeft<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
        SBinaryTreeNode <span class="token operator">*</span>pParentNode <span class="token operator">=</span> vCurrentNode<span class="token operator">-</span><span class="token operator">></span>m_pParent<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pParentNode<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            pNextNode <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> pNextNode<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>vCurrentNode <span class="token operator">==</span> pParentNode<span class="token operator">-</span><span class="token operator">></span>m_pLeft<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//下面这两个if-else其实可以合在一起</span>
            pNextNode <span class="token operator">=</span> pParentNode<span class="token punctuation">;</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">const</span> SBinaryTreeNode <span class="token operator">*</span>pCurrentNode <span class="token operator">=</span> vCurrentNode<span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>pParentNode <span class="token operator">&amp;&amp;</span> pCurrentNode <span class="token operator">==</span>pParentNode<span class="token operator">-</span><span class="token operator">></span>m_pRight<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                pCurrentNode <span class="token operator">=</span> pParentNode<span class="token punctuation">;</span>
                pParentNode <span class="token operator">=</span> pParentNode<span class="token operator">-</span><span class="token operator">></span>m_pParent<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            pNextNode <span class="token operator">=</span> pParentNode<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> pNextNode<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string<span class="token operator">&amp;</span> vTestName<span class="token punctuation">,</span> <span class="token keyword">const</span> SBinaryTreeNode<span class="token operator">*</span> vCurrentNode<span class="token punctuation">,</span> <span class="token keyword">const</span> SBinaryTreeNode<span class="token operator">*</span> vNextNode<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"---------------"</span> <span class="token operator">&lt;&lt;</span> vTestName <span class="token operator">&lt;&lt;</span> <span class="token string">" begins: --------------"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected result: "</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>vNextNode<span class="token punctuation">)</span>
        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> vNextNode<span class="token operator">-</span><span class="token operator">></span>m_Value<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span><span class="token punctuation">;</span>
    SBinaryTreeNode <span class="token operator">*</span>pNextNode <span class="token operator">=</span> <span class="token function">findNextNodeInOrder</span><span class="token punctuation">(</span>vCurrentNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pNextNode<span class="token punctuation">)</span>
        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> pNextNode<span class="token operator">-</span><span class="token operator">></span>m_Value<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 完全二叉树里找下一个节点</span>
<span class="token comment" spellcheck="true">//            8</span>
<span class="token comment" spellcheck="true">//        6      10</span>
<span class="token comment" spellcheck="true">//       5 7    9  11</span>
<span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    SBinaryTreeNode<span class="token operator">*</span> pNode8 <span class="token operator">=</span> <span class="token function">createBinaryTreeNode</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span> pNode6 <span class="token operator">=</span> <span class="token function">createBinaryTreeNode</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span> pNode10 <span class="token operator">=</span> <span class="token function">createBinaryTreeNode</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span> pNode5 <span class="token operator">=</span> <span class="token function">createBinaryTreeNode</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span> pNode7 <span class="token operator">=</span> <span class="token function">createBinaryTreeNode</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span> pNode9 <span class="token operator">=</span> <span class="token function">createBinaryTreeNode</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span> pNode11 <span class="token operator">=</span> <span class="token function">createBinaryTreeNode</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">connectTreeNodes</span><span class="token punctuation">(</span>pNode8<span class="token punctuation">,</span> pNode6<span class="token punctuation">,</span> pNode10<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connectTreeNodes</span><span class="token punctuation">(</span>pNode6<span class="token punctuation">,</span> pNode5<span class="token punctuation">,</span> pNode7<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connectTreeNodes</span><span class="token punctuation">(</span>pNode10<span class="token punctuation">,</span> pNode9<span class="token punctuation">,</span> pNode11<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test1"</span><span class="token punctuation">,</span> pNode8<span class="token punctuation">,</span> pNode9<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test2"</span><span class="token punctuation">,</span> pNode6<span class="token punctuation">,</span> pNode7<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test3"</span><span class="token punctuation">,</span> pNode10<span class="token punctuation">,</span> pNode11<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test4"</span><span class="token punctuation">,</span> pNode5<span class="token punctuation">,</span> pNode6<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test5"</span><span class="token punctuation">,</span> pNode7<span class="token punctuation">,</span> pNode8<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test6"</span><span class="token punctuation">,</span> pNode9<span class="token punctuation">,</span> pNode10<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test7"</span><span class="token punctuation">,</span> pNode11<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">destroyTree</span><span class="token punctuation">(</span>pNode8<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 左倾斜树里找下一个节点</span>
<span class="token comment" spellcheck="true">//            5</span>
<span class="token comment" spellcheck="true">//          4</span>
<span class="token comment" spellcheck="true">//        3</span>
<span class="token comment" spellcheck="true">//      2</span>
<span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    SBinaryTreeNode<span class="token operator">*</span> pNode5 <span class="token operator">=</span> <span class="token function">createBinaryTreeNode</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span> pNode4 <span class="token operator">=</span> <span class="token function">createBinaryTreeNode</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span> pNode3 <span class="token operator">=</span> <span class="token function">createBinaryTreeNode</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span> pNode2 <span class="token operator">=</span> <span class="token function">createBinaryTreeNode</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">connectTreeNodes</span><span class="token punctuation">(</span>pNode5<span class="token punctuation">,</span> pNode4<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connectTreeNodes</span><span class="token punctuation">(</span>pNode4<span class="token punctuation">,</span> pNode3<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connectTreeNodes</span><span class="token punctuation">(</span>pNode3<span class="token punctuation">,</span> pNode2<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test8"</span><span class="token punctuation">,</span> pNode5<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test9"</span><span class="token punctuation">,</span> pNode4<span class="token punctuation">,</span> pNode5<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test10"</span><span class="token punctuation">,</span> pNode3<span class="token punctuation">,</span> pNode4<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test11"</span><span class="token punctuation">,</span> pNode2<span class="token punctuation">,</span> pNode3<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">destroyTree</span><span class="token punctuation">(</span>pNode5<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 右倾斜树里找下一个节点</span>
<span class="token comment" spellcheck="true">//        2</span>
<span class="token comment" spellcheck="true">//         3</span>
<span class="token comment" spellcheck="true">//          4</span>
<span class="token comment" spellcheck="true">//           5</span>
<span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    SBinaryTreeNode<span class="token operator">*</span> pNode2 <span class="token operator">=</span> <span class="token function">createBinaryTreeNode</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span> pNode3 <span class="token operator">=</span> <span class="token function">createBinaryTreeNode</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span> pNode4 <span class="token operator">=</span> <span class="token function">createBinaryTreeNode</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span> pNode5 <span class="token operator">=</span> <span class="token function">createBinaryTreeNode</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">connectTreeNodes</span><span class="token punctuation">(</span>pNode2<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> pNode3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connectTreeNodes</span><span class="token punctuation">(</span>pNode3<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> pNode4<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connectTreeNodes</span><span class="token punctuation">(</span>pNode4<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> pNode5<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test12"</span><span class="token punctuation">,</span> pNode5<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test13"</span><span class="token punctuation">,</span> pNode4<span class="token punctuation">,</span> pNode5<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test14"</span><span class="token punctuation">,</span> pNode3<span class="token punctuation">,</span> pNode4<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test15"</span><span class="token punctuation">,</span> pNode2<span class="token punctuation">,</span> pNode3<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">destroyTree</span><span class="token punctuation">(</span>pNode2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 空树</span>
<span class="token keyword">void</span> <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    SBinaryTreeNode<span class="token operator">*</span> pNode5 <span class="token operator">=</span> <span class="token function">createBinaryTreeNode</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test16"</span><span class="token punctuation">,</span> pNode5<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">destroyTree</span><span class="token punctuation">(</span>pNode5<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="面试题9：用两个栈实现队列"><a href="#面试题9：用两个栈实现队列" class="headerlink" title="面试题9：用两个栈实现队列"></a><font size="6" color="orange">面试题9：用两个栈实现队列</font></h2><hr>
<p>题目：用两个栈实现一个队列。队列的声明如下，请实现它的两个函数appendTail和deleteHead，分别完成在队列尾插入节点和在队列头删除节点的功能。</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stack></span></span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span>
<span class="token keyword">class</span> <span class="token class-name">CQueue</span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">CQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">appendTail</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> vNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    T <span class="token function">deleteHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    std<span class="token operator">::</span>stack<span class="token operator">&lt;</span>T<span class="token operator">></span> m_Stack1<span class="token punctuation">;</span>
    std<span class="token operator">::</span>stack<span class="token operator">&lt;</span>T<span class="token operator">></span> m_Stack2<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>核心思想在于：用一个栈stack1来入队，另一个栈stack2来出队。比如要入队a、b、c三个元素，可以将它们依次压栈到stack1里，如果现在要出队，按照队列先进先出的原则，应该先出队a，但是stack1的栈顶是c。所以需要依次把stack里的元素出栈到stack2里，这时stack2栈顶的元素就是c，直接弹出就可以了。如果现在要再入队一个元素d，可以直接把d压栈到stack1里，如果还要再出队，那直接从stack2里弹出就可以了，因为stack2里从栈顶到栈底的元素就是按照入队先后顺序排列的。</p>
<p>所以，总结如下：</p>
<ul>
<li>入队时，将元素直接压栈到stack1。</li>
<li>出队时，如果stack2不为空，则直接弹出stack2栈顶的元素；如果stack2为空，则把stack1里所有元素出栈到stack2里，再弹出stack2栈顶的元素。</li>
</ul>
<p>先写测试用例：</p>
<ul>
<li>往空的队列里添加、删除元素</li>
<li>往非空的队列里添加、删除元素</li>
<li>连续删除元素直到队列为空</li>
</ul>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stack></span></span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span>
<span class="token keyword">class</span> <span class="token class-name">CQueue</span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">CQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">appendTail</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> vNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    T <span class="token function">deleteHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    std<span class="token operator">::</span>stack<span class="token operator">&lt;</span>T<span class="token operator">></span> m_Stack1<span class="token punctuation">;</span>
    std<span class="token operator">::</span>stack<span class="token operator">&lt;</span>T<span class="token operator">></span> m_Stack2<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span>
<span class="token keyword">void</span> CQueue<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">::</span><span class="token function">appendTail</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> vNode<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_Stack1<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>vNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span>
T CQueue<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">::</span><span class="token function">deleteHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>m_Stack2<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>m_Stack1<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            T<span class="token operator">&amp;</span> Data <span class="token operator">=</span> m_Stack1<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m_Stack1<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m_Stack2<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>Data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>m_Stack2<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> std<span class="token operator">::</span><span class="token function">exception</span><span class="token punctuation">(</span><span class="token string">"Queue is empty."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    T <span class="token operator">&amp;</span>Head <span class="token operator">=</span> m_Stack2<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_Stack2<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Head<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Queue.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;string></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string<span class="token operator">&amp;</span> vTestName<span class="token punctuation">,</span> <span class="token keyword">char</span> vActual<span class="token punctuation">,</span> <span class="token keyword">char</span> vExpected<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------------"</span> <span class="token operator">&lt;&lt;</span> vTestName <span class="token operator">&lt;&lt;</span> <span class="token string">"----------------"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expected Result: "</span> <span class="token operator">&lt;&lt;</span> vExpected <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual Result: "</span> <span class="token operator">&lt;&lt;</span> vActual <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    CQueue<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">></span> Queue<span class="token punctuation">;</span>

    Queue<span class="token punctuation">.</span><span class="token function">appendTail</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Queue<span class="token punctuation">.</span><span class="token function">appendTail</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Queue<span class="token punctuation">.</span><span class="token function">appendTail</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">char</span> Head <span class="token operator">=</span> Queue<span class="token punctuation">.</span><span class="token function">deleteHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test1"</span><span class="token punctuation">,</span> Head<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    Head <span class="token operator">=</span> Queue<span class="token punctuation">.</span><span class="token function">deleteHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test2"</span><span class="token punctuation">,</span> Head<span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    Queue<span class="token punctuation">.</span><span class="token function">appendTail</span><span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Head <span class="token operator">=</span> Queue<span class="token punctuation">.</span><span class="token function">deleteHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test3"</span><span class="token punctuation">,</span> Head<span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    Queue<span class="token punctuation">.</span><span class="token function">appendTail</span><span class="token punctuation">(</span><span class="token string">'e'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Head <span class="token operator">=</span> Queue<span class="token punctuation">.</span><span class="token function">deleteHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test4"</span><span class="token punctuation">,</span> Head<span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    Head <span class="token operator">=</span> Queue<span class="token punctuation">.</span><span class="token function">deleteHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test5"</span><span class="token punctuation">,</span> Head<span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果题目改成用两个队列来模拟栈，核心思想在于：如果元素a、b、c依次入队列queue1，则从队头删除的元素应该是a，但是栈需要按照后进先出的原则先删除c。所以可以把queue1中的元素依次出队列到queue2，直到queue1中只剩下一个元素c，然后把这个仅剩的元素输出去就是栈想要的结果。这时queue1变为空，queue2不为空。再有元素进来时，将它入队到非空的queue2，再出队时，同样先把queue2中的元素出队到queue1，直至只剩下一个元素，将它出队输出去。</p>
<p>总结一下：用两个队列来模拟栈时，有元素进来就直接压入非空的那个队列（两个都空的话随便压哪个）；要弹出元素时，需要先把非空队列里除了队尾最后一个元素以外的其他元素全部压入另一个空队列里，最后把原队列里仅剩的一个元素弹出（有没有更简单的方法有待思考）。</p>
<hr>
<p>如果我们告诉面试官动态规划的思路之后，面试官还在提醒说在分解子问题的时候是不是存在某个特殊的选择，如果采用这个特殊的选择将一定能得到最优解。那么，通过面试官这样的提示意味着该面试题可能适用于贪心算法。当然，面试官也会要求应聘者正面贪心选择的确最终能得到最优解。</p>
<p>通常基于递归实现的代码比基于循环实现的代码要简洁很多，更加容易实现。如果面试官没有特殊要求，则应聘者可以优先采用递归的方法编程。</p>
<hr>
<h2 id="面试题10：斐波那契数列"><a href="#面试题10：斐波那契数列" class="headerlink" title="面试题10：斐波那契数列"></a><font size="6" color="orange">面试题10：斐波那契数列</font></h2><hr>
<p>题目一：求斐波那契数列的第n项。写一个函数，输入n，求斐波那契数列的第n项。斐波那契数列的定义如下：<br>$$<br>f(n)=<br>\begin{cases}<br>0, &amp;n=0 \<br>1, &amp;n=1 \<br>f(n-1)+f(n-2), &amp;n&gt;1<br>\end{cases}<br>$$<br>最常见也是最低效的当然是按照公式写的递归代码了，面试官一般不会满意：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">long</span> <span class="token keyword">long</span> <span class="token function">fibonacci_recursively</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">fibonacci_recursively</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">fibonacci_recursively</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在这个递归过程中存在很多重复解决的子问题，比如在求f(9)时会去求f(8)和f(7)，而在求f(8)时会去求f(7)和f(6)，很显然f(7)重复计算了。可以画一棵递归树来看一下，会发现重复的节点数会随着n的增大而急剧增加，时间复杂度是以n的指数形式递增的。</p>
<p>比较好的当然是自底向上递推了：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">long</span> <span class="token keyword">long</span> <span class="token function">fibonacci_iteratively</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> Result4nsub1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> Result4nsub2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> Result4n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Result4n <span class="token operator">=</span> Result4nsub1 <span class="token operator">+</span> Result4nsub2<span class="token punctuation">;</span>
        Result4nsub2 <span class="token operator">=</span> Result4nsub1<span class="token punctuation">;</span>
        Result4nsub1 <span class="token operator">=</span> Result4n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> Result4n<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>除此之外，计算斐波那契数列还可以使用如下公式（速度更快）：<br>$$<br>\begin{bmatrix}<br>f(n) &amp; f(n-1) \<br>f(n-1) &amp; f(n-2)<br>\end{bmatrix}<br>=<br>\begin{bmatrix}<br>1 &amp; 1 \<br>1 &amp; 0<br>\end{bmatrix}<br>^{n-1}<br>$$<br>也就是说斐波那契数列可以转换为求一个矩阵的乘方，而乘方又可以对半分，有如下性质：<br>$$<br>a^n=<br>\begin{cases}<br>a^{n/2}\cdot a^{n/2}, &amp;n为偶数\<br>a^{(n-1)/2}\cdot a^{(n-1)/2}\cdot a, &amp;n为奇数<br>\end{cases}<br>$$<br>所以求n次方，可以先求n/2次数，然后平方就可以了。即使使用递归也可以把时间复杂度降为$O(logn)$。不过这种解法不太常考。</p>
<p>题目二：青蛙跳台阶问题。一只青蛙一次可以跳上1级台阶，也可以跳上2级台阶。求该青蛙跳上一个n级台阶总共有多少种跳法。</p>
<p>我们可以用递归的思想来看这个问题（划分成子问题）：假设跳n级台阶的跳法数为f(n)，那么当n&gt;2时，第一次跳的时候有两种不同的选择：一是第一次只跳1级，此时跳法数目等于后面剩下的n-1级台阶的跳法数目，即f(n-1)；而是第一次跳2级，此时跳法数目等于后面剩下的n-2级台阶的跳法数目，即f(n-2)。所以跳n级台阶的跳法总数为f(n)=f(n-1)+f(n-2)。可以看出这实际上就是个斐波那契数列了。</p>
<p>题目三：<br>在青蛙跳台阶的问题中，如果把条件改成：青蛙一次可以跳上1级台阶，也可以跳上2级……它也可以一次跳上n级，此时该青蛙跳上一个m级台阶总共有多少种跳法？其实这个问题可以类似于有n把椅子，每把椅子上要么有人要么没人（有人就是青蛙跳过的地方），问总共的座次情况有多少种。由于没把椅子上要么有人，要么没人（最后一把椅子上一定有人，因为青蛙要跳到第n级台阶上），所以很简单总数是$2^{n-1}$。</p>
<p>题目四：<br>用2x1的小矩形去横着或者竖着去无重叠覆盖一个2xn的大矩形，问总共有多少种方法。画个图就知道了，其实也是个斐波那契数列。</p>
<hr>
<p>如果面试题是要求在<strong>排序的数组（或者部分排序的数组）</strong>中查找一个数字或者统计某个数字出现的次数，那么我们都可以尝试用二分查找算法。</p>
<p>实现快速排序算法的关键在于现在数组中选择一个数字（基准数），接下来把数组中的数字分为两部分，比选择的数字小的数字移到数组的左边，比选择的数字大的数字移到数组的右边。下面的函数使用的是两个指针一前一后向后扫描法（简称前后指针法），另外的哨兵换岗法、挖坑填数法等参见<a href="http://popperelay.cn/2016/09/03/%E6%94%B9%E8%BF%9B%E6%8E%92%E5%BA%8F/" target="_blank" rel="noopener">这里</a>。对于前后指针法，最核心的思想是：<strong>从开始元素到后指针所指向的元素都是小于基准数的，换句话说，后指针指向当前遍历过的序列中最后一个小于基准数的元素</strong>。所以前指针如果扫描到比基准数小的，并且又想把比基准数小的都移到数组左边，那么只能把前指针指向的数，和后指针指向的数的下一个数，作交换了（因为后指针之前的数（包括后指针）都是小于基准数的），而且后指针指向的下一个数还不能和前指针指向的是同一个数，因为交换同一个数没有意义。最后还需要把基准数后指针指向的下一个数（该大于等于基准数）作交换，因为这样才能实现比基准数小的都在基准数的左边。详细代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 一次快排，将比基准数小的移到左边，比基准数大的移到右边，返回排序后基准数在数组中的下标</span>
<span class="token keyword">int</span> <span class="token function">partition</span><span class="token punctuation">(</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">&amp;</span>vioData<span class="token punctuation">,</span> <span class="token keyword">int</span> vStart<span class="token punctuation">,</span> <span class="token keyword">int</span> vEnd<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>vioData<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> vEnd <span class="token operator">&lt;</span> vStart <span class="token operator">||</span> vStart <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> vEnd <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> vioData<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> vEnd <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> std<span class="token operator">::</span><span class="token function">exception</span><span class="token punctuation">(</span><span class="token string">"Invalid input parameter."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    std<span class="token operator">::</span>default_random_engine e<span class="token punctuation">;</span>
    std<span class="token operator">::</span>uniform_int_distribution<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">u</span><span class="token punctuation">(</span>vStart<span class="token punctuation">,</span> vEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> BaseNumberIndex <span class="token operator">=</span> <span class="token function">u</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//随机选一个基准数</span>

    std<span class="token operator">::</span><span class="token function">swap</span><span class="token punctuation">(</span>vioData<span class="token punctuation">[</span>BaseNumberIndex<span class="token punctuation">]</span><span class="token punctuation">,</span> vioData<span class="token punctuation">[</span>vEnd<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//将基准数放到数组末尾</span>
    <span class="token keyword">int</span> BackPointer <span class="token operator">=</span> vStart <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//开始遍历前还不知道谁比基准数小，所以让后指针指向数组首前位置</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> FrontPointer <span class="token operator">=</span> vStart<span class="token punctuation">;</span> FrontPointer <span class="token operator">&lt;</span> vEnd<span class="token punctuation">;</span> <span class="token operator">++</span>FrontPointer<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>vioData<span class="token punctuation">[</span>FrontPointer<span class="token punctuation">]</span> <span class="token operator">&lt;</span> vioData<span class="token punctuation">[</span>vEnd<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token operator">++</span>BackPointer<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//让后指针指向的它下一个元素（该元素要么大于基准数，要么等于FrontPointer指向的数）</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>BackPointer <span class="token operator">!=</span> FrontPointer<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//如果后指针和前指针指向同一个数则没必要交换</span>
                std<span class="token operator">::</span><span class="token function">swap</span><span class="token punctuation">(</span>vioData<span class="token punctuation">[</span>BackPointer<span class="token punctuation">]</span><span class="token punctuation">,</span> vioData<span class="token punctuation">[</span>FrontPointer<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token operator">++</span>BackPointer<span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//让后指针指向它的下一个元素</span>
    std<span class="token operator">::</span><span class="token function">swap</span><span class="token punctuation">(</span>vioData<span class="token punctuation">[</span>BackPointer<span class="token punctuation">]</span><span class="token punctuation">,</span> vioData<span class="token punctuation">[</span>vEnd<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//将基准数交换到数组中间某个位置，小于它的数都在其左边</span>
    <span class="token keyword">return</span> BackPointer<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 递归调用，多次快排</span>
<span class="token keyword">void</span> <span class="token function">quickSort</span><span class="token punctuation">(</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">&amp;</span>vioData<span class="token punctuation">,</span> <span class="token keyword">int</span> vStart<span class="token punctuation">,</span> <span class="token keyword">int</span> vEnd<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>vStart <span class="token operator">==</span> vEnd<span class="token punctuation">)</span> 
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> BaseNumberIndex <span class="token operator">=</span> <span class="token function">partition</span><span class="token punctuation">(</span>vioData<span class="token punctuation">,</span> vStart<span class="token punctuation">,</span> vEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>BaseNumberIndex <span class="token operator">></span> vStart<span class="token punctuation">)</span>
        <span class="token function">quickSort</span><span class="token punctuation">(</span>vioData<span class="token punctuation">,</span> vStart<span class="token punctuation">,</span> BaseNumberIndex <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>vEnd <span class="token operator">></span> BaseNumberIndex<span class="token punctuation">)</span>
        <span class="token function">quickSort</span><span class="token punctuation">(</span>vioData<span class="token punctuation">,</span> BaseNumberIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> vEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="面试题11：旋转数组的最小数字"><a href="#面试题11：旋转数组的最小数字" class="headerlink" title="面试题11：旋转数组的最小数字"></a><font size="6" color="orange">面试题11：旋转数组的最小数字</font></h2><hr>
<p>题目：把一个数组最开始的若干个元素搬到数组的末尾，我们称之为数组的旋转。输入一个递增排序的数组的一个旋转，输出旋转数组的最小元素。例如，数组{3,4,5,1,2}为{1,2,3,4,5}的一个旋转，该数组的最小值为1。</p>
<p>最直观的解法当然是从头到尾遍历数组，但是时间复杂度是$O(n)$，没有用到旋转数组的任何特性。以旋转数组{3,4,5,1,2}为例，会发现这个数组实际上可以划分为两个有序的子数组（也就是说它是部分排序的），那么我们可以尝试用二分查找来找到这个最小的元素。而且我们发现，一旦数组发生了旋转，这个两个数组一定可以看成：前面的有序子数组是递增的，后面的有序子数组也是递增的。</p>
<p>和二分查找类似，我们用两个指针分别指向数组中的第一个元素和最后一个元素，发现中间元素是5，5大于第一个元素3，说明3到5都是递增序列（中间不可能突然变小），最小数1肯定在后面的序列中，所以可以把第一个指针改成指向中间元素，第二个指针不变。然后进一步中间数是1，它小于第二个指针指向的元素2，所以1到2肯定是递增序列，所以可以把第二个指针改成指向中间元素1，发现第一个指针和第二个指针相邻了，结束查找。这时第二个指针指向的就是最小的元素。</p>
<p>总结如下：</p>
<ul>
<li>如果中间元素大于等于第一个指针指向的元素，就让第一个指针指向中间元素</li>
<li>否则，如果中间元素小于第二个指针指向的元素，就让第二个指针指向中间元素。</li>
<li>循环直到第一个指针和第二个指针相邻为止。此时第二个指针指向的就是最小的元素。</li>
</ul>
<p>但是上面的结论是基于数组确实旋转了的情况下得出的，数组也可以不旋转（或者刚好旋转为原来的样子），即数组就是{1,2,3,4,5}，按照上面的结论中间元素3小于第二个指针指向的元素5，认为最小元素出现在后半段，这显然是不正确的。所以需要先做一个判断：查找之前，如果发现旋转数组中首元素小于尾元素，那说明 该数组本身就是全部有序的，最小元素就是首元素。</p>
<p>还有一种特例，我们上面列举的数组是没有重复元素的，如果旋转数组中有重复元素，并且发现中间元素和首元素、尾元素都相等怎么办呢？比如旋转数组{1,0,1,1,1}或{1,1,1,0,1}，这时无法确定最小元素是位于前面的子数组还是后面的子数组，所以只能改用顺序查找了。</p>
<p>再次总结一下：</p>
<ul>
<li>判断第一个指针指向的首元素是否小于第二个指针指向的尾元素，如果是说明数组已经全部有序，首元素就是最小的元素，直接返回</li>
<li>如果中间元素大于等于第一个指针指向的元素，就让第一个指针指向中间元素</li>
<li>否则，如果中间元素小于第二个指针指向的元素，就让第二个指针指向中间元素。</li>
<li>否则，如果中间元素同时等于首尾两个元素，则采用顺序查找，直接返回。</li>
<li>循环直到第一个指针和第二个指针相邻为止。此时第二个指针指向的就是最小的元素。</li>
</ul>
<p>先写测试用例：</p>
<ul>
<li>普通旋转数组（数组中有重复、没有重复数字）</li>
<li>本身已经完全有序的旋转数组</li>
<li>只包含一个数字的旋转数组</li>
<li>空数组</li>
</ul>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;string></span></span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">int</span> <span class="token function">findMinNumberOrderly</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> vData<span class="token punctuation">,</span> <span class="token keyword">int</span> vStart<span class="token punctuation">,</span> <span class="token keyword">int</span> vEnd<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> Min <span class="token operator">=</span> vData<span class="token punctuation">[</span>vStart<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> vStart <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> vEnd<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Min <span class="token operator">></span> vData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
            Min <span class="token operator">=</span> vData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> Min<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">int</span> <span class="token function">findMinNumberInRotatedArray</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> vData<span class="token punctuation">,</span> <span class="token keyword">int</span> vStart<span class="token punctuation">,</span> <span class="token keyword">int</span> vEnd<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>vData<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> std<span class="token operator">::</span><span class="token function">exception</span><span class="token punctuation">(</span><span class="token string">"Invalid input"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>vData<span class="token punctuation">[</span>vStart<span class="token punctuation">]</span> <span class="token operator">&lt;</span> vData<span class="token punctuation">[</span>vEnd<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> vData<span class="token punctuation">[</span>vStart<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>vStart <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">!=</span> vEnd<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">int</span> Mid <span class="token operator">=</span> <span class="token punctuation">(</span>vStart <span class="token operator">+</span> vEnd<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>vData<span class="token punctuation">[</span>Mid<span class="token punctuation">]</span> <span class="token operator">==</span> vData<span class="token punctuation">[</span>vStart<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> vData<span class="token punctuation">[</span>Mid<span class="token punctuation">]</span> <span class="token operator">==</span> vData<span class="token punctuation">[</span>vEnd<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token function">findMinNumberOrderly</span><span class="token punctuation">(</span>vData<span class="token punctuation">,</span> vStart<span class="token punctuation">,</span> vEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>vData<span class="token punctuation">[</span>Mid<span class="token punctuation">]</span> <span class="token operator">>=</span> vData<span class="token punctuation">[</span>vStart<span class="token punctuation">]</span><span class="token punctuation">)</span>
            vStart <span class="token operator">=</span> Mid<span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>vData<span class="token punctuation">[</span>Mid<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> vData<span class="token punctuation">[</span>vEnd<span class="token punctuation">]</span><span class="token punctuation">)</span>
            vEnd <span class="token operator">=</span> Mid<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> vData<span class="token punctuation">[</span>vEnd<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string<span class="token operator">&amp;</span> vTestName<span class="token punctuation">,</span> <span class="token keyword">const</span> std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> vData<span class="token punctuation">,</span> <span class="token keyword">int</span> vExpectValue<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"-------------------"</span> <span class="token operator">&lt;&lt;</span> vTestName <span class="token operator">&lt;&lt;</span> <span class="token string">" begins:-------------------"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expect result: "</span> <span class="token operator">&lt;&lt;</span> vExpectValue <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> <span class="token function">findMinNumberInRotatedArray</span><span class="token punctuation">(</span>vData<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> vData<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// 典型输入，单调升序的数组的一个旋转</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Array1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test1"</span><span class="token punctuation">,</span> Array1<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// 有重复数字，并且重复的数字刚好的最小的数字</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Array2 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test2"</span><span class="token punctuation">,</span> Array2<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// 有重复数字，但重复的数字不是第一个数字和最后一个数字</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Array3 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test3"</span><span class="token punctuation">,</span> Array3<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// 有重复的数字，并且重复的数字刚好是第一个数字和最后一个数字</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Array4 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test4"</span><span class="token punctuation">,</span> Array4<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// 单调升序数组，旋转0个元素，也就是单调升序数组本身</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Array5 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test5"</span><span class="token punctuation">,</span> Array5<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// 数组中只有一个数字</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Array6 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test6"</span><span class="token punctuation">,</span> Array6<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// 空数组</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Array7<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"-------------------"</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"test7"</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" begins:-------------------"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expect result: "</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Invalid input"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span>
    <span class="token punctuation">{</span>
        <span class="token function">findMinNumberInRotatedArray</span><span class="token punctuation">(</span>Array7<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Array7<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span> <span class="token punctuation">(</span>std<span class="token operator">::</span>exception e<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="面试题12：矩阵中的路径"><a href="#面试题12：矩阵中的路径" class="headerlink" title="面试题12：矩阵中的路径"></a><font size="6" color="orange">面试题12：矩阵中的路径</font></h2><hr>
<p>回溯法其实就是蛮力法的升级，在每一步上可能会有n多个选择，那就依次进行每一个选择，然后再去面临新的选择。这个看起来就像一个多叉树。在每一个叶节点上判断是否满足题目约束条件，如果不满足则回溯到上一个节点。</p>
<p>题目：请设计一个函数，用来判断在一个矩阵中是否存在一条包含某字符串所有字符的路径。路径可以从矩阵中的任意一格开始，每一步可以在矩阵中向左、右、上、下移动一格。如果一条路径经过了矩阵的某一格，那么该路径不能再次进入该格子。例如，在下面的3x4的矩阵中包含一条字符串“bfce”的路径。但矩阵中不包含字符串“abfb”的路径，因为字符b占据了矩阵中的第一行第二个格子之后，路径不能再次进入这个格子。</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">a b t g
c f c s
j d e h
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>该题是可以用回溯法解决的典型题。首先在矩阵中任选一个格子作为路径起点，判断该格子上的字符是否等于字符串里的第一个字符，是的话接着去判断该字符周围的四个字符是否有字符串里的第二个字符……依次类推，如果某一个格子是字符串里的第i个字符，需要进一步去判断它周围4个字符里是否有字符串里的第i+1个字符。只有周围能找到第i+1个字符，当前格子上的字符才是满足字符串路径的。很显然，这是个递归问题。很像图形学中的图元填充算法。需要注意的是，由于无法重复进入某个格子，所以需要一个和二维数组等大小的bool数组，来记录某个格子是否已经被访问过。</p>
<p>先写测试用例：</p>
<ul>
<li>矩阵中存在字符串路径</li>
<li>矩阵中不存在字符串路径</li>
<li>矩阵只有一行或一列</li>
<li>矩阵和路径中所有的字符都是相同的</li>
<li>空矩阵</li>
</ul>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">bool</span> <span class="token function">findPathCore</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">>></span><span class="token operator">&amp;</span> vData<span class="token punctuation">,</span> std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">>></span><span class="token operator">&amp;</span> voIsVisited<span class="token punctuation">,</span> <span class="token keyword">const</span> std<span class="token operator">::</span>string<span class="token operator">&amp;</span> vPath<span class="token punctuation">,</span> <span class="token keyword">int</span> vRowIndex<span class="token punctuation">,</span> <span class="token keyword">int</span> vColIndex<span class="token punctuation">,</span> <span class="token keyword">int</span> vCharIndex<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">bool</span> Result <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> Row <span class="token operator">=</span> vData<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> Col <span class="token operator">=</span> vData<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>vRowIndex <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> vColIndex <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> vRowIndex <span class="token operator">>=</span> Row <span class="token operator">||</span> vColIndex <span class="token operator">>=</span> Col<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>voIsVisited<span class="token punctuation">[</span>vRowIndex<span class="token punctuation">]</span><span class="token punctuation">[</span>vColIndex<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>vData<span class="token punctuation">[</span>vRowIndex<span class="token punctuation">]</span><span class="token punctuation">[</span>vColIndex<span class="token punctuation">]</span> <span class="token operator">!=</span> vPath<span class="token punctuation">[</span>vCharIndex<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>vCharIndex <span class="token operator">==</span> vPath<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

    voIsVisited<span class="token punctuation">[</span>vRowIndex<span class="token punctuation">]</span><span class="token punctuation">[</span>vColIndex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    Result <span class="token operator">=</span> <span class="token function">findPathCore</span><span class="token punctuation">(</span>vData<span class="token punctuation">,</span> voIsVisited<span class="token punctuation">,</span> vPath<span class="token punctuation">,</span> vRowIndex <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> vColIndex<span class="token punctuation">,</span> vCharIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">||</span>
        <span class="token function">findPathCore</span><span class="token punctuation">(</span>vData<span class="token punctuation">,</span> voIsVisited<span class="token punctuation">,</span> vPath<span class="token punctuation">,</span> vRowIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> vColIndex<span class="token punctuation">,</span> vCharIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">||</span>
        <span class="token function">findPathCore</span><span class="token punctuation">(</span>vData<span class="token punctuation">,</span> voIsVisited<span class="token punctuation">,</span> vPath<span class="token punctuation">,</span> vRowIndex<span class="token punctuation">,</span> vColIndex <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> vCharIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">||</span>
        <span class="token function">findPathCore</span><span class="token punctuation">(</span>vData<span class="token punctuation">,</span> voIsVisited<span class="token punctuation">,</span> vPath<span class="token punctuation">,</span> vRowIndex<span class="token punctuation">,</span> vColIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> vCharIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    voIsVisited<span class="token punctuation">[</span>vRowIndex<span class="token punctuation">]</span><span class="token punctuation">[</span>vColIndex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">bool</span> <span class="token function">findPathInMatrix</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">>></span><span class="token operator">&amp;</span> vData<span class="token punctuation">,</span> <span class="token keyword">const</span> std<span class="token operator">::</span>string<span class="token operator">&amp;</span> vPath<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">bool</span> Result <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> Row <span class="token operator">=</span> vData<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Row <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> std<span class="token operator">::</span><span class="token function">exception</span><span class="token punctuation">(</span><span class="token string">"Invalid input"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> Col <span class="token operator">=</span> vData<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Col <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> std<span class="token operator">::</span><span class="token function">exception</span><span class="token punctuation">(</span><span class="token string">"Invalid input"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">>></span> IsVisited<span class="token punctuation">;</span>
    IsVisited<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>Row<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> Item <span class="token operator">:</span> IsVisited<span class="token punctuation">)</span>
        Item<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>Col<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> Row<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> Col<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">findPathCore</span><span class="token punctuation">(</span>vData<span class="token punctuation">,</span> IsVisited<span class="token punctuation">,</span> vPath<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                Result <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> Result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string<span class="token operator">&amp;</span> vTestName<span class="token punctuation">,</span> <span class="token keyword">const</span> std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">>></span><span class="token operator">&amp;</span> vData<span class="token punctuation">,</span> <span class="token keyword">const</span> std<span class="token operator">::</span>string<span class="token operator">&amp;</span> vPath<span class="token punctuation">,</span> <span class="token keyword">int</span> vExpectValue<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"---------------"</span> <span class="token operator">&lt;&lt;</span> vTestName<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" begins: ---------------"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expect result: "</span> <span class="token operator">&lt;&lt;</span> vExpectValue <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> <span class="token function">findPathInMatrix</span><span class="token punctuation">(</span>vData<span class="token punctuation">,</span> vPath<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：矩阵中存在字符串路径</span>
<span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">>></span> Data <span class="token operator">=</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">{</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'B'</span><span class="token punctuation">,</span><span class="token string">'T'</span><span class="token punctuation">,</span><span class="token string">'G'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'C'</span><span class="token punctuation">,</span><span class="token string">'F'</span><span class="token punctuation">,</span><span class="token string">'C'</span><span class="token punctuation">,</span><span class="token string">'S'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'J'</span><span class="token punctuation">,</span><span class="token string">'D'</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">,</span><span class="token string">'H'</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>string Path <span class="token operator">=</span> <span class="token string">"BFCE"</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test1"</span><span class="token punctuation">,</span> Data<span class="token punctuation">,</span> Path<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：矩阵中存在字符串路径</span>
<span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">>></span> Data <span class="token operator">=</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">{</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'B'</span><span class="token punctuation">,</span><span class="token string">'C'</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'S'</span><span class="token punctuation">,</span><span class="token string">'F'</span><span class="token punctuation">,</span><span class="token string">'C'</span><span class="token punctuation">,</span><span class="token string">'S'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'D'</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>string Path <span class="token operator">=</span> <span class="token string">"SEE"</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test2"</span><span class="token punctuation">,</span> Data<span class="token punctuation">,</span> Path<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：矩阵中不存在字符串路径</span>
<span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">>></span> Data <span class="token operator">=</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">{</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'B'</span><span class="token punctuation">,</span><span class="token string">'T'</span><span class="token punctuation">,</span><span class="token string">'G'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'C'</span><span class="token punctuation">,</span><span class="token string">'F'</span><span class="token punctuation">,</span><span class="token string">'C'</span><span class="token punctuation">,</span><span class="token string">'S'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'J'</span><span class="token punctuation">,</span><span class="token string">'D'</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">,</span><span class="token string">'H'</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>string Path <span class="token operator">=</span> <span class="token string">"ABFB"</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test3"</span><span class="token punctuation">,</span> Data<span class="token punctuation">,</span> Path<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：矩阵中存在字符串路径</span>
<span class="token keyword">void</span> <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">>></span> Data <span class="token operator">=</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">{</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'B'</span><span class="token punctuation">,</span><span class="token string">'C'</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">,</span><span class="token string">'H'</span><span class="token punctuation">,</span><span class="token string">'J'</span><span class="token punctuation">,</span><span class="token string">'I'</span><span class="token punctuation">,</span><span class="token string">'G'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'S'</span><span class="token punctuation">,</span><span class="token string">'F'</span><span class="token punctuation">,</span><span class="token string">'C'</span><span class="token punctuation">,</span><span class="token string">'S'</span><span class="token punctuation">,</span><span class="token string">'L'</span><span class="token punctuation">,</span><span class="token string">'O'</span><span class="token punctuation">,</span><span class="token string">'P'</span><span class="token punctuation">,</span><span class="token string">'Q'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'D'</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">,</span><span class="token string">'M'</span><span class="token punctuation">,</span><span class="token string">'N'</span><span class="token punctuation">,</span><span class="token string">'O'</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'D'</span><span class="token punctuation">,</span><span class="token string">'I'</span><span class="token punctuation">,</span><span class="token string">'D'</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">,</span><span class="token string">'J'</span><span class="token punctuation">,</span><span class="token string">'F'</span><span class="token punctuation">,</span><span class="token string">'M'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'V'</span><span class="token punctuation">,</span><span class="token string">'C'</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">,</span><span class="token string">'I'</span><span class="token punctuation">,</span><span class="token string">'F'</span><span class="token punctuation">,</span><span class="token string">'G'</span><span class="token punctuation">,</span><span class="token string">'G'</span><span class="token punctuation">,</span><span class="token string">'S'</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>string Path <span class="token operator">=</span> <span class="token string">"SLHECCEIDEJFGGFIE"</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test4"</span><span class="token punctuation">,</span> Data<span class="token punctuation">,</span> Path<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：矩阵中存在字符串路径</span>
<span class="token keyword">void</span> <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">>></span> Data <span class="token operator">=</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">{</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'B'</span><span class="token punctuation">,</span><span class="token string">'C'</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">,</span><span class="token string">'H'</span><span class="token punctuation">,</span><span class="token string">'J'</span><span class="token punctuation">,</span><span class="token string">'I'</span><span class="token punctuation">,</span><span class="token string">'G'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'S'</span><span class="token punctuation">,</span><span class="token string">'F'</span><span class="token punctuation">,</span><span class="token string">'C'</span><span class="token punctuation">,</span><span class="token string">'S'</span><span class="token punctuation">,</span><span class="token string">'L'</span><span class="token punctuation">,</span><span class="token string">'O'</span><span class="token punctuation">,</span><span class="token string">'P'</span><span class="token punctuation">,</span><span class="token string">'Q'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'D'</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">,</span><span class="token string">'M'</span><span class="token punctuation">,</span><span class="token string">'N'</span><span class="token punctuation">,</span><span class="token string">'O'</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'D'</span><span class="token punctuation">,</span><span class="token string">'I'</span><span class="token punctuation">,</span><span class="token string">'D'</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">,</span><span class="token string">'J'</span><span class="token punctuation">,</span><span class="token string">'F'</span><span class="token punctuation">,</span><span class="token string">'M'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'V'</span><span class="token punctuation">,</span><span class="token string">'C'</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">,</span><span class="token string">'I'</span><span class="token punctuation">,</span><span class="token string">'F'</span><span class="token punctuation">,</span><span class="token string">'G'</span><span class="token punctuation">,</span><span class="token string">'G'</span><span class="token punctuation">,</span><span class="token string">'S'</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>string Path <span class="token operator">=</span> <span class="token string">"SGGFIECVAASABCEHJIGQEM"</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test5"</span><span class="token punctuation">,</span> Data<span class="token punctuation">,</span> Path<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：矩阵中存在字符串路径，所有字符都相同</span>
<span class="token keyword">void</span> <span class="token function">test6</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">>></span> Data <span class="token operator">=</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">{</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>string Path <span class="token operator">=</span> <span class="token string">"AAAAAAAAAAAA"</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test6"</span><span class="token punctuation">,</span> Data<span class="token punctuation">,</span> Path<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：矩阵中存在字符串路径，所有字符都相同</span>
<span class="token keyword">void</span> <span class="token function">test7</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">>></span> Data <span class="token operator">=</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">{</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>string Path <span class="token operator">=</span> <span class="token string">"AAAAAAAAAAAAA"</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test7"</span><span class="token punctuation">,</span> Data<span class="token punctuation">,</span> Path<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：矩阵中存在字符串路径，所有字符都相同</span>
<span class="token keyword">void</span> <span class="token function">test8</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">>></span> Data <span class="token operator">=</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">{</span><span class="token string">'A'</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>string Path <span class="token operator">=</span> <span class="token string">"A"</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test8"</span><span class="token punctuation">,</span> Data<span class="token punctuation">,</span> Path<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：矩阵中不存在字符串路径，所有字符都相同</span>
<span class="token keyword">void</span> <span class="token function">test9</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">>></span> Data <span class="token operator">=</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">{</span><span class="token string">'A'</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>string Path <span class="token operator">=</span> <span class="token string">"B"</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test9"</span><span class="token punctuation">,</span> Data<span class="token punctuation">,</span> Path<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：空数组</span>
<span class="token keyword">void</span> <span class="token function">test10</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">>></span> Data<span class="token punctuation">;</span>
    std<span class="token operator">::</span>string Path<span class="token punctuation">;</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"---------------"</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"test10"</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" begins: ---------------"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expect result: "</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Invalid input"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span>
    <span class="token punctuation">{</span>
        <span class="token function">findPathInMatrix</span><span class="token punctuation">(</span>Data<span class="token punctuation">,</span> Path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span> <span class="token punctuation">(</span>std<span class="token operator">::</span>exception e<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test7</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test9</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test10</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>通常在二维矩阵上找路径这类问题都可以用回溯法解决。</p>
<h2 id="面试题13：机器人的运动范围"><a href="#面试题13：机器人的运动范围" class="headerlink" title="面试题13：机器人的运动范围"></a><font size="6" color="orange">面试题13：机器人的运动范围</font></h2><hr>
<p>题目：地上有一个m行n列的方格。一个机器人从坐标（0,0）的格子开始移动，它每次可以向左、右、上、下移动一格，但不能进入行坐标和列坐标的数位之和大于k的格子。例如当k为18时，机器人能够进入方格（35,37），因为3+5+3+7=18。但它不能进入方格（35,38），因为3+5+3+8=19。请问该机器人能够到达多少个格子？</p>
<p>由于题目中是横纵坐标的数位之和要小于k，而不是横纵坐标之和，也就说说即使能够到达（30,30)，也不一定能够到达它左边的点（29,29）。所以无法通过遍历整个二维数组，看每个数的数位之和是否小于k来判断能否到达对应的格子，因为即使满足小于k，也不一定能够从（0,0）点走过来，中间路有可能断掉。所以只能通过回溯法一步一步来判断了。回溯原理和上题类似。</p>
<p>先写测试用例：</p>
<ul>
<li>普通矩阵，k为正数</li>
<li>矩阵只有一行或者一列、k为0</li>
<li>k为负数</li>
</ul>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">bool</span> <span class="token function">calcCoordinateSumGreaterThanThreshold</span><span class="token punctuation">(</span><span class="token keyword">int</span> vCurrentRowIndex<span class="token punctuation">,</span> <span class="token keyword">int</span> vCurrentColIndex<span class="token punctuation">,</span> <span class="token keyword">int</span> vThreshold<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> Sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>vCurrentRowIndex<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Sum <span class="token operator">+</span><span class="token operator">=</span> vCurrentRowIndex <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">;</span>
        vCurrentRowIndex <span class="token operator">/</span><span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>vCurrentColIndex<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Sum <span class="token operator">+</span><span class="token operator">=</span> vCurrentColIndex <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">;</span>
        vCurrentColIndex <span class="token operator">/</span><span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> Sum <span class="token operator">></span> vThreshold<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">int</span> <span class="token function">countAccessibleCellCore</span><span class="token punctuation">(</span><span class="token keyword">int</span> vCurrentRowIndex<span class="token punctuation">,</span> <span class="token keyword">int</span> vCurrentColIndex<span class="token punctuation">,</span> <span class="token keyword">int</span> vRowNum<span class="token punctuation">,</span> <span class="token keyword">int</span> vColNum<span class="token punctuation">,</span> <span class="token keyword">int</span> vThreshold<span class="token punctuation">,</span> std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">>></span><span class="token operator">&amp;</span> vioIsVisited<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>vCurrentRowIndex <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> vCurrentRowIndex <span class="token operator">>=</span> vRowNum <span class="token operator">||</span> vCurrentColIndex <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> vCurrentColIndex <span class="token operator">>=</span> vColNum<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>vioIsVisited<span class="token punctuation">[</span>vCurrentRowIndex<span class="token punctuation">]</span><span class="token punctuation">[</span>vCurrentColIndex<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">calcCoordinateSumGreaterThanThreshold</span><span class="token punctuation">(</span>vCurrentRowIndex<span class="token punctuation">,</span> vCurrentColIndex<span class="token punctuation">,</span> vThreshold<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        vioIsVisited<span class="token punctuation">[</span>vCurrentRowIndex<span class="token punctuation">]</span><span class="token punctuation">[</span>vCurrentColIndex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token function">countAccessibleCellCore</span><span class="token punctuation">(</span>vCurrentRowIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> vCurrentColIndex<span class="token punctuation">,</span> vRowNum<span class="token punctuation">,</span> vColNum<span class="token punctuation">,</span> vThreshold<span class="token punctuation">,</span> vioIsVisited<span class="token punctuation">)</span>
            <span class="token operator">+</span> <span class="token function">countAccessibleCellCore</span><span class="token punctuation">(</span>vCurrentRowIndex <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> vCurrentColIndex<span class="token punctuation">,</span> vRowNum<span class="token punctuation">,</span> vColNum<span class="token punctuation">,</span> vThreshold<span class="token punctuation">,</span> vioIsVisited<span class="token punctuation">)</span>
            <span class="token operator">+</span> <span class="token function">countAccessibleCellCore</span><span class="token punctuation">(</span>vCurrentRowIndex<span class="token punctuation">,</span> vCurrentColIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> vRowNum<span class="token punctuation">,</span> vColNum<span class="token punctuation">,</span> vThreshold<span class="token punctuation">,</span> vioIsVisited<span class="token punctuation">)</span>
            <span class="token operator">+</span> <span class="token function">countAccessibleCellCore</span><span class="token punctuation">(</span>vCurrentRowIndex<span class="token punctuation">,</span> vCurrentColIndex <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> vRowNum<span class="token punctuation">,</span> vColNum<span class="token punctuation">,</span> vThreshold<span class="token punctuation">,</span> vioIsVisited<span class="token punctuation">)</span>
            <span class="token operator">+</span> <span class="token function">countAccessibleCellCore</span><span class="token punctuation">(</span>vCurrentRowIndex<span class="token punctuation">,</span> vCurrentColIndex <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> vRowNum<span class="token punctuation">,</span> vColNum<span class="token punctuation">,</span> vThreshold<span class="token punctuation">,</span> vioIsVisited<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">int</span> <span class="token function">countAccessibleCell</span><span class="token punctuation">(</span><span class="token keyword">int</span> vRowNum<span class="token punctuation">,</span> <span class="token keyword">int</span> vColNum<span class="token punctuation">,</span> <span class="token keyword">int</span> vThreshold<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>vRowNum <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">||</span> vColNum <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">||</span> vThreshold <span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> std<span class="token operator">::</span><span class="token function">exception</span><span class="token punctuation">(</span><span class="token string">"Invalid input"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">>></span> IsVisited<span class="token punctuation">;</span>
    IsVisited<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>vRowNum<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> Item <span class="token operator">:</span> IsVisited<span class="token punctuation">)</span>
        Item<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>vColNum<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">countAccessibleCellCore</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> vRowNum<span class="token punctuation">,</span> vColNum<span class="token punctuation">,</span> vThreshold<span class="token punctuation">,</span> IsVisited<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string<span class="token operator">&amp;</span> vTestName<span class="token punctuation">,</span> <span class="token keyword">int</span> vThreshold<span class="token punctuation">,</span> <span class="token keyword">int</span> vRowNum<span class="token punctuation">,</span> <span class="token keyword">int</span> vColNum<span class="token punctuation">,</span> <span class="token keyword">int</span> vExpectValue<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"---------------"</span> <span class="token operator">&lt;&lt;</span> vTestName<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" begins: ---------------"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expect result: "</span> <span class="token operator">&lt;&lt;</span> vExpectValue <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> <span class="token function">countAccessibleCell</span><span class="token punctuation">(</span>vRowNum<span class="token punctuation">,</span>vColNum<span class="token punctuation">,</span> vThreshold<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// 测试用例：普通矩阵</span>
<span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test1"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 测试用例：方格多行多列</span>
<span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test2"</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">359</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 测试用例：方格只有一行，机器人只能到达部分方格</span>
<span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test3"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 测试用例：方格只有一行，机器人能到达所有方格</span>
<span class="token keyword">void</span> <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test4"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 测试用例：方格只有一列，机器人只能到达部分方格</span>
<span class="token keyword">void</span> <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test5"</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">79</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 测试用例：方格只有一列，机器人能到达所有方格</span>
<span class="token keyword">void</span> <span class="token function">test6</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test6"</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 测试用例：方格只有一行一列</span>
<span class="token keyword">void</span> <span class="token function">test7</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test7"</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 测试用例：方格只有一行一列</span>
<span class="token keyword">void</span> <span class="token function">test8</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test8"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 测试用例：机器人不能进入任意一个方格</span>
<span class="token keyword">void</span> <span class="token function">test9</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">try</span>
    <span class="token punctuation">{</span>
        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"---------------"</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"test9"</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" begins: ---------------"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expect result: "</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Invalid input"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span><span class="token punctuation">;</span>
        <span class="token function">countAccessibleCell</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span> <span class="token punctuation">(</span>std<span class="token operator">::</span>exception e<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test7</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test9</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<p>动态规划现在是编程面试中的热门话题。如果面试题是求一个问题的最优解（通常是求最大值或者最小值），而且该问题能够分解成若干个子问题，并且子问题之间还有重叠的更小的子问题，就可以考虑用动态规划来解决这个问题。</p>
<p>我们在应用动态规划之前要分析能够把大问题分解成小问题，分解后的每个小问题也存在最优解。如果把小问题的最优解组合起来能够得到整个问题的最优解，那么我们可以应用动态规划解决这个问题。</p>
<p>动态规划的四个特点：</p>
<ol>
<li>求的是一个问题的最优解</li>
<li>整体问题的最优解是依赖各个子问题的最优解</li>
<li>把大问题分成若干个小问题，这些小问题之间还有相互重叠的更小的子问题</li>
<li>为了避免重复求解子问题，可以用从下往上的顺序先计算小问题的最优解并存储下来，再以此为基础求取大问题的最优解。从上往下分析问题，从下往上求解问题。</li>
</ol>
<p>应用贪心算法时，都需要证明一个问题：为什么这样的贪心选择能得到最优解？</p>
<h2 id="面试题14：剪绳子"><a href="#面试题14：剪绳子" class="headerlink" title="面试题14：剪绳子"></a><font size="6" color="orange">面试题14：剪绳子</font></h2><hr>
<p>题目：给你一根长度为n的绳子，请把绳子剪成m段（m、n都是整数，n&gt;1并且m&gt;1），每段绳子的长度记为$k[0],k[1],…,k[m]$。请问$k[0]\times k[1]\times…\times k[m]$可能的最大乘积是多少？例如，当绳子的长度是8时，我们把它剪成长度分别为2、3、3的三段，此时得到的最大乘积是18。</p>
<p>从动态规划的角度出发，自上向下分析问题。假设$f(n)$是把长度为n的绳子剪成若干段后各段长度乘积的最大值。重要的是要找到关于$f(n)$的递归公式。剪第一刀的时候，有n-1种可能的选择，也就是剪出来的第一段的长度可能是$1,2,…,n-1$，第二段的长度对应是$n-1,n-2,…,1$，那么很显然，n段绳子最大分段乘积，等于它剪下来的这两段绳子的最大分段乘积，相乘的结果里最大的那个值，即$f(n)=max(f(i)\times f(n-i))$。其中i表示剪下来的第一段的长度，取值是$1 \sim n-1$。</p>
<p>从公式里就可以看出会存在很多重复的子问题，所以我们可以自下向上求解。当n&lt;2时，f(n)=0（因为题目中要求了n&gt;1），当n=2时，f(n)=1，n=3时，f(n)=2。后面的f(n)就可以按照公式来求解了。</p>
<p>先写测试用例：</p>
<ul>
<li>功能测试：绳子的初始长度大于5</li>
<li>边界测试：绳子的初始长度分别为0、1、2、3、4。</li>
</ul>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">int</span> <span class="token function">maxProduct4Rope</span><span class="token punctuation">(</span><span class="token keyword">int</span> vLength<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>vLength <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>vLength <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>vLength <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>

    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> ProductSet<span class="token punctuation">;</span>
    ProductSet<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>vLength <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ProductSet<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    ProductSet<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//注意这里的ProductSet之所以会出现1、2、3而不是0、2、2，是因为后面要用到它们的值，</span>
    ProductSet<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//所以在n=1、2、3时，它们是可以独立成一段的，并不代表f(n)（题目中f(n)要求绳子必须被砍成2段以上）</span>
    ProductSet<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> vLength<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">int</span> CurrentMaxProduc <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> i <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">int</span> CurrentProduct <span class="token operator">=</span> ProductSet<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">*</span> ProductSet<span class="token punctuation">[</span>i <span class="token operator">-</span> j<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>CurrentProduct <span class="token operator">></span> CurrentMaxProduc<span class="token punctuation">)</span>
                CurrentMaxProduc <span class="token operator">=</span> CurrentProduct<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        ProductSet<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> CurrentMaxProduc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> ProductSet<span class="token punctuation">[</span>vLength<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string<span class="token operator">&amp;</span> vTestName<span class="token punctuation">,</span> <span class="token keyword">int</span> vRopeLength<span class="token punctuation">,</span> <span class="token keyword">int</span> vExpectValue<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"---------------"</span> <span class="token operator">&lt;&lt;</span> vTestName<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"begins: ---------------"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Expect result: "</span> <span class="token operator">&lt;&lt;</span> vExpectValue <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Actual result: "</span> <span class="token operator">&lt;&lt;</span> <span class="token function">maxProduct4Rope</span><span class="token punctuation">(</span>vRopeLength<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> expected <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test1"</span><span class="token punctuation">,</span> length<span class="token punctuation">,</span> expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> expected <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test2"</span><span class="token punctuation">,</span> length<span class="token punctuation">,</span> expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> expected <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test3"</span><span class="token punctuation">,</span> length<span class="token punctuation">,</span> expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> expected <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test4"</span><span class="token punctuation">,</span> length<span class="token punctuation">,</span> expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> expected <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test5"</span><span class="token punctuation">,</span> length<span class="token punctuation">,</span> expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">test6</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> expected <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test6"</span><span class="token punctuation">,</span> length<span class="token punctuation">,</span> expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">test7</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> expected <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test7"</span><span class="token punctuation">,</span> length<span class="token punctuation">,</span> expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">test8</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> expected <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test8"</span><span class="token punctuation">,</span> length<span class="token punctuation">,</span> expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">test9</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> expected <span class="token operator">=</span> <span class="token number">27</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test9"</span><span class="token punctuation">,</span> length<span class="token punctuation">,</span> expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">test10</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> expected <span class="token operator">=</span> <span class="token number">36</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test10"</span><span class="token punctuation">,</span> length<span class="token punctuation">,</span> expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//******************************************************************</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token keyword">void</span> <span class="token function">test11</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> expected <span class="token operator">=</span> <span class="token number">86093442</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"test11"</span><span class="token punctuation">,</span> length<span class="token punctuation">,</span> expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test7</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test9</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test10</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test11</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>需要注意的是，上面代码里对ProductSet[1]、ProductSet[2]、ProductSet[3]的初值，因为这几个数会参与后面绳子长度更大时的递推计算，所以它们不是真的代码f(n)，而是代表着可以不剪的情况下的最大乘积（题目中f(n)是不能不剪的，因为规定了n&gt;1）。</p>
<p>从代码里很容易看出，用动态规划的时间复杂度是$O(n^2)$，空间复杂度是$O(n)$。</p>
<p>其实我们还可以用贪心算法来求解：当$n\ge 5$时，应该尽可能多地剪长度为3的绳子；当剩下的绳子长度为4时，把绳子剪成两段长度为2的绳子。证明如下：<br>当$n\ge 5$时，可以证明$2(n-2)&gt;n$并且$3(n-3)&gt;n$，但是$4(n-4)&lt;n$。也就是说，当绳子剩下的长度大于或者等于5的时候，我们就把它剪成长度为3或者2的绳子段。又因为当$n\ge 5$时，$3(n-3)\ge 2(n-2)$，所以应该尽可能多地剪长度为3的绳子段。</p>
<p>当绳子的长度为4时，当然是要剪成2x2的两段，才能使分段乘积最大。</p>
<p>贪心算法求f(n)的代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">maxProduct4RopeByGreedy</span><span class="token punctuation">(</span><span class="token keyword">int</span> vLength<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>vLength <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">==</span> vLength<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">==</span> vLength<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> TimesOf3 <span class="token operator">=</span> vLength <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">==</span> vLength <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">//如果余0，说明前面不断剪3之后，会剩下一段长度为5的，可以再接着剪3</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> TimesOf3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">==</span> vLength <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">//如果余1，说明前面不断剪3之后，会剩下一段长度为4的，这时不能再按3来剪了</span>
        <span class="token keyword">return</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> TimesOf3 <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span>                            <span class="token comment" spellcheck="true">//如果余2，说明前面不断剪3之后，会剩下一段长度为5的，可以再接着剪3，剩下一段2</span>
        <span class="token keyword">return</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> TimesOf3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="面试题15：二进制中1的个数"><a href="#面试题15：二进制中1的个数" class="headerlink" title="面试题15：二进制中1的个数"></a><font size="6" color="orange">面试题15：二进制中1的个数</font></h2><hr>
<p>题目：请实现一个函数，输入一个整数，输出该整数二进制表示中1的个数。例如，把9表示成二进制是1001，有2位数是1，因此如果输入9，则函数输出2。</p>
<p>最自然想到的一般都是把输入的整数n向右移位，每移1次都与1作与运算，来判断当前最低位是否为1，通过这样的方式来计算对应二进制中1的个数。代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">countNumber1InBinary</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> Count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token operator">++</span>Count<span class="token punctuation">;</span>
        n <span class="token operator">=</span> n <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> Count<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>但是当输入的n是负数时，会陷入死循环。</p>
<p>所以我们改成对1进行左移，代替对n进行右移，这样能够正常实现目标：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">countNumber1InBinary</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> Count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> Flag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>Flag<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&amp;</span> Flag<span class="token punctuation">)</span>
            <span class="token operator">++</span>Count<span class="token punctuation">;</span>
        Flag <span class="token operator">=</span> Flag <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> Count<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>但这只是常规解法，它的时间复杂度和n的位数有关，如果n是32位整型，那就需要移位32次。</p>
<p>位运算还有一个很重要也很常用的性质：<br><strong>把一个整数减去1，再和原整数做与运算，会把该整数二进制里最右边的1变成0</strong>。所以我们可以用该方法来找出n中的二进制个数，它循环的次数和二进制中1的个数一样：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">countNumber1InBinaryBynsub1</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> Count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token operator">++</span>Count<span class="token punctuation">;</span>
        n <span class="token operator">=</span> n <span class="token operator">&amp;</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> Count<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>相似的问题还有：判断一个整数是不是2的整数次方，可以用<code>n&amp;(n-1)</code>来解决；判断一个整数m需要改变多少个二进制位才能变成另一个整数n，可以先对m和n作异或运算，再对异或结果求1的个数。</p>
<h1 id="第三章-高质量的代码"><a href="#第三章-高质量的代码" class="headerlink" title="第三章 高质量的代码"></a><font size="6" color="orange">第三章 高质量的代码</font></h1><hr>
<p>从功能测试、边界测试和负面测试3个方面设计测试用例，以确保代码的完整性。</p>
<p>3种错误处理的方法：</p>
<ul>
<li>函数用返回值来告知调用者是否出错。</li>
<li>当错误发生时设置一个全局变量。</li>
<li>当错误发生时抛出一个异常。</li>
</ul>
<h2 id="面试题16：数值的整数次方"><a href="#面试题16：数值的整数次方" class="headerlink" title="面试题16：数值的整数次方"></a><font size="6" color="orange">面试题16：数值的整数次方</font></h2><hr>
<p>题目：实现函数double Power(double base, int exponent)，求base的exponent次方。不得使用库函数，同时不需要考虑大数问题。</p>
<p>这个题目很简单，只是需要考虑全面。如果指数是负数或者0呢？如果底数和指数都是0呢（0的0次方是没有意义的）？如果指数是负数底数是0呢（会出现0的倒数）？</p>
<p>而且求幂次方，还可以根据指数是奇数还是偶数来进行平方运算，把时间复杂度降低到$O(logn)$：<br>$$<br>a^n=<br>\begin{cases}<br>a^{n/2}\cdot a^{n/2}, &amp; n为偶数 \<br>a^{(n-1)/2}\cdot a^{(n-1)/2}\cdot a, &amp; n为奇数<br>\end{cases}<br>$$<br>这个公式用递归或者循环求就可以了。</p>
<p>还有一个细节：可以用右移运算符代替除以2，可以用位与运算符代替（与1）来判断一个数是奇数还是偶数。毕竟位运算的效率比乘除法以及求余运算的效率要高很多。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题17：打印从1到最大的n位数"><a href="#面试题17：打印从1到最大的n位数" class="headerlink" title="面试题17：打印从1到最大的n位数"></a><font size="6" color="orange">面试题17：打印从1到最大的n位数</font></h2><hr>
<p>题目：输入数字n，按顺序打印出从1到最大的n位十进制数。比如输入3，则打印出：1、2、3、…、999。</p>
<p>这个题目最大的难点是大数问题：这个最大的n位数，可能超出了int或者long long能够表示的最大范围。</p>
<p>最常用的也是最容易的方法是用字符串或者数组表达大数。需要解决的主要问题是在字符串表达的数字上模拟加1这个操作（从右到左扫描每个数字，给它加1，如果溢出到10就继续向左扫描），然后把每次加了1的数字字符串打印出来。</p>
<p>需要注意的是，要判断数字字符串什么时候加到了最大的n位数？加到最大的n位数时，再加1就会再最高位上出现进位，所以可以根据最高位字符是否发生了进位来判断是否加到了最大的n位数。</p>
<p>还需要注意的是，数字字符串前面可能会有一一些字符’0’，这些字符不能打印出来。</p>
<p>另外一种解决方法是：这些数字所有数字其实就是每位数字上从’0’到’9’的全排列，把这些所有排列情况用递归方式放到数字字符串里，最递归退出的时候打印当前数字字符串就可以了。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>上面是用一个char字符来表示每一位数字，但是char实际上可以表示256个字符，而十进制数字只有0~9的10个数字。所以，用char型字符来表示十进制数字并没有充分利用内存，<strong>有没有更高效的方式来表示大数</strong>？</p>
<p>如果面试题是关于n位的整数且没有限定n的取值范围，或者输入任意大小的整数，那么这道题目很有可能是需要考虑大数问题的。字符串是一种简单、有效地表示大数的方法。</p>
<h2 id="面试题18：删除链表的节点"><a href="#面试题18：删除链表的节点" class="headerlink" title="面试题18：删除链表的节点"></a><font size="6" color="orange">面试题18：删除链表的节点</font></h2><hr>
<p>题目一：在O(1)时间内删除链表节点。给定单向链表的头指针和一个节点指针，定义一个函数在O(1)时间内删除该节点。链表节点与函数的定义如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> SListNode
<span class="token punctuation">{</span>
    <span class="token keyword">int</span>            m_nValue<span class="token punctuation">;</span>
    SListNode<span class="token operator">*</span>  m_pNext<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">deleteNode</span><span class="token punctuation">(</span>SListNode<span class="token operator">*</span><span class="token operator">*</span> pListHead<span class="token punctuation">,</span> SListNode<span class="token operator">*</span> pToBeDeleted<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>思路也很简单：用“狸猫换太子”方法，把要删除节点的内容和它的下一个节点的内容交换，然后删除下一个节点即可。需要注意的是如果要删除的节点是尾节点，则还是需要重头开始遍历。而且如果链表中只有一个节点，那么删除该节点之后需要把链表的头节点置为nullptr。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>题目二：删除链表中重复的节点。在一个排序的链表中，如何删除重复的节点？</p>
<p>题目思路很简单，只需要从头开始依次遍历链表，并保持一个前驱节点指针以供删除节点用。当发现节点内容重复时，循环删除重复的节点。需要注意的是，传入的头结点也可能是重复节点，也有可能被删除，所以传入的头结点参数应该是双重指针类型，如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">deleteDuplication</span><span class="token punctuation">(</span>SListNode<span class="token operator">*</span><span class="token operator">*</span> pHead<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题19：正则表达式匹配"><a href="#面试题19：正则表达式匹配" class="headerlink" title="面试题19：正则表达式匹配"></a><font size="6" color="orange">面试题19：正则表达式匹配</font></h2><hr>
<p>题目：请实现一个函数用来匹配包含’.’和’*‘的正则表达式。模式中的字符’.’表示任意一个字符，而’*‘表示它前面的字符可以出现任意次（含0次）。在本题中，匹配是指字符串的所有字符匹配整个模式。例如，字符串”aaa”与模式”a.a”和”ab*ac*a”匹配，但与”aa.a”和”ab*a”均不匹配。</p>
<p>对于普通字符和’.’，只需要依次匹配字符串和模式串即可；但是如果发现当前字符的下一个字符是’*‘，那就需要判断字符串里当前字符和模式串里的对应字符是否匹配，如果不匹配则直接让模式串往后跳两个字符，如果匹配则模式串可以往后跳两个字符（对应于字符串里只有一个字符和模式串里的’*‘匹配），也可以不往后跳保持不动（对应于字符串里有多个字符和模式串里的’*‘匹配）。整个过程可以用递归或者循环来实现。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题20：表示数值的字符串"><a href="#面试题20：表示数值的字符串" class="headerlink" title="面试题20：表示数值的字符串"></a><font size="6" color="orange">面试题20：表示数值的字符串</font></h2><hr>
<p>题目：请实现一个函数用来判断字符串是否表示数值（包括整数和小数）。例如，字符串”+100”、”5e2”、”-123”、”3.1416”及”-1E-1”都表示数值，但”12e”、”1a3.14”、”1.2.3”、”+-5”及”12e+5.4”都不是。</p>
<p>从题目中可以看出，表示数值的字符串遵循模式A[.[B]][e|EC]或者.B[e|EC]，其中A是数值的整数部分，B是小数点后面的小数部分，C是’e’或者’E’后面的指数部分。而且在小数里可能没有整数部分A。并且A和C都有可能是以’+’或者’-‘开头的0~9的数位串；B也是0~9的数位串，但前面不能有正负号。</p>
<p>只需要依次扫描字符串和模式串即可，和上题不一样的是，不需要再一个字符一个字符地扫描，该题应该一部分一部分地扫描（因为ABC等都不表示某一个或几个具体的字符，而是表示一串字符），比如先扫描整数部分（如果有的话），再扫描小数部分（如果有的话），再扫描指数部分（如果有的话）。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题21：调整数组顺序使奇数位于偶数前面"><a href="#面试题21：调整数组顺序使奇数位于偶数前面" class="headerlink" title="面试题21：调整数组顺序使奇数位于偶数前面"></a><font size="6" color="orange">面试题21：调整数组顺序使奇数位于偶数前面</font></h2><hr>
<p>题目：输入一个整数数组，实现一个函数来调整该数组中数字的顺序，使得所有奇数位于数组的前半部分，所有偶数位于数组的后半部分。</p>
<p>一种办法是类似于快排的原理，用两个指针，一个从前往后移动，一个从后往前移动，如果发现第一个指针指向的是偶数，第二个指针指向的是奇数，则交换这两个数字，直到两个指针相遇为止。</p>
<hr>
<p>鲁棒性是指程序能够判断输入是否合乎规范要求，并对不符合要求的输入予以合理的处理。容错性是鲁棒性的一个重要体现。</p>
<hr>
<h2 id="面试题22：链表中倒数第k个节点"><a href="#面试题22：链表中倒数第k个节点" class="headerlink" title="面试题22：链表中倒数第k个节点"></a><font size="6" color="orange">面试题22：链表中倒数第k个节点</font></h2><hr>
<p>题目：输入一个链表，输出该链表中倒数第k个节点。为了符合大多数人的习惯，本题从1开始计数，即链表的尾节点是倒数第1个节点。例如，一个链表有6个节点，从头结点开始，它们的值依次是1、2、3、4、5、6，那么这个链表的倒数第3个节点是值为4的节点、链表节点定义如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> SListNode
<span class="token punctuation">{</span>
    <span class="token keyword">int</span>            m_nValue<span class="token punctuation">;</span>
    SListNode<span class="token operator">*</span>  m_pNext<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这种在链表上遍历寻找某个节点的问题通常可以通过使用两个快慢指针来解决。这里我们可以定义两个指针，一个指针先向前走k-1步，然后另一个再开始向前走，当第一个指针指向链表末尾时，第二个指针就刚好指向倒数第k个节点。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>需要注意的是要处理好空链表、k等于0或者负数、链表总结点数小于k等等异常情况。</p>
<p>类似的题目还有寻找链表的中间节点。我们也可以通过定义两个快慢指针来解决，一个指针从头结点开始每次向后走两步，另一个从头结点开始每次向后走一步，到快指针走到链表末尾（或者倒数第二节点）时，慢指针就刚好指向链表中间。</p>
<p>当我们用一个指针遍历不能解决问题的时候，可以尝试用两个指针来遍历链表。可以让其中一个指针遍历的速度快一些（比如依次在链表上走两步），或者让它先在链表上走若干步。</p>
<h2 id="面试题23：链表中环的入口节点"><a href="#面试题23：链表中环的入口节点" class="headerlink" title="面试题23：链表中环的入口节点"></a><font size="6" color="orange">面试题23：链表中环的入口节点</font></h2><hr>
<p>题目：如果一个链表中包含环，如何找出环的入口节点。</p>
<p>先要判断链表中是否有环，这个可以通过两个快（2步）慢（1步）指针来解决。如果慢指针能够追上快指针，则说明存在环。追上的那个点称之为相遇节点。</p>
<p>接下来有两种方法：</p>
<ul>
<li>再定义两个慢指针，一个从头结点出发往前走，另一个从相遇节点出发往前走，当这两个指针相遇时就是环的入口节点（详细说明可以参考<a href="http://popperelay.cn/2019/01/29/%E7%8E%8B%E9%81%93-%E7%A8%8B%E5%BA%8F%E5%9F%BA%E7%A1%80/" target="_blank" rel="noopener">这里</a>）</li>
<li>先从相遇节点出发，往前走看多少步之后会再回到相遇节点，从而得到环的长度n。然后再定义两个先后指针，一个先从头结点开始往前走n步，然后另一个再开始往前走，当两个指针相遇时就是环的入口节点（此时先指针已经绕环走了一圈到了入口节点）。</li>
</ul>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题24：反转链表"><a href="#面试题24：反转链表" class="headerlink" title="面试题24：反转链表"></a><font size="6" color="orange">面试题24：反转链表</font></h2><hr>
<p>题目：定义一个函数，输入一个链表的头结点，反转该链表并输出反转后链表的头结点。链表节点定义如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> SListNode
<span class="token punctuation">{</span>
    <span class="token keyword">int</span>            m_nValue<span class="token punctuation">;</span>
    SListNode<span class="token operator">*</span>  m_pNext<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>该题画个图分析一下就很清楚了。需要注意的是，需要把当前的下一个节点保存起来，因为一旦把当前节点的<code>m_pNext</code>指向前一个节点，那当前节点和下一个节点的联系就断开了，也就是说无法再用<code>m_pNext</code>来得到下一个节点了。整个过程可以用循环也可以用递归来实现。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题25：合并两个排序的链表"><a href="#面试题25：合并两个排序的链表" class="headerlink" title="面试题25：合并两个排序的链表"></a><font size="6" color="orange">面试题25：合并两个排序的链表</font></h2><hr>
<p>题目：输入两个递增排序的链表，合并这两个链表并使新链表中的节点仍然递增排序的。链表节点定义如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> SListNode
<span class="token punctuation">{</span>
    <span class="token keyword">int</span>            m_nValue<span class="token punctuation">;</span>
    SListNode<span class="token operator">*</span>  m_pNext<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>可以用循环，将链表2（头结点值较大的那个链表）的每个节点依次合并到链表1里（头结点值较小的那个链表）。</p>
<p>也可以使用递归：每次从两个排序的链表中选出值最小的节点，作为合并之后的头结点1；然后对剩下的两个链表再选出对应的头结点2，把这两个头结点1和头结点2连起来。这显然是一个递归的过程。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题26：树的子结构"><a href="#面试题26：树的子结构" class="headerlink" title="面试题26：树的子结构"></a><font size="6" color="orange">面试题26：树的子结构</font></h2><p>题目： 输入两棵二叉树A和Ｂ，判断Ｂ是不是Ａ的子结构。二叉树节点的定义如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> SBinaryTreeNode
<span class="token punctuation">{</span>
    <span class="token keyword">double</span>                m_Value<span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span>    m_pLeft<span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span>    m_pRight<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>要查找树A中是否存在和树B结构一样的子树，可以分成两步：第一步，在树A中找到树B的根节点的值一样的节点R；第二步，判断树A中以R为根节点的子树是不是包含和树B一样的结构。都可以用递归来实现。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>需要注意的是：由于计算机表示小数（包括float和double型小数）都有误差，我们不能直接用等号（==）判断两个小数是否相等。如果两个小数的差的绝对值很小，如小于0.0000001，就可以认为它们相等。</p>
<h1 id="第四章-解决面试题的思路"><a href="#第四章-解决面试题的思路" class="headerlink" title="第四章 解决面试题的思路"></a><font size="6" color="orange">第四章 解决面试题的思路</font></h1><hr>
<h2 id="面试题27：二叉树的镜像"><a href="#面试题27：二叉树的镜像" class="headerlink" title="面试题27：二叉树的镜像"></a><font size="6" color="orange">面试题27：二叉树的镜像</font></h2><hr>
<p>题目：请完成一个函数，输入一棵二叉树，该函数输出它的镜像。二叉树节点的定义如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> SBinaryTreeNode
<span class="token punctuation">{</span>
    <span class="token keyword">int</span>                    m_Value<span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span>    m_pLeft<span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span>    m_pRight<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>画个图分析一下很简单：递归前序遍历，交换每个非叶节点的左右两个子节点。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>用循环实现的话代码如下（需要借助栈）：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题28：对称的二叉树"><a href="#面试题28：对称的二叉树" class="headerlink" title="面试题28：对称的二叉树"></a><font size="6" color="orange">面试题28：对称的二叉树</font></h2><hr>
<p>题目：请实现一个函数，用来判断一棵二叉树是不是对称的。如果一棵二叉树和它的镜像一样，那么它是对称的。</p>
<p>可以通过比较二叉树的前序遍历序列（先根再左再右）和对称前序遍历序列（先根再右再左）来判断二叉树是不是对称的。如果两个序列是一样的，那么二叉树就是对称的。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题29：顺时针打印矩阵"><a href="#面试题29：顺时针打印矩阵" class="headerlink" title="面试题29：顺时针打印矩阵"></a><font size="6" color="orange">面试题29：顺时针打印矩阵</font></h2><hr>
<p>题目：输入一个矩阵，按照从外向里以顺时针的顺序依次打印出每一个数字。例如，如果输入如下矩阵：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token number">1</span>    <span class="token number">2</span>    <span class="token number">3</span>    <span class="token number">4</span>
<span class="token number">5</span>    <span class="token number">6</span>    <span class="token number">7</span>    <span class="token number">8</span>
<span class="token number">9</span>    <span class="token number">10</span>    <span class="token number">11</span>    <span class="token number">12</span>
<span class="token number">13</span>    <span class="token number">14</span>    <span class="token number">15</span>    <span class="token number">16</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>则依次打印出数字1,2,3,4,8,12,16,15,14,13,9,5,6,7,11,10。</p>
<p>一圈一圈地（外层循环）打印，每次打印一圈的时候都是从左到右、从上到下、从右到左再从下到上（4个内层循环）。需要注意的是，如果只有一行、一列或者两行这种，可能不需要打印某一行或者某一列，要设置好内层循环的结束条件。</p>
<h2 id="面试题30：包含min函数的栈"><a href="#面试题30：包含min函数的栈" class="headerlink" title="面试题30：包含min函数的栈"></a><font size="6" color="orange">面试题30：包含min函数的栈</font></h2><hr>
<p>题目：定义栈的数据结构，请在该类型中实现一个能够得到栈的最小元素的min函数。在该栈中，调用min、push及pop的时间复杂度都是O(1)。</p>
<p> 该题仅仅用一个变量来保存栈中的最小值是不行的，因为这个最小值只能记录压入的栈的元素里最小的那个值，这个值一旦被弹出栈，就无法知道当前栈中最小的元素时哪个了。<strong>可以借助一个辅助栈，每次入栈时，都把当前最小的元素压入辅助栈，出栈时也一并弹出辅助栈栈顶的元素。辅助栈栈顶一直都是最小元素</strong>。比如往栈1里压入元素3，当前最小的元素是3，将其压入辅助栈2；然后再往栈1里压入元素4，由于辅助栈里栈顶元素是3，所以栈1里最小元素还是3，所以还是把3压入辅助栈；再往栈1里压入元素2，和辅助栈栈顶比较发现最小元素是2，所以把2压入辅助栈；然后从栈1里弹出栈顶元素2，同时也从辅助栈里弹出一个元素，弹出后辅助栈栈顶元素是3，也就是说当前栈1里最小的元素是3.。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题31：栈的压入、弹出序列"><a href="#面试题31：栈的压入、弹出序列" class="headerlink" title="面试题31：栈的压入、弹出序列"></a><font size="6" color="orange">面试题31：栈的压入、弹出序列</font></h2><hr>
<p>题目：输入两个整数序列，第一个序列表示栈的压入顺序，请判断第二个序列是否为该栈的弹出序列。假设压入栈的所有数字均不相等。例如，序列{1,2,3,4,5}是某栈的压栈序列，序列{4,5,3,2,1}是该压栈序列对应的一个弹出序列，但{4,3,5,1,2}就不可能是该压栈序列的弹出序列。</p>
<p>解题思路很简单：用一个栈来模拟对应的入栈和出栈即可。如果下一个弹出的数字刚好是栈顶数字，那么直接弹出；如果下一个弹出的数字不在栈顶，则把压栈序列中还没有入栈的数字压入辅助栈，直到直到把下一个需要弹出的数字压入栈顶为止；如果所有数字都压入栈后仍然没有找到下一个弹出的数字，那么该序列不可能是一个弹出序列。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题32：从上到下打印二叉树"><a href="#面试题32：从上到下打印二叉树" class="headerlink" title="面试题32：从上到下打印二叉树"></a><font size="6" color="orange">面试题32：从上到下打印二叉树</font></h2><hr>
<p>题目一：不分行从上到下打印二叉树。从上到下打印出二叉树的每个节点，同一层的节点按照从左到右的顺序打印。二叉树节点的定义如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> SBinaryTreeNode
<span class="token punctuation">{</span>
    <span class="token keyword">int</span>                    m_Value<span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span>    m_pLeft<span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span>    m_pRight<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>用队列来进行程序遍历即可：先把根节点入队列，然后每次出队列打印节点的后，把出队节点的子节点压入队列。循环直到队列为空。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>题目二：分行从上到下打印二叉树。从上到下按层打印二叉树，同一层的节点按从左到右的顺序打印，每一层打印到一行。</p>
<p>和上题不同的是，由于需要分行，所以我们需要变量来记录每一层push了多少个节点到队列里，pop一个（打印）就减一下，减到0时就说明该层打印完了。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>题目三：之字形打印二叉树。请实现一个函数按照之字形顺序打印二叉树，即第一行按照从左到右的顺序打印，第二层按照从右到左的顺序打印，第三行再按照从左到右的顺序打印，其他行以此类推。</p>
<p>按之字形顺序打印二叉树需要两个栈。如果当前打印的是奇数层，则先入栈左子节点再入栈右子节点到栈1里，打印时对栈1进行出栈；如果当前打印的是偶数层，则先入栈右子节点再入栈左子节点到栈2里。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题33：二叉搜索树的后序遍历序列"><a href="#面试题33：二叉搜索树的后序遍历序列" class="headerlink" title="面试题33：二叉搜索树的后序遍历序列"></a><font size="6" color="orange">面试题33：二叉搜索树的后序遍历序列</font></h2><hr>
<p>题目：输入一个整数数组，判断该数组是不是某二叉搜索树的后序遍历结果。如果是则返回true，否则返回false。假设输入的数组的任意两个数字都互不相同。</p>
<p>由于二叉搜索树后序遍历序列中最后一个元素是根节点的值，所以可以把整个序列分成两组，前半部分都小于根节点的值，后半部分都大于根节点的值。所以解题思路就是：序列的最后一个元素是根节点，以此把序列分成两部分，判断前半部分是不是全部都小于根节点，后半部分是不是全部都大于根节点。然后再对这两部分递归判断即可。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>如果面试题要求处理一棵二叉树的遍历序列，则可以先找到二叉树的根节点，再基于根节点把整棵树的遍历序列拆分成左子树对应的子序列和右子树对应的子序列，接下来再递归地处理这两个子序列。</p>
<h2 id="面试题34：二叉树中和为某一值的路径"><a href="#面试题34：二叉树中和为某一值的路径" class="headerlink" title="面试题34：二叉树中和为某一值的路径"></a><font size="6" color="orange">面试题34：二叉树中和为某一值的路径</font></h2><hr>
<p>题目：输入一棵二叉树和一个整数，打印出二叉树中节点值的和为输入整数的所有路径。从树的根节点开始往下一直到叶节点所经过的节点形成一条路径。二叉树节点的定义如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> SBinaryTreeNode
<span class="token punctuation">{</span>
    <span class="token keyword">int</span>                    m_Value<span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span>    m_pLeft<span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span>    m_pRight<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>解题思路：前序遍历并计算路径和即可，注意的是需要在递归遍历的同时记录路径上的节点，而且在退出函数时需要在路径上删除当前节点并减去当前节点的值。而路径节点可以用栈来保存，函数退出时出栈即可。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题35：复杂链表的复制"><a href="#面试题35：复杂链表的复制" class="headerlink" title="面试题35：复杂链表的复制"></a><font size="6" color="orange">面试题35：复杂链表的复制</font></h2><hr>
<p>题目：请实现函数<code>SComplexListNode* clone(SComplexListNode* pHead)</code>，复制一个复杂链表。在复杂链表中，每个节点除了有一个<code>m_pNext</code>指针指向下一个节点，还有一个<code>m_pSibling</code>指针指向链表中的任意节点或者nullptr。节点定义如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> SComplexListNode
<span class="token punctuation">{</span>
    <span class="token keyword">int</span>                    m_Value<span class="token punctuation">;</span>
    SComplexListNode<span class="token operator">*</span>    m_pNext<span class="token punctuation">;</span>
    SComplexListNode<span class="token operator">*</span>    m_pSibling<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>可以先把所有节点直接复制到其后面，即原节点是A→B，复制之后变成A→A’→B→B’。同时如果A的<code>m_pSibling</code>指向B，那么复制后A’的<code>m_pSibling</code>应该指向B’。最后拆开成两条链表即可。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题36：二叉搜索树与双向链表"><a href="#面试题36：二叉搜索树与双向链表" class="headerlink" title="面试题36：二叉搜索树与双向链表"></a><font size="6" color="orange">面试题36：二叉搜索树与双向链表</font></h2><hr>
<p>题目：输入一棵二叉搜索树，将该二叉搜索树转换成一个排序的双向链表。要求不能创建任何新的节点，只能调整树中节点指针的指向。二叉树节点的定义如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> SBinaryTreeNode
<span class="token punctuation">{</span>
    <span class="token keyword">int</span>                    m_Value<span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span>    m_pLeft<span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span>    m_pRight<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>该题主要是用递归的思想来解决：把根节点和左子树的最右节点连在一起，再把根节点和右子树的最左节点连在一起。由于是二叉搜索树并且是排序的双向链表，所以需要用中序遍历。当遍历到根节点时，左子树已经调整为双向链表了，需要得到左子树转换的双向链表中的最后一个节点，所以在递归时除了当前节点，还需要传入另一个输入输出参数，用于记录已排序的双向链表中的最后一个节点，也用于在递归遍历右子树的时候，记录当前根节点（递归右子树的时候会一直遍历到右子树的最左节点，这时需要把这个最左节点和根节点连起来，所以就需要有一个参数保存了根节点）。所以递归函数应该声明如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">convertNode</span><span class="token punctuation">(</span>SBinaryTreeNode<span class="token operator">*</span> pNode<span class="token punctuation">,</span> SBinaryTreeNode<span class="token operator">*</span><span class="token operator">*</span> pLastNodeInList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>第二个参数之所以要声明为双重指针，就是因为在递归遍历右子树时需要将其重置为指向当前节点（即右子树的根节点），而要改变一个函数输入指针所指向的位置，应该使用指向指针指针。第一个参数不是双重指针，是因为只需要改动到第一个指针所指向的对象的内容（即<code>p-&gt;m_pLeft=...</code>），而不是指针本身（即<code>p=...</code>）。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题37：序列化二叉树"><a href="#面试题37：序列化二叉树" class="headerlink" title="面试题37：序列化二叉树"></a><font size="6" color="orange">面试题37：序列化二叉树</font></h2><hr>
<p>题目：请实现两个函数，分别用来序列化和反序列化二叉树。</p>
<p>可以使用深度遍历或者层序遍历来序列化二叉树，但是都要按照完全二叉树来序列化，即空节点nullptr也应该被序列化为一个特殊的字符，表示它代表一个空节点。这样才能反序列化出对应的二叉树。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<hr>
<p>可以看出解决上面这些复杂问题（尤其是关于树的），关键在于把一个大的问题分解成几个小问题，并递归地解决小问题。这里即是把二叉树分解成3部分：根节点、左子树和右子树。我们在处理根节点之后再分别处理它的左、右子树，这是典型的把问题递归分解然后逐个解决的过程。</p>
<hr>
<h2 id="面试题38：字符串的排列"><a href="#面试题38：字符串的排列" class="headerlink" title="面试题38：字符串的排列"></a><font size="6" color="orange">面试题38：字符串的排列</font></h2><hr>
<p>题目：输入一个字符串，打印出该字符串中字符的所有排列。例如：如数字符串abc，则打印出由字符a、b、c所能排列出来的所有字符串abc、acb、bac、bca、cab和cba。</p>
<p>考虑把这个复杂的问题分解成小的问题，我们可以把一个字符串看成由两部分组成：第一部分是它的第一个字符；第二部分是后面的所有字符。第一个字符有很多种可能的情况，即字符串中所有的字符都可能出现在第一个位置。如果从字符串中取出一个字符，求剩下的字符串，可以在原字符串中减去对应的那个字符，但是这样每次从原字符串中剔除一个字符会开辟新的空间。还有更好的方式是：把对应的字符交换到串首，然后串首地址加1就是剩下的字符串了。这样一直递归下去，每次都会让当前串首和后面的字符交换，从而会得到所有的排列情况，当递归到剩下的字符串是一个nullptr时，就说明当前字符串已经是一种排列了，打印该字符串。</p>
<p>不过需要注意的是，每次递归结束后都要把交换的字符串还原，才能进行下一次循环。（这个题其实不用递归用循环不太好做，因为字符串如果长度为3，就需要3重循环，但是字符串的长度是不固定的，导致循环很难写；可以用动态规划来做，但是需要很多额外的辅助空间来记录中间结果）。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>延伸：如果不是求字符的所有排列，而是求字符的所有组合，应该怎么办呢？比如输入abc，则它们的组合有a、b、c、ab、ac、bc、abc。而且ab和ba只能算一个组合。</p>
<p>这些组合的长度可能会1,2,…,n。所以这个问题实际上是：输入n个字符，求这n个字符能够构成多少个长度为m的组合。和之前一样，其实也可以分解成递归子问题，两部分：第一部分是第一个字符；第二部分是后面的所有字符。<strong>但是怎么保证ab和ba是相同的组合？</strong></p>
<p>还有像下列问题其实都是全排列问题：</p>
<ul>
<li>把8个数字放到正方体的8个顶点，判断有没有可能使得正方体上三组相对的面上的4个顶点的和都相等。其实这就是个全排列问题，找出满足a1+a2+a3+a4==a5+a6+a7+a8、a1+a3+a5+a7==a2+a4+a6+a8并且a1+a2+a5+a6==a3+a4+a7+a8的那些排列。</li>
<li>8皇后问题也是全排列问题。对8x8的国际象棋，设置一个a[8]的数组，每个数组的值从0~7进行全排列，然后找任意两个皇后不在同一条对象上的排列，即需要满足对于任意的两个i、j，是否有i-j==a[i]-a[j]或者j-i==a[i]-a[j]。有的话就不满足八皇后。</li>
</ul>
<p>如果面试题是按照一定要求拜访若干个数字，则可以先求出这些数字的所有排列，然后一一判断每个排列是不是满足题目给定的要求。</p>
<h1 id="第五章-优化时间和空间效率"><a href="#第五章-优化时间和空间效率" class="headerlink" title="第五章 优化时间和空间效率"></a><font size="6" color="orange">第五章 优化时间和空间效率</font></h1><hr>
<p>如果小问题中有相互重叠的部分，那么直接用递归实现虽然代码显得很简洁，但时间效率可能会非常差。</p>
<h2 id="面试题39：数组中出现次数超过一半的数字"><a href="#面试题39：数组中出现次数超过一半的数字" class="headerlink" title="面试题39：数组中出现次数超过一半的数字"></a><font size="6" color="orange">面试题39：数组中出现次数超过一半的数字</font></h2><hr>
<p>题目：数组中有一个数字出现的次数超过数组长度的一半，请找出这个数字。例如，输入一个长度为9的数组{1,2,3,2,2,2,5,4,2}。由于数字2在数组中出现了5次，超过数组长度的一半，因此输出2。</p>
<p>解法一：<br>由于有一个数字出现的次数超过了数组长度n的一半，所以排序后这个数字肯定是中位数。可以借用快排一次排序的思想，随机选择一个数字作为基准数，一次快排之后，比这个基准数小的都跑到了它左边，比这个基准数大的都跑到了它右边。所以一次快排之后，如果发现这个基准数不在中位数的位置，即下标不是n/2，那说明这个基准数不是中位数（即要找的那个出现次数超过一半的数）；如果下标大于n/2，说明中位数肯定在它左边；如果下标小于n/2，说明中位数肯定在它右边。在左边或者右边就需要再循环调用一次快排，直到发现基准数等于n/2为止。<strong>这个算法其实不仅可以用来找中位数，也可以用来找数组中任意第k大的数字</strong>。而且它的时间复杂度是O(n)。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>解法二：<br>可以根据数组中数出现的次数这个特性来解答：在遍历数组的时候保存两个值，一个是数组中一个数字，另一个是次数。当我们遍历到下一个数字的时候，如果下一个数字和我们之前保存的数字相同，则次数加1；如果下一个数字和我们之前保存的数字不同，则次数减1。如果次数变成了0，那么我们需要保存下一个数字，并把次数设为1。由于我们要找的数字出现的次数比其他所有数字出现的次数之和还要多，所以要找的数字肯定是最后一次把次数设为1时对应的数字。该算法的时间复杂度也是O(n)。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>第一种算法会改变原有数组，第二种算法不会。</p>
<h2 id="面试题40：最小的k个数"><a href="#面试题40：最小的k个数" class="headerlink" title="面试题40：最小的k个数"></a><font size="6" color="orange">面试题40：最小的k个数</font></h2><hr>
<p>题目：输入n个整数，找出其中最小的k个数。例如，输入4、5、1、6、2、7、3、8这8个数字，则最小的4个数字是1、2、3、4。</p>
<p>解法一：<br>可以和上题一样，利用一次快速排序，来找第k大的数字。然后最小的k个数就是它前面的数字（时间复杂度为O(n)）。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>解法二：<br>可以用一个大小为k的最大堆来实现。当新进来一个数字时，如果大于堆顶，则不管它；如果小于堆顶，则把这个数插入最大堆里（这个算法的时间复杂度是O(nlogk)）。</p>
<p>实现一个堆在面试的十几分钟内很难完成（其实STL也提供了堆模板操作函数：<code>push_heap</code>和<code>pop_heap</code>）。如果面试官不反对用STL，那么我们可以用set、map这类红黑树容器来代替。红黑树会把节点分为红、黑两种颜色并根据一些规则确保树在一定程度上是平衡的，从而保证在红黑树中的查找、删除和插入操作的时间复杂度都是O(logk)。所以整个算法的时间复杂度是O(nlogk)。</p>
<p>第一种算法会修改输入的数据，第二种算法适合海量数据的输入（因为内存大小是有限的，有可能不能把这些海量的数据一次性全部载入内存）。</p>
<h2 id="面试题41：数据流中的中位数"><a href="#面试题41：数据流中的中位数" class="headerlink" title="面试题41：数据流中的中位数"></a><font size="6" color="orange">面试题41：数据流中的中位数</font></h2><hr>
<p>题目：如何得到一个数据流中的中位数？如果从数据流中读出奇数个数值，那么中位数就是所有数值排序之后位于中间的数值。如果从数据流中读出偶数个数值，那么中位数就是所有数值排序之后中间两个数的平均值。</p>
<p>由于数据是从一个数据流中读出来的，因而数据的数目随着时间的的变化而增加。如果用一个数据容器来保存从流中读出来的数据，则当有新的数据从流中读出来时，这些数据就插入数据容器。那么这个数据容器用什么数据结构定义最合适呢？</p>
<p>如果能够保证数据容器坐标的数据都小于右边的数据，那么即使左、右两边内部的数据没有排序，也可以根据左边最大的数及右边最小的数来得到中位数。可以用一个最大堆来实现左边的数据容器，用一个最小堆来实现右边的数据容器。由于要保证数据平均分配到两个堆中，即两个堆中数据的数目只差不能超过1。所以当数据总数是奇数时把新数据插入左边的最大堆，当数据总数是偶数时，为了避免新数据比最大堆中一些数据小（必须保证最小堆中的所有数据都要大于最大堆中的所有数据），所以不能直接插入最小堆里，可以先把这个新数据插入最大堆，再把最大堆中最大的数字拿出来插入最小堆。这样就能保证最小堆中所有数字都大于最大堆中的数字。</p>
<p>完整代码如下（基于STL的模板函数<code>push_heap</code>、<code>pop_heap</code>及vector实现堆）：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题42：连续子数组的最大和"><a href="#面试题42：连续子数组的最大和" class="headerlink" title="面试题42：连续子数组的最大和"></a><font size="6" color="orange">面试题42：连续子数组的最大和</font></h2><hr>
<p>题目：输入一个整型数组，数组里有正数也有负数。数组中的一个或连续多个整数组成一个子数组。求所有子数组的和的最大值。要求时间复杂度为O(n)。</p>
<p>解法一：<br>在每次往后遍历数组时，保存一个之前的最大的子数组和。比如对于数组{1,-2,3,10,-4,7,2,-5}，初始化时和为0，加上第一个数1之后和为1，此时最大的和为1；加上第二个数-2之后和为-1，再往后加第三个数的话负数只会让第三个数更小，所以直接把最大和更新为第三个数；再加上第4个数10后，最大和更新为13；再加上-4之后当前和变成9，最大和还是13；再加上7之后当前和变成16，最大和也随之更新为16；再加上2之后最大和更新为18；再加上-5之后最大和还是18。</p>
<p>所以：需要在遍历的时候保存一个之前的最大的子数组和，才能确保接着往后面加会不会出现超过这个最大和的。而且加的时候，如果发现当前和是个负数，那么就应该舍弃前面的子数组，因为负数往后加只会把当前那个数变的更小，还不如令当前和直接等于当前这个数。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>解法二：应用动态规划<br>这个问题可以用下列的递归公式来表示（$f(i)表示以第i个数字结尾的子数组的最大和$）：<br>$$<br>f(i)=<br>\begin{cases}<br>pData[i], &amp;i=0或者f(i-1)\le 0 \<br>f(i-1)+pData[i], &amp;i\ne 0并且f(i-1)&gt;0<br>\end{cases}<br>$$<br>这个公式的意义是：当以第i-1个数字结尾的子数组中所有数字的和小于0时，如果把这个负数与第i个数累加，则得到的结果比第i个数字本身还要小，所以这种情况情况下以第i个数字结尾的子数组的最大和就是第i个数本身。如果第i-1个数字结尾的子数组中所有数字的和大于0，则与第i个数字累加就得到以第i个数字结尾的子数组中的最大和。</p>
<p>这时基于递归的方式在分析动态规划的问题的，但最终都会基于循环去编码，会发现代码和上面的一样，因为$f(i)$其实就是变量<code>CurrentSum</code>，这两种思路是异曲同工的。</p>
<h2 id="面试题43：1-n整数中1出现的次数"><a href="#面试题43：1-n整数中1出现的次数" class="headerlink" title="面试题43：1~n整数中1出现的次数"></a><font size="6" color="orange">面试题43：1~n整数中1出现的次数</font></h2><hr>
<p>题目：输入一个整数n，求1~n这n个整数的十进制表示中1出现的次数。例如输入12,1~12这些整数中包含1的数字有1、10、11和12，所以1一共出现了5次。</p>
<p>可以通过每次去掉最高位来进行递归统计，递归的次数和位数相同。举例子来说：比如n=21345，把21345按最高位分成1~1345和1346~21345两个部分，会发现后一段1346~21345中1的个数，和1~20000是一样的，因为21345的后四位刚好不上1346之前的数字。而前一段1~1345中1的个数就可以用相同的方式递归求解了。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>一个数字n有O(logn)位，因此这种思路的时间复杂度是O(logn)。</p>
<h2 id="面试题44：数字序列中某一位的数字"><a href="#面试题44：数字序列中某一位的数字" class="headerlink" title="面试题44：数字序列中某一位的数字"></a><font size="6" color="orange">面试题44：数字序列中某一位的数字</font></h2><hr>
<p>题目：数字以0123456789101112131415…的格式序列化到一个字符序列中。在这个序列中，第5位（从0开始计数）是5，第13位是1，第19位是4，等等。请写一个函数，求任意第n位对应的数字。</p>
<p>可以根据0~9占了10x1=10位、10~99占了90x2=180位、100~999占了900x3=2700位……，来快速定位到第n位是在数字m里的第k位，然后对数字m求模求除法就能得到第k位上的数字了。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题45：把数组排成最小的数"><a href="#面试题45：把数组排成最小的数" class="headerlink" title="面试题45：把数组排成最小的数"></a><font size="6" color="orange">面试题45：把数组排成最小的数</font></h2><hr>
<p>题目：输入一个正整数数组，把数组里所有数字拼接起来排成一个数，打印出能拼接出的所有数字中最小的一个。例如数组数组{3,32,321}，则打印出这3个数字能排成的最小数字321323。</p>
<p>一种解法当然是求出全排列，然后选出最小的数。还有更快的方法：两个数字m和n，如果拼接之后mn&lt;nm则定义为m小于n（一种新的小于关系，不是真正数值上的小于）。然后把数组中的所有数字按照这个小于关系进行排序，排序完之后从头到尾拼接起来的数字就是能够组成的最小的数字（证明过程很复杂）。</p>
<p>需要注意的是，不能直接在数值上去判断mn&lt;nm，因为单独的m或者n可能不会溢出，但是组合成的mn或者nm会溢出整型能够表示的最大范围。也就是说还隐藏了一个大数问题。解决大数问题的常用方法是把数字转换成字符串，因为mn和nm的位数是一样的，所以直接比较字符nm和字符串mn的大小得到的结果和比较数值是一样的。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题46：把数字翻译成字符串"><a href="#面试题46：把数字翻译成字符串" class="headerlink" title="面试题46：把数字翻译成字符串"></a><font size="6" color="orange">面试题46：把数字翻译成字符串</font></h2><hr>
<p>题目：给定一个数字，我们按照如下规则把它翻译为字符串：0翻译成’a’，1翻译成’b’，…….，25翻译成’z’。一个数字可能有多个翻译。例如，12258有5种不同的翻译，分别是”bccfi”、”bwfi”、”bczi”、”mcfi”和”mzi”。请编程实现一个函数，用来计算一个数字有多少种不同的翻译方法。</p>
<p>以数字12258为例，一开始有两种选择：第一种是把数字1翻译成’b’，后面剩下数字2258；第二种是把数字12翻译成’m’，后面剩下数字258。翻译后面剩下的数字也是一样的过程，都有两种选择。所以这很明显是一个递归的过程。用$f(i)$表示从第i位开始的不同翻译的数目，那么递归公式如下：<br>$$<br>f(i)=f(i+1)+g(i,i+1)f(i+2)<br>$$<br>当第i位和第i+1位两位数字拼接起来的数字在10~25的范围内时，函数$g(i,i+1)$的值为1，否则为0。</p>
<p>用递归来解的话会存在很多重复的子问题，所以还是基于递归分析问题，然后用循环来实现(即从右到左翻译)。完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题47：礼物的最大价值"><a href="#面试题47：礼物的最大价值" class="headerlink" title="面试题47：礼物的最大价值"></a><font size="6" color="orange">面试题47：礼物的最大价值</font></h2><hr>
<p>题目：在一个mxn的棋盘的每一格都放有一个礼物，每个礼物都有一定的价值（价值大于0）。你可以从棋盘的左上角开始拿格子里的礼物，并每次向右或者向下移动一格，直到到达棋盘的右下角。给定一个棋盘及其上面的礼物，请计算你最多能拿到多少价值的礼物？</p>
<p>这是一个典型的能用动态规划解决的问题。先用递归的思路来分析：先定义函数$f(i,j)$表示到达坐标为(i, j)的格子时能拿到的礼物总和的最大值。有两种路径能够到达坐标为(i,j)的格子：通过格子(i-1, j)或者(i, j-1)。所以：<br>$$<br>f(i, j) = max(f(i-1, j), f(i, j-1)) + gift[i, j]<br>$$</p>
<p>$gift[i,j]$表示坐标为[i, j]的格子里礼物的价值。</p>
<p>用递归来解决会存在很多重复的子问题，所以还是用循环来实现（过程中会用一个辅助的mxn的二维数组来缓存中间的计算结果）。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>其实还可以优化：到达坐标(i, j)的格子时能够拿到的礼物的最大价值只依赖坐标为(i-1, j)和(i, j-1)的两个格子，因此第i-2行及更上面的所有格子礼物的最大价值实际上没有必要保存下来。可以用一个长度为n的一维数组来替代前面代码中的二维矩阵。优化后的代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题48：最长不含重复字符的子字符串"><a href="#面试题48：最长不含重复字符的子字符串" class="headerlink" title="面试题48：最长不含重复字符的子字符串"></a><font size="6" color="orange">面试题48：最长不含重复字符的子字符串</font></h2><hr>
<p>题目：请从字符串中找出一个最长的不包含重复字符的子字符串，计算该最长子字符串的长度。假设字符串中只包含’a’~’z’的字符。例如，在字符串”arabcacfr”中，最长的不含重复字符的子字符串是”acfr”，长度为4。</p>
<p>该题也可以用动态规划来解决。先以递归的思路来分析：设$f(i)$表示以第i个字符为结尾的不包含重复字符的子字符串的最长长度。那么$f(i)$和$f(i-1)$的关系是什么？</p>
<ul>
<li>如果第i个字符在之前没有出现过，那么$f(i)=f(i-1)+1$；</li>
<li>如果第i个字符在之前出现过，但是距离太远不在$f(i-1)$所对应的最长子字符串中，那么还是$f(i)=f(i-1)+1$；</li>
<li>如果第i个字符在之前出现过，而且出现在$f(i-1)$对应的最长子字符串中，第i个字符到它上次出现的位置距离为d，那么此时$f(i)=d$。</li>
</ul>
<p>为了得到距离d，需要一个长度为26的整型数组来记录每个字符上次出现在字符串中位置的下标。</p>
<p>完整代码如下（用循环来实现）：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题49：丑数"><a href="#面试题49：丑数" class="headerlink" title="面试题49：丑数"></a><font size="6" color="orange">面试题49：丑数</font></h2><hr>
<p>题目：我们把只包含因子2、3和5的数称作丑数（Ugly Number）。求按从小到大的顺序的第1500个丑数。例如，6、8都是丑数，但14不是，因为它包含因子7。习惯上我们把1当作第一个丑数。</p>
<p>根据丑数的定义，丑数应该是另一个丑数乘以2、3或者5的结果（1除外）。假设数组中已经有若干个排好序的丑数，那么下一个丑数应该是数组中已有的丑数乘上2、3或者5之后，得到的所有超过当前最大丑数的那些数里面最小的那个数。所以我们可以从头开始，一个一个地生成下一个丑数。比如初始时数组中是1，乘上2、3、5之后的最小数是2，数组变成[1, 2]；数组中已有的1、2这两个数乘上2、3、5之后的最小数是3，所以数组变成[1,2,3]；数组中已有的1、2、3这个三个数乘上2、3、5之后的最小数是2x2=4，所以数组变成[1,2,3,4]；接着数组中已有的1、2、3、4这个四个数乘上2、3、5之后的最小值是1x5=5，所以数组变成[1,2,3,4,5]……。</p>
<p>实际上不用对已有的数组里的所有数都去乘2、3、5，再去求超过当前最大丑数的最小值。已有的丑数里面肯定会有前面一段数即使乘上2，也不可能超过当前最大丑数，这些数是可以不用去计算的；同样的，也会有前面一段数即使乘上3也不可能超过当前最大丑数，这些数也是可以不用去计算的；对5也是一样的。需要记录下要从哪个位置的丑数开始计算才是有意义的。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题50：第一个只出现一次的字符"><a href="#面试题50：第一个只出现一次的字符" class="headerlink" title="面试题50：第一个只出现一次的字符"></a><font size="6" color="orange">面试题50：第一个只出现一次的字符</font></h2><hr>
<p>题目一：字符串中第一个只出现一次的字符。在字符串中找出第一个只出现一次的字符。入输入”abaccdeff”，则输出’b’。</p>
<p>思路很简单：用哈希表来统计字符出现的次数就行了就行了。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>如果要求有统计的字符有汉字（汉字有几千个），那么前面的算法是不是有问题？该怎么解决？</p>
<p>相关题目：</p>
<ul>
<li>从第一个字符串中删除在第二个字符串中出现过的所有字符。可以用哈希表统计第二个字符串中出现的字符，然后遍历第一个字符串时就可以在O(1)时间内判断该字符是不是在第二个字符串中出现过。所以时间复杂度是O(n)。</li>
<li>删除字符串中所有重复出现的字符。也可以在遍历的时候用哈希表来记录某个字符是否出现过（哈希值是bool值）。</li>
<li>判断两个单词是不是字母及其出现的次数完全相同（字母顺序可以不一样）（称这个两个单词互为变位词），可以在遍历第一个字符串的时候，为对应字符的哈希值加1，然后再遍历第二个字符串的时候，为对应字符的哈希值减1。遍历完第二个字符串后，如果哈希表里所有的值都是0，那么这两个单词就是变位词。</li>
</ul>
<p>题目二：字符流中第一个只出现一次的字符。请实现一个函数，用来找出字符流中第一个只出现一次的字符。例如，当从字符流中只读出前两个字符”go”时，第一个只出现一次的字符是’g’；当从该字符流中读出前6个字符”google”时，第一个只出现一次的字符是’l’。</p>
<p>也可以用哈希表来解决，只是存储的哈希值不再是bool值，而是字符在字符流中的位置。</p>
<p>当我们需要找出到目前为止从字符流里读出的所有字符中第一个不重复的字符时，只需要扫描整个数组，并从中找出最小的大于等于0的值哈希值对应的字符即可。</p>
<h2 id="面试题51：数组中的逆序对"><a href="#面试题51：数组中的逆序对" class="headerlink" title="面试题51：数组中的逆序对"></a><font size="6" color="orange">面试题51：数组中的逆序对</font></h2><hr>
<p>题目：在数组中的两个数字，如果前面一个数字大于后面的数字，则这两个数字组成一个逆序对。输入一个数组，求出这个数组中的逆序对的总数。例如，在数组{7,5,6,4}中，一共存在5个逆序对，分别是(7,6)、(7,5)、(7,4)、(6,4)和(5,4)。</p>
<p>可以用归并排序的方式，来统计组内和组间的逆序对（有时间来具体分析。。。）。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题52：两个链表的第一个公共节点"><a href="#面试题52：两个链表的第一个公共节点" class="headerlink" title="面试题52：两个链表的第一个公共节点"></a><font size="6" color="orange">面试题52：两个链表的第一个公共节点</font></h2><hr>
<p>题目：输入两个链表，找出它们的第一个公共节点。链表节点定义如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> SListNode
<span class="token punctuation">{</span>
    <span class="token keyword">int</span>                    m_Value<span class="token punctuation">;</span>
    SListNode<span class="token operator">*</span>            m_pNext<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>解决思路很简单：遍历两个链表，可以得到两个链表的长度之差L。一个指针在长的链表上先走L步，然后另一个指针开始从短链表的头结点出发向后走，当两个指针相同时就是第一个公共节点。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>另外一种稍微费事的方法是：使用栈来保存两个链表的节点，这样就可以从尾到头来反向遍历，找到的最后一个相同的节点，就是要求的第一个公共节点。但是需要O(m+n)的空间复杂度。</p>
<h1 id="第六章-面试中的各项能力"><a href="#第六章-面试中的各项能力" class="headerlink" title="第六章 面试中的各项能力"></a><font size="6" color="orange">第六章 面试中的各项能力</font></h1><hr>
<p>在面试的时候，知之为知之，不知为不知，对于不清楚的知识点，要勇敢承认，千万别不懂装懂。通常当应聘者说自己很懂某一领域的时候，面试官都会跟进几个问题。如果应聘者在不懂装懂，那么面试官迟早会发现，他可能就会觉得应聘者在其他的地方也有浮报虚夸的成分，这将是得不偿失的。</p>
<p>有些面试官故意一开始不把题目描述清楚，让题目存在一定的二义性。他期待应聘者能够一步步通过提问来弄明白题目的要求。这也是在考试应聘者的沟通能力。</p>
<h2 id="面试题53：在排序数组中查找数字"><a href="#面试题53：在排序数组中查找数字" class="headerlink" title="面试题53：在排序数组中查找数字"></a><font size="6" color="orange">面试题53：在排序数组中查找数字</font></h2><hr>
<p>题目一：数字在排序数组中出现的次数。统计一个数字在排序数组中出现的次数。例如输入排序数组{1,2,3,3,3,3,4,5}和数字3，由于3在这个数组中出现了4次，因此输出4。</p>
<p>解题思路：假设要查找的数字是k，可以用二分查找来快速找出排序数组中的第一个k和最后一个k，从而得到k出现的次数。那么怎么用二分查找来找出第一个k呢？如果中间的数字比k小，那k肯定在后面；如果中间的数字比k大，那k肯定在前面；如果中间的数字等于k，则看前一个数字是不是k，如果不是k，说明中间数字就是第一个k；如果前一个数字是k，说明第一个k在前面。递归找就可以了。查找最后一个k也是同样的思路。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>题目二：0~n-1中缺失的数字。<br>一个长度为n-1的递增排序数组中的所有数字都是唯一的，并且每个数字都在范围0~n-1之内。在范围0~n-1内的n个数字中有且只有一个数字不在该数组中，请找出这个数字。</p>
<p>其实就是找出第一个值与下标不同的数，用二分查找来找就可以了：如果中间的数，它的值和下标相同，则去接着找右边；如果中间的数的值和下标不等，并且前面一个数值和下标相等，那中间的数就是第一个值和下标不等的数，就是缺失的那个数，如果前面一个数值和下标不等，就接着去左边找。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>题目三：数组中数值和下标相等的元素。<br>假设一个单调递增的数组里的每个元素都是整数并且是唯一的。请编写一个函数，找出数组中任意一个数值等于其下标的元素。例如，在数组{-3,-1,1,3,5}中，数字3和它的下标相等。</p>
<p>由于是单调递增的排序数组，所以可以用二分查找来做：如果中间元素值大于下标，由于单调递增，其后面的元素肯定也是值大于下标的，所以应该去前面找值等于下标的数；如果中间元素值小于下标，由于单调递增，其前面的元素肯定也是值小于下标的，所以应该去其后面找值等于下标的数。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题54：二叉搜索树的第k大节点"><a href="#面试题54：二叉搜索树的第k大节点" class="headerlink" title="面试题54：二叉搜索树的第k大节点"></a><font size="6" color="orange">面试题54：二叉搜索树的第k大节点</font></h2><hr>
<p>题目：给定一棵二叉搜索树，请找出其中第k大的节点。</p>
<p>中序遍历即可（递归时维护一个记录遍历到了第几个节点的变量）。完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题55：二叉树的深度"><a href="#面试题55：二叉树的深度" class="headerlink" title="面试题55：二叉树的深度"></a><font size="6" color="orange">面试题55：二叉树的深度</font></h2><hr>
<p>题目一：二叉树的深度。输入一棵二叉树的根节点，求该树的深度。二叉树的节点定义如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> SBinaryTreeNode
<span class="token punctuation">{</span>
    <span class="token keyword">int</span>                    m_Value<span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span>    m_pLeft<span class="token punctuation">;</span>
    SBinaryTreeNode<span class="token operator">*</span>    m_pRight<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>递归遍历加1，然后取左子树和右子树高度的较大值。完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>题目二：平衡二叉树。输入一棵二叉树的根节点，判断该树是不是平衡二叉树。如果某二叉树中任意节点的左、右子树的深度相差不超过1，那么它就是一棵平衡二叉树。</p>
<p>解题思路：如果我们用后序遍历的方式遍历二叉树的每个节点，那么在遍历到一个节点之前我们就已经遍历了它的左、右子树。只要在遍历每个节点的时候记录它的深度，我们就可以一边遍历一边判断每个节点是不是平衡的。完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题56：数组中数字出现的次数"><a href="#面试题56：数组中数字出现的次数" class="headerlink" title="面试题56：数组中数字出现的次数"></a><font size="6" color="orange">面试题56：数组中数字出现的次数</font></h2><hr>
<p>题目一：数组中只出现一次的两个数字。一个整型数组里除两个数字之外，其他数字都出现了两次。请写程序找出这两个只出现一次的数字。要求时间复杂度是O(n)，空间复杂度是O(1)。</p>
<p>如果是数组中只有一个数字出现了一次，其余出现两次，那么连续异或得到的结果就是该数字。而现在是有两个数字都出现了两次，我们可以想办法把这两个数字分开到两个不同的子数组里，然后这两个子数组里就都只有一个数字出现一次，其余出现两次了，用连续异或就可以解决。那么怎么把这两个数字分开到不同的子数组呢？可以先对整个数组作异或，异或的结果等于这两个只出现一次的数的异或结果，由于这两个数不同，所以异或结果肯定不为0，异或结果的二进制中肯定有1。从里面随便选一个不为1的位，比如是第n位，这两个数肯定一个第n位是1，另一个第n位是0，那么我们把整个数组按照第n位是0或者1，分成两个子数组。相同的两个数字肯定会被分到相同的子数组里。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>题目二：数组中唯一只出现一次的数字。在一个数组中除一个数字只出现一次之外，其他数字都出现了三次。请找出那个只出现一次的数字。</p>
<p>解题思路：可以把数组中所有数字的每一位都加起来。如果某一位上加出来的结果能被3整除，那么那个只出现一次的数字二进制表示中对应的那一位是0；否则就是1。</p>
<h2 id="面试题57：和为s的数字"><a href="#面试题57：和为s的数字" class="headerlink" title="面试题57：和为s的数字"></a><font size="6" color="orange">面试题57：和为s的数字</font></h2><hr>
<p>题目一：和为s的两个数字。输入一个递增排序的数组和一个数字s，在数组中查找两个数，使得它们的和正好是s。如果有对多数字的和等于s，则输出任意一对即可。</p>
<p>可以用两个指针：一个前指针指向排序数组首元素，一个后指针指向排序数组尾元素。如果两个元素的和大于s，则把后指针向前移动；如果两个元素的和小于s，则把前指针向后移动。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>题目二：和为s的连续正数序列。输入一个正数s，打印出所有和为s的连续正数序列（至少含有两个数）。例如，输入15，由于1+2+3+4+5=4+5+6=7+8，所以打印出3个连续序列1~5、4~6和7~8。</p>
<p>解题思路：可以用两个数small和big分别表示序列的最小值和最大值。首先把small初始化为1，big初始化为2。如果从small到big的序列的和大于s，则可以从序列中去掉较小的值，也就是增大small的值；如果从small到big的序列的和小于s，则可以增大big，让这个序列包含更多的数字；如果从small到big的序列的和等于s，增大small或者增大big都行。为了找出所有的满足和为s的序列，要一直增加small到(1+s)/2为止（因为序列至少要有两个数字）。</p>
<h2 id="面试题58：翻转字符串"><a href="#面试题58：翻转字符串" class="headerlink" title="面试题58：翻转字符串"></a><font size="6" color="orange">面试题58：翻转字符串</font></h2><hr>
<p>题目一：翻转单词顺序。输入一个英文句子，翻转句子中单词的顺序，但单词内字符的顺序不变。为简单起见，标点符号和普通字母一样处理。例如输入字符串”I am a student.”，则输出”student. a am I”。</p>
<p>解题思路：先翻转整个字符串，再翻转字符串里的每个单词就可以了（翻转可以直接交换指向首尾的两个前后指针就可以做到）。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>题目二：左旋转字符串。字符串的左旋转操作是把字符串前面的若干个字符转移到字符串的尾部。请定义一个函数实现字符串左旋转操作的功能。比如，输入字符串”abcdefg”和数字2，该函数将返回左旋转两位得到的结果”cdefgab”。</p>
<p>和上一个题一样的思路，先翻转整个字符串，然后已输入的数字（比如2）把整个字符串分为两部分，再分别对这两部分进行翻转就可以了。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题59：队列的最大值"><a href="#面试题59：队列的最大值" class="headerlink" title="面试题59：队列的最大值"></a><font size="6" color="orange">面试题59：队列的最大值</font></h2><hr>
<p>题目一：滑动窗口的最大值。给定一个数组和滑动窗口的大小，请找出所有滑动窗口里的最大值。例如，如果输入数组{2,3,4,2,6,2,5,1}及滑动窗口的大小3，那么一共存在6个滑动窗口，它们的最大值分别为{4,4,6,6,6,5}。</p>
<p>实际上一个滑动窗口可以看成一个队列。所以实际上要求的是队列里的最大值。之前面试题30中已经介绍过在O(1)时间内得到栈的最小值（借助辅助栈），如果这里用两个栈来实现一个队列（面试题9），那么也就能够在O(1)时间内得到队列的最大值。</p>
<p>还有另外的解决思路：不把滑动窗口的每个数值都存入队列，而是只把有可能成为滑动窗口最大值的数值存入一个<strong>双端队列</strong>里。比如对于题目中的数组{2,3,4,2,6,2,5,1}，第一个进入滑动窗口的数字是2，它有可能成为滑动窗口里的最大值，所以把2入队列；第二个进入滑动窗口的是3，它比队尾的2大，所以2不可能再是滑动窗口里的最大值，把2从队列里删除，将3入队列；然后是4，同样地因为比队尾元素3大，所以3出队列，4入队列；接着是2，它比队尾元素4小，当4滑出滑动窗口以后2有可能成为最大值，所以需要把2入队尾，这是队列中有两个元素：4、2，最大值4在队头；接着是6，它比队列中的4、2都大，所以4、2不可能再是滑动窗口里的最大值了，把4、2出队，把6入队；接着是2，把2入队尾；接着是5，把2出队，把5入队尾（此时队列中的元素是6、5）；接着是1，把1入队尾，同时由于6滑出了滑动窗口，所以需要把队头的6也出队，队列中剩下5、1。但是怎么知道6被滑出了滑动窗口呢？我们可以不在队列里直接存数值，而是存数值在数组里对应的下标，这样我们就能根据下标来判断队头是否滑出了滑动窗口（实际上队列里最多只会有两个元素，一个最大的一个次大的）。</p>
<p>总结如下：占山为王（如果新进来的元素如果比队列中的元素大，就把队列中的元素pop出去，队头永远保存着最大值）、老虎走了猴子称大王（如果新进来的元素比队列中的元素小，则把新元素push到队尾（比新元素还小的已经在第一步被pop出去了））。一句话说，其实就是把队列里最大的和次大的记录了下来。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>题目二：队列的最大值。请定义一个队列并实现函数max得到队列里的最大值，要求函数max、push_back和pop_front的时间复杂度都是O(1)。</p>
<p>思路和上题的滑动窗口是一样的（因为滑动窗口本身就是一个队列），所以用两个双端队列来实现就可以了，其中一个放队列数据，另一个存放队列中可能的最大值（即当前最大的和次大的）。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题60：n个骰子的点数"><a href="#面试题60：n个骰子的点数" class="headerlink" title="面试题60：n个骰子的点数"></a><font size="6" color="orange">面试题60：n个骰子的点数</font></h2><hr>
<p>题目：把n个骰子仍在地上，所有骰子朝上一面的点数之和为s。输入n，打印出s的所有可能的值出现的概率。</p>
<p>首先，所有点数的排列数是$6^n$。</p>
<p>第一种思路：使用递归或者动态规划。把n个骰子分成两堆：第一堆只有一个，它有6种可能；第二堆有n-1个，递归的把它继续分为两堆就可以了。递归结束的条件当然就是最后只剩下一个骰子。对应的完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>第二种思路：递推分析n-1个骰子和n个骰子。扔n个骰子点数和为m的次数，其实就是扔n-1个骰子点数为m-1、m-2、m-3、m-4、m-5与m-6的次数之和。所以可以用两个数组来存储骰子点数和出现的次数：第一个数组中第m个数字用来存储n-1个骰子扔出来和为m的次数，加上一个骰子后，第二个数组的第m个数字就等于第一个数组的第m-1、m-2、m-3、m-4、m-5与m-6这个6个数字的和。从1个骰子开始，循环使用这两个数组，知道增加到第n个骰子为止。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题61：扑克牌中的顺子"><a href="#面试题61：扑克牌中的顺子" class="headerlink" title="面试题61：扑克牌中的顺子"></a><font size="6" color="orange">面试题61：扑克牌中的顺子</font></h2><hr>
<p>题目：从扑克牌中随机抽5张牌，判断是不是一个顺子，即这5张牌是不是连续的。2~10为数字本身，A为1，J为11，Q为12，K为13，而大、小王可以看成任意数字。</p>
<p>解题思路：把抽出来的5张牌排序（大小王看作0），然后统计排序之后相邻数字之间的空缺总数是不是等于0的个数，如果等于则是顺子，不等于则不是顺子，而且如果出现了重复数字也肯定不是顺子。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>其中用来库函数<code>qsort</code>来排序，时间复杂度是O(nlogn)，想快一点的话可以用一个长度为14的哈希表来排序，其时间复杂度是O(n)。其实意义不大，不同级别的时间复杂度只有当n足够大的时候才有意义。</p>
<h2 id="面试题62：圆圈中最后剩下的数字"><a href="#面试题62：圆圈中最后剩下的数字" class="headerlink" title="面试题62：圆圈中最后剩下的数字"></a><font size="6" color="orange">面试题62：圆圈中最后剩下的数字</font></h2><hr>
<p>题目：0,1,…,n-1这n个数字排成一个圆圈，从数字0开始，每次从这个圆圈里删除第m个数字。求出这个圆圈里剩下的最后一个数字。</p>
<p>该题其实就是著名的约瑟夫环问题。一种最直观的解法当然就是用环形链表来模拟了。其完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>第二种解法是分析出一个关于$f(n,m)$和$f(n-1,m)$的递归公式：<br>$$<br>f(n, m) =<br>\begin{cases}<br>0, &amp; n=1\<br>[f(n-1,m)+m]\%n, &amp; n&gt;1<br>\end{cases}<br>$$<br>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题63：股票的最大利润"><a href="#面试题63：股票的最大利润" class="headerlink" title="面试题63：股票的最大利润"></a><font size="6" color="orange">面试题63：股票的最大利润</font></h2><hr>
<p>题目：假设把某股票的价格按照时间先后顺序存储在数组中，请问买卖该股票一次可能获得的最大利润是多少？例如，一只股票在某些时间节点的价格为{9,11,8,5,7,12,16,14}。如果我们能在价格为5的时候买入并在价格为16时卖出，则能收获最大的利润11。</p>
<p>解题思路：其实就是求数组里面数对的最大差值。我们可以在遍历数组的时候，记录下一个到目前为止的最低价格的变量，然后就能算出到目前时间节点可获得的最大利润。而整体上的最大利润就是这些时间节点的最大利润的最大值。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题64：求1-2-…-n"><a href="#面试题64：求1-2-…-n" class="headerlink" title="面试题64：求1+2+…+n"></a><font size="6" color="orange">面试题64：求1+2+…+n</font></h2><hr>
<p>题目：求1+2+…+n，要求不能使用乘除法、for、while、if、else、switch、case等关键字及条件判断语句(A?B:C)。</p>
<p>解法一：利用构造函数求解，即new很多次，通过多次自动调用构造函数来模拟循环。对应代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>解法二：利用函数指针或者虚函数求解。通过递归调用来求解，但是递归结束条件需要用到判断语句，递归结束的条件是n降到0，可以通过对两次取反即<code>!!n</code>，来判断n是不是0；是0的话不能递归调用当前函数，而是要调用另外一个返回0的函数，所以可以根据<code>!!n</code>来调用另一个同名的函数指针，即n不为0时通过这个名字调用自己，当n等于0时通过这个名字调用递归终止函数。对应代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>解法三：用模板元编程来实现。让编译器自动完成类似于递归的计算。代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>这种解法的缺点是n不能太大，因为编译器对递归编译代码的递归深度是有限制的。</p>
<h2 id="面试题65：不用加减乘除做加法"><a href="#面试题65：不用加减乘除做加法" class="headerlink" title="面试题65：不用加减乘除做加法"></a><font size="6" color="orange">面试题65：不用加减乘除做加法</font></h2><hr>
<p>题目：写一个函数，求两个整数之和，要求在函数体内不得使用”+”、”-“、”x”、”/“四则运算符号。</p>
<p>不能做加减乘除运算，那只能做位运算了。可以模拟整数加法的过程，来做二进制加法：先算位和位相加的结果（不考虑进位），再算进位。也就是说分三步：<br>先通过对两个数进行异或得到位和位相加的结果，在对两个数进行位与运算来得到进位结果，接着把进位结果左移移位，最后把进位结果和位与结果加起来就可以了（这个相加可以递归调用当前的加法函数吗，直到不再产生进位为止）。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>相关问题：不使用新的变量来交换两个变量的值，有如下两种方式：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">a <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
b <span class="token operator">=</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span>
a <span class="token operator">=</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>或者</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">a <span class="token operator">=</span> a <span class="token operator">^</span> b<span class="token punctuation">;</span>
b <span class="token operator">=</span> a <span class="token operator">^</span> b<span class="token punctuation">;</span>
a <span class="token operator">=</span> a <span class="token operator">^</span> b<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h2 id="面试题66：构建乘积数组"><a href="#面试题66：构建乘积数组" class="headerlink" title="面试题66：构建乘积数组"></a><font size="6" color="orange">面试题66：构建乘积数组</font></h2><hr>
<p>题目：给定一个数组A[0,1,…,n-1]，请构建一个数组B[0,1,…,n-1]，其中B中的元素B[i]=A[0]xA[1]x…xA[i-1]xA[i+1]x…xA[n-1]。不能使用除法。</p>
<p>解题思路：由于不能用除法，如果暴力来算的话，算B[i]需要连乘A[0]、A[1]…..A[i-1]、A[i+1]…A[n-1]，而算B[i+1]的时候需要连乘A[0]、A[1]……A[i]、A[i+2]…..A[n-1]，很明显算这两个数的时候，连乘A[0]……A[i-1]和A[i+2]……A[n-1]都是重复的，所以需要在算的时候记录下之前算的中间结果，在算下一个数的时候拿来复用就可以了。对应的完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h1 id="第七章-两个面试案例"><a href="#第七章-两个面试案例" class="headerlink" title="第七章 两个面试案例"></a><font size="6" color="orange">第七章 两个面试案例</font></h1><hr>
<p>面试结束前，面试官会给应聘者机会问几个最感兴趣的问题。应聘者可以从当前招聘的项目及其团队等方面提出几个问题。不建议应聘者在技术面试的时候向面试官询问薪资情况，或者立即打听面试结果。</p>
<h2 id="面试题67：把字符串转换成整数（案例一）"><a href="#面试题67：把字符串转换成整数（案例一）" class="headerlink" title="面试题67：把字符串转换成整数（案例一）"></a><font size="6" color="orange">面试题67：把字符串转换成整数（案例一）</font></h2><hr>
<p>题目：写一个函数，实现把字符串转换成整数这个功能。</p>
<p>解决思路很简单，重要的是要考虑到各种边界情况、非法输入等等，比如空指针、空字符串、字符串中含有除了’0’~’9’之外的字符、字符串表示的数字溢出、输入的字符串中含有正负号’+’或者’-‘等等。</p>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="面试题68：树中两个节点的最低公共祖先"><a href="#面试题68：树中两个节点的最低公共祖先" class="headerlink" title="面试题68：树中两个节点的最低公共祖先"></a><font size="6" color="orange">面试题68：树中两个节点的最低公共祖先</font></h2><hr>
<p>题目：输入两个树节点，求它们的最低公共祖先。</p>
<p>需要问清楚面试官，这棵树长什么样子的。</p>
<ul>
<li>如果是一棵树，并且还是二叉搜索树。那么输入的两个节点的最低公共祖先的值，一定是小于其中一个输入结点，大于另外一个输入结点。那么我们可以从根结点出发，如果当前结点的值大于输入的两个节点的值，则最低公共祖先肯定在当前结点的左子树里；如果当前结点的值小于输入的两个节点的值，则最低公共祖先肯定在当前结点的右子树里。递归遍历，直到找到第一个在两个输入结点的值之间的节点就是最低的公共祖先。</li>
<li>如果只是普通的树，甚至连二叉树都不是。但是节点中有指向父节点的指针，那么这个题目可以看作是求两条链表的第一个相交结点。</li>
<li>如果只是普通的树，甚至连二叉树都不是，并且结点中没有指向父节点的指针。如果可以用辅助内存的话，可以通过递归遍历，两条链表来保存从根结点分别到两个输入结点的路径，问题就变成了求两条链表的最后一个公共结点。空间效率是O(n)，递归遍历得到两条链表路径的最差时间复杂度是O(n)，通常情况下是O(logn)，求两条链表的最后一个公共结点的时间复杂度是O(n)。</li>
</ul>
<p>完整代码如下：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<hr>
<p>有些应聘者在面试的时候很多问题都回答出来了，可最终被拒，觉得难以理解。其实这是因为面试官一开始问的问题他回答得很不好，面试官已经判断出他的能力有限，心里已经默默给出了NO的结论。但为了照顾应聘者的情面，也会问几个简单的问题。虽然这些简单的问题应聘者可能都能答对，但前面的结果以及不会改变。</p>
<hr>
<p>参考文献：《剑指Offer》</p>

            </div>

            <!-- Post Comments -->
            
    <!-- 使用 DISQUS_CLICK -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>

<!-- add animation -->
<style>
	.disqus_click_btn {
            line-height: 30px;
            margin: 0;
            min-width: 50px;
            padding: 0 14px;
            display: inline-block;
            font-family: "Roboto", "Helvetica", "Arial", sans-serif;
            font-size: 14px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0;
            overflow: hidden;
            will-change: box-shadow;
            transition: box-shadow .2s cubic-bezier(.4, 0, 1, 1), background-color .2s cubic-bezier(.4, 0, .2, 1), color .2s cubic-bezier(.4, 0, .2, 1);
            outline: 0;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            vertical-align: middle;
            border: 0;
            background: rgba(158, 158, 158, .2);
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);
            color: #fff;
            background-color: #7EC0EE;
            text-shadow: 0
        }
</style>
	
<div class="btn_click_load" id="disqus_bt"> 
    <button class="disqus_click_btn">点击查看评论</button>
</div>

<!--
<script type="text/javascript">
$('.btn_click_load').click(function() {
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'http-miccall-tech'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    document.getElementById('disqus_bt').style.display = "none";
});
</script>
-->
<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://yoursite.com/2019/02/19/剑指Offer/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://yoursite.com/2019/02/19/剑指Offer/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>

<script type="text/javascript">
    $('.btn_click_load').click(function() {  //click to load comments
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document;
            var s = d.createElement('script');
            s.src = '//http-miccall-tech.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
        })();
        $('.btn_click_load').css('display','none');
    });
</script>
</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>


        </div>
        <!-- Copyright 版权 start -->
                <div id="copyright">
            <ul>
                <li>&copy;Powered By <a href="https://hexo.io/zh-cn/" style="border-bottom: none;">hexo</a></li>
                <li>Design: <a href="http://miccall.tech " style="border-bottom: none;">miccall</a></li>
            </ul>
            
            	<span id="busuanzi_container_site_pv">2019总访问量<span id="busuanzi_value_site_pv"></span>次</span>
			
        </div>
    </div>
</body>



 	
</html>
