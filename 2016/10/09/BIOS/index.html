<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>BIOS和微机操作系统的启动过程 | Elays&#39;Blog</title>
  <meta name="author" content="Elay">
  
  <meta name="description" content="Elay">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="BIOS和微机操作系统的启动过程"/>
  <meta property="og:site_name" content="Elays&#39;Blog"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Elays&#39;Blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Elays&#39;Blog</a></h1>
  <h2><a href="/">你是天地生的，美得超越人形</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">主页</a></li>
    
      <li><a href="/archives">所有文章</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-10-09T09:08:10.000Z"><a href="/2016/10/09/BIOS/">2016-10-09</a></time>
      
      
  
    <h1 class="title">BIOS和微机操作系统的启动过程</h1>
  

    </header>
    <div class="entry">
      
        <p><font size="5" color="orange">什么是BIOS？</font><br><a id="more"></a><br>BIOS，Basic Input Output System基本输入输出系统，是最接近硬件的软件之一，是固化在计算机主板上的ROM芯片中的一组程序，直接对计算机系统中的输入输出设备进行硬件级的控制，为其他软件程序与硬件设备之间建立连接提供了基础，包含基本的中断服务程序、系统设置程序、加电自检程序和系统启动自举程序。<br>BIOS程序是计算机开机加电后第一个开始执行的程序，完成硬件检测及基本的设置功能，故BIOS为操作系统及其他自启动程序的开发和加载提供了接口，是计算机系统中最基础的系统软件。</p>
<hr>
<p><font size="5" color="orange">BIOS的住处：BIOS芯片</font><br>上面已经介绍过，BIOS程序被固化在ROM芯片中，所以保存BIOS程序的ROM加上其配套的电路就构成了BIOS芯片。<br>BIOS芯片通常是一块32针的双列直插式长方形或正方形集成电路，表面贴有“BIOS”字样的标签，如下图所示：<br><img src="http://cfwjm.img48.wal8.com/img48/559974_20161023165829/147721617506.png" alt=""><br>BIOS芯片根据其ROM存储器特点的不同，分为EPROM和EEPROM两种类型。</p>
<ul>
<li>EPROM（Erasure Program Read Only Memory）可擦除可编程只读存储器，其芯片中央有一个透明的小窗口，通过这个小窗口可以使用紫外线光将芯片上保存的信息擦除掉（所以当不需要擦除时，就需要一块不透明的标签将已保存了信息的EPROM芯片的紫外线窗口封住）。在向EPROM写入内容时，必须先用紫外线擦除器将EPROM中的信息清除掉，即将EPROM中的每个信息存储比特单元都变成“1”状态。</li>
<li>EEPROM（Electricity Erasure Program Read Only Memory）电可擦除可编程只读存储器，在通常情况下，EEPROM也是只读的，当需要写入内容时，只要在指定的引脚上加一个高电压即可快速写入和擦除。<ul>
<li>另外还有一种EEPROM就是现在主板上常见的FLASHROM（闪速存储器，闪存），其读写速度更快更可靠，而且使用单电压进行读写和编程，为便携式设备的在线操作提供了极大的便利，所以广泛应用在计算机主板上。</li>
</ul>
</li>
</ul>
<p>通常，在Intel486以及486以下档次计算机中使用的BIOS芯片基本上采用的是EPROM芯片，而586及以上档次计算机中使用的基本上都是EEPROM。</p>
<hr>
<p><font size="5" color="orange">BIOS程序的组成</font><br>前面已经介绍过，BIOS程序包括中断服务程序、系统设置程序、加电自检程序、系统启动自举程序。下面来看看这几种程序的详细介绍。</p>
<p><font size="4" color="red">BIOS中断服务程序</font></p>
<ul>
<li>什么是中断？<br>中断是改变处理器执行指令顺序的一种事件，这样的事件与CPU芯片内外部硬件电路产生的电信号相对应。<br>中断发生时，计算机停止现行程序的运行，转向对这些中断事件的处理，处理结束后再返回到现行程序的中断处，继续往下执行。</li>
<li>在哪里对中断事件进行处理的？<br>CPU对中断的处理是转到中断服务程序来进行的</li>
<li>什么是中断服务程序？<br>中断服务程序是系统开发者针对某种中断事件事先编写好的处理程序，并且把他们保存在内存的某个地址空间里。</li>
<li>那么怎么根据中断源找到相对应的中断服务程序呢？<br>中断源在向CPU进行中断请求时，会告诉CPU一个中断类型号（在x86系统中是0~255之间的整数），每个中断类型号都会对应一个中断服务程序。那么怎么根据中断类型好去找它命中注定的中断服务程序呢？其实所有中断服务程序的入口地址（起始地址）都被保存在中断向量表（一维连续的一段内存空间）中，中断向量表的每一个表项的长度都是固定一样的。所以让中断类型号和中断向量表的表项依次一一对应不就行了嘛？根据中断类型 x 中断向量表项长度 + 中断向量表起始地址，就可以找到对应的表项了，然后再从里面取出中断服务程序的起始地址，跳转到该地址，就可以执行中断服务程序进行中断处理了。</li>
<li>BIOS包含哪些中断服务程序呢？<br>显示服务程序（INT 10h）、直接磁盘服务程序（INT 13h）、键盘服务（INT 16h）等等。</li>
</ul>
<p>这些BIOS中断服务程序可以为微型计算机软件和硬件之间提供可编程接口，是软件和硬件的中间桥梁。DOS、Windows等操作系统对软盘、硬盘、光驱与键盘、显示器等外围设备的管理就是建立在系统BIOS的基础上的。当然，程序员还可以直接调用BIOS中断服务程序。</p>
<p><font size="4" color="red">BIOS系统设置程序</font><br>如果你给自己的电脑装过操作系统，会知道<br>当开机后狂按某个（F2、F12等等）按键时，会进入一些设置界面，这里其实就是一些BIOS系统设置。<br>微型计算机中各部分组建的配置参数是放在一块可读写的COMSRAM芯片（简称CMON）中的，它保存着系统CPU、软/硬盘驱动器、显示器、键盘等部件的配置信息。微机关闭电源后，系统通过一块后备电池向CMOS供电以保持其中的信息。如果CMOS中关于微机部件的配置信息不正确，会导致系统性能降低和零部件不能识别，从而导致一系列的软硬件故障。<br>在BIOS芯片中装有一个系统设置程序，用来设置CMOS中的各种参数。增加了新的部件或者要进行系统安装或升级时，一般都需要进行BIOS设置。<br>【注】：</p>
<ul>
<li>BIOS设置和CMOS设置的区别<br>CMOS是微机主板上一块特殊的CMOSRAM芯片，是存放系统参数的地方；而BIOS是一组程序，存储在主板上的EPROM或EEPROM芯片中。也就是说，通过BIOS中的系统设置程序其实是对CMOS参数进行设置。</li>
</ul>
<p><font size="4" color="red">POST加电自检程序</font><br>为了保证计算机正常启动，微机在接通电源后，系统有一个对内部各个设备进行检查的过程，该过程是由一个通常称之为POST（Power On Self Test，加电自检）的程序来完成的。完整的POST自检过程包括了CPU、640K基本内存、1M以上的扩展内存、ROM、主板、CMOS存储器、串口、并口、显示卡、硬盘及键盘的测试。自检过程中如果发现有问题，系统将会给出提示信息或鸣笛警告。</p>
<p><font size="4" color="red">BIOS系统启动自举程序</font><br>在自己装操作系统的过程里，想想是不是有一步是让设置磁盘的优先级，如果优先级最高的是U盘，则接下来系统就会进入U盘里的操作系统映像，用U盘来装操作系统了。而这个查找优先级最高的硬盘驱动器并装载操作系统的过程，就是BIOS系统启动自举程序来完成的。<br>BIOS系统启动自举程序的作用是在完成POST自检后，按照系统CMOS设置中的启动顺序搜寻硬盘驱动器及CDROM、网络服务器等有效的启动驱动器，读入操作系统引导程序，开始逐步完成操作系统内核的加载和初始化，完成系统的启动。</p>
<hr>
<p><font size="5" color="orange">BIOS的基本功能</font><br>从上诉对BIOS程序组成部分介绍，可以看出BIOS的基本功能有如下：</p>
<ul>
<li>在微机启动过程中的自检及初始化。</li>
<li>提供程序服务处理。如磁盘读写、键盘读取、将文件输出到答应及等等。</li>
<li>提供硬件中断处理。</li>
</ul>
<hr>
<p><font size="5" color="orange">微机启动的过程</font></p>
<ol>
<li>当按下电源开关后，电源开始向主板和其他设备供电。但是此时电压并不稳定，主板会认为电压并没有达到CMOS中所要求的电压，就会向CPU发出RESET信号（复位信号），当电压到大符合要求的稳定值时撤销复位信号，然后CPU立刻从基本内存的BIOS段读取一条跳转指令，跳转到BIOS的启动代码处，开始执行BIOS程序。</li>
<li>执行BIOS启动程序会进行加电自检POST。这个过程进行得很快，主要是检测关键设备（如电源、CPU芯片、BIOS芯片、基本内存等电路是否存在，供电情况是否良好等），如果发现了问题，系统喇叭会发出警报声音（更具警报声的长短和次数可以知道出现了什么问题）。</li>
<li>如果自检通过，系统BIOS会查找显卡BIOS，找到后会调用显卡BIOS的初始化代码，此时屏幕上会显示显卡的相关信息。</li>
<li>显卡检测成功后会进行其他设备的测试，通过测试后系统BIOS重新执行代码，并显示启动画面，将相关信息显示在屏幕上，然后进行内存测试，最后是短暂出现系统BIOS设置的提示信息，此时按下相应按键，可以对系统BIOS进行需要的设置，完成后系统会重新启动。</li>
<li>然后系统会检测系统的标准硬件（如硬盘、光驱、串行和并行接口等），检测完成后会接着检测即插即用设备，如果有的话就为该设备分配中断、DMA通道、I/O端口等资源，至此所有的设备都已经检测完了。</li>
<li>上面的检测都顺利完成后，BIOS会按照用户指定的设备顺序，依次从设备中找启动程序，以完成系统启动（如果首先是硬盘启动，则BIOS会检查硬盘的0面0磁道1扇区，若发现该扇区以0xAA55结束，则BIOS认为它是引导扇区。一旦发现引导扇区，BIOS会执行程序将其装入到内存地址0000：7c00处，然后跳转到该地址处执行这段引导程序代码，开始加载操作系统，BIOS将系统的控制权交给操作系统）。</li>
</ol>
<p>简化的微机启动过程如下（结合我们平时的开机过程来理解）：<br><strong>按下电源开关，电源供电 → CPU通过基本内存的BIOS段，找到BIOS程序起始地址，执行BIOS程序 → BIOS进行POST加电自检 → 检测和初始化显卡，在屏幕上显示相关信息 → 内存测试 → 出现BIOS设置的提示信息 → 检测硬盘、串并行接口等标准硬件 → 检测U盘等即插即用设备并为其分配资源 → 按照设备启动顺序加载操作系统 → 将系统控制权交给操作系统</strong>。</p>
<hr>
<p>【注】：<br>当硬盘的多个分区中同时存在多个操作系统时，每个分区都会有自己的引导扇区，那么操作系统怎么知道应该加载哪个扇区呢？操作系统会先去执行0面0磁道0扇区的主引导扇区的代码，判断当前被激活的分区，然后加载激活分区的引导扇区，从而加载该激活分区的操作系统。</p>

      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/操作系统/">操作系统</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/BIOS和微机启动过程/">BIOS和微机启动过程</a>
  </div>

        
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h2 class="title">留言</h2>


 
  	   <!-- 多说评论框 start -->
 		<div class="ds-thread" data-thread-key="2016/10/09/BIOS/" data-title="BIOS和微机操作系统的启动过程" data-url="http://yoursite.com/2016/10/09/BIOS/"></div>
		<!-- 多说评论框 end -->
		<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
		<script type="text/javascript">
		var duoshuoQuery = {short_name:"popperelay"};   <!-- 替换这里的duoshuo_shortname为前面注册的shortname -->
			(function() {
				var ds = document.createElement('script');
				ds.type = 'text/javascript';ds.async = true;
				ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.unstable.js';
				ds.charset = 'UTF-8';
				(document.getElementsByTagName('head')[0] 
				 || document.getElementsByTagName('body')[0]).appendChild(ds);
			})();
			</script>
		<!-- 多说公共JS代码 end -->
 
  
</section>

</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:yoursite.com">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/C-语法/">C#语法</a><small>2</small></li>
  
    <li><a href="/categories/C/">C++</a><small>4</small></li>
  
    <li><a href="/categories/C语言/">C语言</a><small>1</small></li>
  
    <li><a href="/categories/OpenGL/">OpenGL</a><small>27</small></li>
  
    <li><a href="/categories/c/">c++</a><small>1</small></li>
  
    <li><a href="/categories/博客配置/">博客配置</a><small>3</small></li>
  
    <li><a href="/categories/操作系统/">操作系统</a><small>4</small></li>
  
    <li><a href="/categories/数据结构/">数据结构</a><small>15</small></li>
  
    <li><a href="/categories/毕设/">毕设</a><small>1</small></li>
  
    <li><a href="/categories/游戏开发/">游戏开发</a><small>1</small></li>
  
    <li><a href="/categories/游戏设计模式/">游戏设计模式</a><small>1</small></li>
  
    <li><a href="/categories/计算机图形学/">计算机图形学</a><small>2</small></li>
  
    <li><a href="/categories/设计模式/">设计模式</a><small>3</small></li>
  
    <li><a href="/categories/调试错误集锦/">调试错误集锦</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li><a href="/tags/BIOS和微机启动过程/">BIOS和微机启动过程</a><small>1</small></li>
  
    <li><a href="/tags/Blinn-Phong/">Blinn-Phong</a><small>1</small></li>
  
    <li><a href="/tags/C/">C</a><small>1</small></li>
  
    <li><a href="/tags/C-容器/">C#容器</a><small>1</small></li>
  
    <li><a href="/tags/C-IO/">C++IO</a><small>1</small></li>
  
    <li><a href="/tags/Gamma校正/">Gamma校正</a><small>1</small></li>
  
    <li><a href="/tags/MarkDown/">MarkDown</a><small>1</small></li>
  
    <li><a href="/tags/Mathjax语法/">Mathjax语法</a><small>1</small></li>
  
    <li><a href="/tags/OS内核/">OS内核</a><small>1</small></li>
  
    <li><a href="/tags/OpenGL坐标系统/">OpenGL坐标系统</a><small>1</small></li>
  
    <li><a href="/tags/OpenGL摄像机/">OpenGL摄像机</a><small>1</small></li>
  
    <li><a href="/tags/OpenGL窗口/">OpenGL窗口</a><small>1</small></li>
  
    <li><a href="/tags/OpenGL配置/">OpenGL配置</a><small>1</small></li>
  
    <li><a href="/tags/c-特性/">c++特性</a><small>1</small></li>
  
    <li><a href="/tags/const/">const</a><small>1</small></li>
  
    <li><a href="/tags/timeTest/">timeTest</a><small>1</small></li>
  
    <li><a href="/tags/二叉树/">二叉树</a><small>1</small></li>
  
    <li><a href="/tags/交流/">交流</a><small>1</small></li>
  
    <li><a href="/tags/光照场景/">光照场景</a><small>1</small></li>
  
    <li><a href="/tags/光照贴图/">光照贴图</a><small>1</small></li>
  
    <li><a href="/tags/关键路径/">关键路径</a><small>1</small></li>
  
    <li><a href="/tags/冯氏光照/">冯氏光照</a><small>1</small></li>
  
    <li><a href="/tags/几何着色器/">几何着色器</a><small>1</small></li>
  
    <li><a href="/tags/反走样/">反走样</a><small>1</small></li>
  
    <li><a href="/tags/图/">图</a><small>1</small></li>
  
    <li><a href="/tags/图形学概述/">图形学概述</a><small>1</small></li>
  
    <li><a href="/tags/图形显示系统/">图形显示系统</a><small>1</small></li>
  
    <li><a href="/tags/多说/">多说</a><small>1</small></li>
  
    <li><a href="/tags/天空盒子/">天空盒子</a><small>1</small></li>
  
    <li><a href="/tags/头结点/">头结点</a><small>1</small></li>
  
    <li><a href="/tags/实例化/">实例化</a><small>1</small></li>
  
    <li><a href="/tags/尾递归/">尾递归</a><small>1</small></li>
  
    <li><a href="/tags/工厂模式单例模式/">工厂模式单例模式</a><small>1</small></li>
  
    <li><a href="/tags/帧同步/">帧同步</a><small>1</small></li>
  
    <li><a href="/tags/帧缓冲/">帧缓冲</a><small>1</small></li>
  
    <li><a href="/tags/常见光源/">常见光源</a><small>1</small></li>
  
    <li><a href="/tags/异步传输/">异步传输</a><small>2</small></li>
  
    <li><a href="/tags/拓扑排序/">拓扑排序</a><small>1</small></li>
  
    <li><a href="/tags/操作系统概述/">操作系统概述</a><small>1</small></li>
  
    <li><a href="/tags/改进排序/">改进排序</a><small>1</small></li>
  
    <li><a href="/tags/文件IO/">文件IO</a><small>1</small></li>
  
    <li><a href="/tags/最小生成树/">最小生成树</a><small>1</small></li>
  
    <li><a href="/tags/最短路径/">最短路径</a><small>1</small></li>
  
    <li><a href="/tags/材质/">材质</a><small>1</small></li>
  
    <li><a href="/tags/查找/">查找</a><small>1</small></li>
  
    <li><a href="/tags/栈/">栈</a><small>1</small></li>
  
    <li><a href="/tags/树/">树</a><small>1</small></li>
  
    <li><a href="/tags/模型加载/">模型加载</a><small>1</small></li>
  
    <li><a href="/tags/模板测试/">模板测试</a><small>1</small></li>
  
    <li><a href="/tags/深度测试/">深度测试</a><small>1</small></li>
  
    <li><a href="/tags/混合/">混合</a><small>1</small></li>
  
    <li><a href="/tags/着色器/">着色器</a><small>1</small></li>
  
    <li><a href="/tags/着色器画三角形/">着色器画三角形</a><small>1</small></li>
  
    <li><a href="/tags/码农/">码农</a><small>1</small></li>
  
    <li><a href="/tags/简单排序/">简单排序</a><small>1</small></li>
  
    <li><a href="/tags/纹理/">纹理</a><small>1</small></li>
  
    <li><a href="/tags/缓冲对象/">缓冲对象</a><small>1</small></li>
  
    <li><a href="/tags/编译链接错误/">编译链接错误</a><small>1</small></li>
  
    <li><a href="/tags/背面剔除/">背面剔除</a><small>1</small></li>
  
    <li><a href="/tags/进程的描述与控制/">进程的描述与控制</a><small>1</small></li>
  
    <li><a href="/tags/重定义错误/">重定义错误</a><small>1</small></li>
  
    <li><a href="/tags/链表/">链表</a><small>1</small></li>
  
    <li><a href="/tags/队列/">队列</a><small>1</small></li>
  
    <li><a href="/tags/面向对象设计原则/">面向对象设计原则</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2017 Elay
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</body>
</html>