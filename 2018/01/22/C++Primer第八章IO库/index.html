<!DOCTYPE HTML>
<html>

<head><meta name="generator" content="Hexo 3.9.0">
	<link rel="bookmark" type="image/x-icon" href="/img/logo_miccall.png">
	 <link rel="shortcut icon" href="/img/logo_miccall.png">
	
			
    <title>
    Elays'Blog
    </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
	<script>
	(function(){
		if('{{ page.password }}'){
			if (prompt('请输入博客密码') !== "elayRender"){
				alert('密码错误！');
				window.location.href='http://www.google.com'
				window.open('','_top'); 
				window.top.close(); 
				window.opener=null; 
				window.close();
			}
		}
	})();
	</script>
    <link rel="stylesheet" href="/css/mic_main.css">
    <link rel="stylesheet" href="/css/dropdownMenu.css">
    
    	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	
    <noscript>
        <link rel="stylesheet" href="/css/noscript.css">
    </noscript>
			    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.scrollex.min.js"></script>
    <script src="/js/jquery.scrolly.min.js"></script>
    <script src="/js/skel.min.js"></script>
    <script src="/js/util.js"></script>
    <script src="/js/main.js"></script>
	
<link rel="stylesheet" href="/css/prism-dark.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>
    
		
<!-- Layouts -->


<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<!--<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">-->
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-MML-AM_CHTML">
</script>

<!--  代码渲染  -->
<link rel="stylesheet" href="/css/prism_undefined.css">
<link rel="stylesheet" href="/css/typo.css">
<!-- 文章页 -->
<body class="is-loading">
    <!-- Wrapper 外包 s-->
    <div id="wrapper" class="fade-in">
        <!-- Intro 头部显示 s -->
        <!-- Intro 头部显示 e -->
        <!-- Header 头部logo start -->
        <header id="header">
    <a href="/" class="logo">MICCALL</a>
</header>
        <!-- Nav 导航条 start -->
        <nav id="nav" class="special">
            <ul class="menu links">
			<!-- Homepage  主页  --> 
			<li>
	            <a href="/" rel="nofollow">主页</a>
	        </li>
			<!-- categories_name  分类   --> 
	        
	        <li class="active">
	            <a href="#s1">分类</a>
	                    <ul class="submenu">
	                        <li>
	                        <a class="category-link" href="/categories/C/">C#</a></li><li><a class="category-link" href="/categories/C-语法/">C#语法</a></li><li><a class="category-link" href="/categories/C/">C++</a></li><li><a class="category-link" href="/categories/C语言/">C语言</a></li><li><a class="category-link" href="/categories/Graphics/">Graphics</a></li><li><a class="category-link" href="/categories/Math/">Math</a></li><li><a class="category-link" href="/categories/OpenGL/">OpenGL</a></li><li><a class="category-link" href="/categories/Unity/">Unity</a></li><li><a class="category-link" href="/categories/Vulkan/">Vulkan</a></li><li><a class="category-link" href="/categories/博客配置/">博客配置</a></li><li><a class="category-link" href="/categories/并行计算/">并行计算</a></li><li><a class="category-link" href="/categories/操作系统/">操作系统</a></li><li><a class="category-link" href="/categories/数据结构/">数据结构</a></li><li><a class="category-link" href="/categories/毕设/">毕设</a></li><li><a class="category-link" href="/categories/游戏开发/">游戏开发</a></li><li><a class="category-link" href="/categories/计算机系统/">计算机系统</a></li><li><a class="category-link" href="/categories/设计模式/">设计模式</a></li><li><a class="category-link" href="/categories/面试/">面试</a>
	                    </li></ul>
	        </li>
	        
	        <!-- archives  归档   --> 
	        
	        
		        <!-- Pages 自定义   -->
		        
		        <li>
		            <a href="/gallery/" title="图库">
		                图库
		            </a>
		        </li>
		        
		        <li>
		            <a href="/tag/" title="搜索">
		                搜索
		            </a>
		        </li>
		        


            </ul>
            <!-- icons 图标   -->
			<ul class="icons">
		            
		                <li><a href="https://github.com/miccall" class="icon fa-github"><span class="label">GitHub</span></a></li>
		            
		            
		            
		            
			</ul>
</nav>

        <div id="main">
            <div class="post_page_title_img" style="height: 25rem;background-image: url(https://github.com/Popperelay/Photos/blob/master/Photos/C++Primer%E7%AC%AC8%E7%AB%A0.png?raw=true);background-position: center; background-repeat:no-repeat; background-size:cover;-moz-background-size:cover;overflow:hidden;">
                <a href="#" style="padding: 4rem 4rem 2rem 4rem ;"><h2>C++Primer第八章 IO库</h2></a>
            </div>
            <!-- Post -->
            <div class="typo" style="padding: 3rem;">
				<!-- 目录 -->
				<p class="show-toc-btn" id="show-toc-btn" onclick="showToc();" style="display:none">
				<span class="btn-bg"></span>
				<span class="btn-text">文章导航</span>
				</p>
				<div id="toc-article" class="toc-article">
					<span id="toc-close" class="toc-close" title="隐藏导航" onclick="showBtn();">×</span>
					<strong class="toc-title">文章目录</strong>
					
			   </div>
			   <script type="text/javascript">
				function showToc(){
					var toc_article = document.getElementById("toc-article");
					var show_toc_btn = document.getElementById("show-toc-btn");
					toc_article.setAttribute("style","display:block");
					show_toc_btn.setAttribute("style","display:none");
					};
				function showBtn(){
					var toc_article = document.getElementById("toc-article");
					var show_toc_btn = document.getElementById("show-toc-btn");
					toc_article.setAttribute("style","display:none");
					show_toc_btn.setAttribute("style","display:block");
					};
			   </script>
				
                <p><font size="5" color="orange">IO类</font><br><a id="more"></a></p>
<hr>
<ol>
<li>可以将IO理解为读写，而非输入输出。</li>
<li>我们不能拷贝或对IO对象赋值。因此，我们也不能将形参或返回类型设置为流类型。进行IO操作的函数通常以引用方式传递和返回流。读写一个IO对象会改变其状态，因此传递和返回的引用都不能是const的。即不能用const修饰IO流对象。</li>
<li><p>IO库定义了4个iostate类型（与机器无关的一种类型）的位模式：badbit、failbit、eofbit、goodbit。<br>其中badbit表示系统级错误，如不可恢复的读写错误。通常情况下，一旦badbit被置位，流就无法再使用了。<br>在发生可恢复错误后，failbit被置位，如期望读取数值却读出一个字符等错误。这种问题通常是可以修正的，流还可以继续使用。<br>如果达到文件结束位置，eofbit和failbit都会被置位。<br>goodbit的值为0，表示流未发生错误。<br>如果badbit、failbit、eofbit任意一个被置位，则检测流状态的条件会失败。</p>
<p> IO库条件状态（位模式）及相关查询函数如下表所示（其中strm是某一种IO类型，如istream）：</p>
</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:center">位模式及相关函数</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">strm::iostate</td>
<td>iostate是一种机器相关的类型，提供了表达条件状态的完整功能。</td>
</tr>
<tr>
<td style="text-align:center">strm::badbit</td>
<td>表示流已奔溃</td>
</tr>
<tr>
<td style="text-align:center">strm::failbit</td>
<td>表示一个IO操作失败了</td>
</tr>
<tr>
<td style="text-align:center">strm::eofbit</td>
<td>表示流到达了文件结束位置</td>
</tr>
<tr>
<td style="text-align:center">strm::goodbit</td>
<td>表示流未处于错误状态</td>
</tr>
<tr>
<td style="text-align:center">s.eof()</td>
<td>若流s的eofbit置位，则返回true</td>
</tr>
<tr>
<td style="text-align:center">s.fail()</td>
<td>若流s的failbit或badbit置位，则返回true</td>
</tr>
<tr>
<td style="text-align:center">s.bad()</td>
<td>若流s的badbit置位，则返回true</td>
</tr>
<tr>
<td style="text-align:center">s.good()</td>
<td>若流s处于有效状态，则返回true</td>
</tr>
<tr>
<td style="text-align:center">s.clear()</td>
<td>将流s的所有条件状态位复位，将流的状态设置为有效。返回void。</td>
</tr>
<tr>
<td style="text-align:center">s.clear(flags)</td>
<td>根据给定的flags标志位，将流s中对应条件状态位复位。flags的类型为strm::iostate。返回void。</td>
</tr>
<tr>
<td style="text-align:center">s.setstate(flags)</td>
<td>将流s中的flags条件状态位置位。flags类型同上，返回void。</td>
</tr>
<tr>
<td style="text-align:center">s.rdstate()</td>
<td>返回流s的当前条件状态，返回值类型为strm::iostate。</td>
</tr>
</tbody>
</table>
<ol start="4">
<li>每个输出流都管理一个缓冲区，用来保存程序读写的数据。例如，如果程序执行如下语句：<pre class="line-numbers language-cpp"><code class="language-cpp"> std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Please enter a value:"</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
 文本串可能立即打印出来，但也可能被操作系统保存在缓冲区中，随后再打印。而导致缓冲刷新的原因有很多：<ul>
<li>程序正常结束，即main函数的return被执行时，会刷新缓冲。</li>
<li>缓冲区满时，会刷新缓冲。</li>
<li>使用endl等操纵符，会显式刷新缓冲区。</li>
<li>用操纵符unitbuf设置流的内部状态，从而清空缓冲区。</li>
<li>因为cerr是默认设置unitbuf的，所以写到cerr的内容会立即刷新，会被立即打印出来</li>
<li>当读写被关联的流时，关联到的流的缓冲区会被刷新。例如，默认情况下，cin和cerr都关联到cout，所以读写cin或cerr都会导致cout的缓冲区被刷新。</li>
</ul>
</li>
<li>除了使用操纵符endl刷新缓冲区外，还可以使用flush和ends：<pre class="line-numbers language-cpp"><code class="language-cpp"> std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"hi!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//换行后刷新缓冲区</span>
 std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"hi!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>ends<span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//输出空字符后刷新缓冲区</span>
 std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"hi!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>flush<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//直接刷新缓冲区，不附加任何额外字符</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
</li>
<li>如果想在每次输出操作后都立即刷新缓冲区，可以使用unitbuf操纵符。它告诉流在接下来的每次写操作后都执行一次flush操作，直到使用nounitbuf重置流为止，才会恢复使用正常的系统管理的缓冲区刷新机制。<pre class="line-numbers language-cpp"><code class="language-cpp"> std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>unitbuf<span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//之后的所有输出操作都会立即刷新缓冲区</span>
 <span class="token comment" spellcheck="true">//任何输出操作都立即刷新，无缓冲</span>
 std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>nounitbuf<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//回到正常的缓冲方式</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
</li>
<li>如果程序异常终止，输出缓冲区是不会被刷新的。就有可能会导致程序崩溃后，输出的数据依然留在缓冲区中等待被打印。这对一些输出的调试代码可能会有影响，导致调试困难。应该尽量让调试输出的错误或者警告信息立即刷新缓冲区。</li>
<li>交互式系统通常应该关联输入流和输出流。这意味着在读操作之前，缓冲区都会被刷新一次，留在缓冲区中的内容都会被打印出来。</li>
</ol>
<p><font size="5" color="orange">文件输入输出</font></p>
<hr>
<ol>
<li>当一个fstream对象被销毁时，其成员函数close会自动被调用。</li>
<li>每个流都有一个关联的文件模式，用来支出如何使用文件。</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:center">文件模式</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">in</td>
<td>以读方式打开</td>
</tr>
<tr>
<td style="text-align:center">out</td>
<td>以写方式打开</td>
</tr>
<tr>
<td style="text-align:center">app</td>
<td>每次写操作前都定位到文件末尾</td>
</tr>
<tr>
<td style="text-align:center">ate</td>
<td>打开文件后立即定位到文件末尾</td>
</tr>
<tr>
<td style="text-align:center">trunc</td>
<td>截断文件，及文件内容会被清除</td>
</tr>
<tr>
<td style="text-align:center">binary</td>
<td>以二进制方式进行IO</td>
</tr>
</tbody>
</table>
<ol start="3">
<li><p>与ifstream关联的文件默认以in模式打开；与ofstream关联的文件默认以out模式打开；与fstream关联的文件默认以in和out模式打开。</p>
<p>默认情况下，即使没有指定trunc，以out模式打开的文件也会被截断。为了保留以out模式打开的文件的内容，必须同时指定app模式（将数据追加写到文件末尾）或in模式（同时读写文件）。</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"> <span class="token comment" spellcheck="true">//下面三条语句中，文件的原有内容都会被丢弃</span>
 std<span class="token operator">::</span>ofstream <span class="token function">out</span><span class="token punctuation">(</span><span class="token string">"file1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//隐含以out模式打开文件并截断文件</span>
 std<span class="token operator">::</span>ofstream <span class="token function">out2</span><span class="token punctuation">(</span><span class="token string">"file1"</span><span class="token punctuation">,</span>std<span class="token operator">::</span>ofstream<span class="token operator">::</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//隐含地截断文件</span>
 std<span class="token operator">::</span>ofstream <span class="token function">out3</span><span class="token punctuation">(</span><span class="token string">"file1"</span><span class="token punctuation">,</span> std<span class="token operator">::</span>ofstream<span class="token operator">::</span>out <span class="token operator">|</span> std<span class="token operator">::</span>ofstream<span class="token operator">::</span>trunc<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment" spellcheck="true">//下面两条语句，打开文件后会保留文件原有内容</span>
 std<span class="token operator">::</span>ofstream <span class="token function">out4</span><span class="token punctuation">(</span><span class="token string">"file1"</span><span class="token punctuation">,</span> std<span class="token operator">::</span>ofstream<span class="token operator">::</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>
 std<span class="token operator">::</span>ofstream <span class="token function">out5</span><span class="token punctuation">(</span><span class="token string">"file1"</span><span class="token punctuation">,</span> std<span class="token operator">::</span>ofstream<span class="token operator">::</span>out <span class="token operator">|</span> std<span class="token operator">::</span>ofstream<span class="token operator">::</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
</ol>
<p><font size="5" color="orange">string流</font></p>
<hr>
<ol>
<li>stringstream特有的相关函数如下（其中sstream是istringstream、ostringstream、stringstream中的一种）：</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:center">函数</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">sstream strm</td>
<td>strm是一个未绑定的stringstream对象</td>
</tr>
<tr>
<td style="text-align:center">sstream strm(s)</td>
<td>strm是一个sstream对象，保存string s的一个拷贝。其构造函数是explicit的。即不支持隐式类型转换。</td>
</tr>
<tr>
<td style="text-align:center">strm.str()</td>
<td>返回strm所保存的string的拷贝</td>
</tr>
<tr>
<td style="text-align:center">strm.str(s)</td>
<td>将string s拷贝到strm中，返回void</td>
</tr>
</tbody>
</table>
<ol start="2">
<li><p>在Info.txt中有如下信息（姓名和电话号码）：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"> lee <span class="token number">13281171818</span> <span class="token number">13381171810</span>
 liu <span class="token number">13531471012</span>
 ma  <span class="token number">15542171568</span> <span class="token number">13081151819</span> <span class="token number">13232273848</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p> 现在设计如下程序，可读出并保存文件中的人物的电话信息：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"> <span class="token keyword">struct</span> CPersonInfo
 <span class="token punctuation">{</span>
 <span class="token keyword">public</span><span class="token operator">:</span>
     std<span class="token operator">::</span>string m_Name<span class="token punctuation">;</span>
     std<span class="token operator">::</span>vector <span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token operator">></span> m_PhonesNumber<span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>

 <span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token punctuation">{</span>
     std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>CPersonInfo<span class="token operator">></span> PersonsInfo<span class="token punctuation">;</span>
     std<span class="token operator">::</span>ifstream <span class="token function">Fin</span><span class="token punctuation">(</span><span class="token string">"Info.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     std<span class="token operator">::</span>string Line<span class="token punctuation">;</span>
     <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">getline</span><span class="token punctuation">(</span>Fin<span class="token punctuation">,</span> Line<span class="token punctuation">)</span><span class="token punctuation">)</span>
     <span class="token punctuation">{</span>
         CPersonInfo Info<span class="token punctuation">;</span>
         std<span class="token operator">::</span>istringstream <span class="token function">Sin</span><span class="token punctuation">(</span>Line<span class="token punctuation">)</span><span class="token punctuation">;</span>
         Sin <span class="token operator">>></span> Info<span class="token punctuation">.</span>m_Name<span class="token punctuation">;</span>
         std<span class="token operator">::</span>string Number<span class="token punctuation">;</span>
         <span class="token keyword">while</span> <span class="token punctuation">(</span>Sin <span class="token operator">>></span> Number<span class="token punctuation">)</span>
             Info<span class="token punctuation">.</span>m_PhonesNumber<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span>
         PersonsInfo<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>Info<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     Fin<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p> 其中，字符串Line中的数据被全部读出后，同样会触发“文件结束”信号，在Sin上的下一个读取操作会失败。</p>
</li>
<li>istringstream通常被用来作字符串的拆分、解析等等操作。</li>
<li><p><strong>当我们逐步构造输出，希望最后一起打印时，ostringstream是很有用的</strong>。例如，我们希望把上面代码PersonsInfo中存储的电话号码转换一下格式（把13281171818转换成132-8117-1818），然后把所有人的信息输出到窗口上：</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"> <span class="token keyword">struct</span> CPersonInfo
 <span class="token punctuation">{</span>
 <span class="token keyword">public</span><span class="token operator">:</span>
     std<span class="token operator">::</span>string m_Name<span class="token punctuation">;</span>
     std<span class="token operator">::</span>vector <span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token operator">></span> m_PhonesNumber<span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>

 <span class="token keyword">void</span> <span class="token function">formatPhoneNumber</span><span class="token punctuation">(</span>std<span class="token operator">::</span>string <span class="token operator">&amp;</span>vioPhoneNumber<span class="token punctuation">)</span>
 <span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>vioPhoneNumber<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">11</span><span class="token punctuation">)</span>
     <span class="token punctuation">{</span>
         std<span class="token operator">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Phone number is not valid!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
         <span class="token keyword">return</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     vioPhoneNumber<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vioPhoneNumber<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     vioPhoneNumber<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vioPhoneNumber<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 <span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token punctuation">{</span>
     std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>CPersonInfo<span class="token operator">></span> PersonsInfo<span class="token punctuation">;</span>
     std<span class="token operator">::</span>ifstream <span class="token function">Fin</span><span class="token punctuation">(</span><span class="token string">"Info.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     std<span class="token operator">::</span>string Line<span class="token punctuation">;</span>
     <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">getline</span><span class="token punctuation">(</span>Fin<span class="token punctuation">,</span> Line<span class="token punctuation">)</span><span class="token punctuation">)</span>
     <span class="token punctuation">{</span>
         CPersonInfo Info<span class="token punctuation">;</span>
         std<span class="token operator">::</span>istringstream <span class="token function">Sin</span><span class="token punctuation">(</span>Line<span class="token punctuation">)</span><span class="token punctuation">;</span>
         Sin <span class="token operator">>></span> Info<span class="token punctuation">.</span>m_Name<span class="token punctuation">;</span>
         std<span class="token operator">::</span>string Number<span class="token punctuation">;</span>
         <span class="token keyword">while</span> <span class="token punctuation">(</span>Sin <span class="token operator">>></span> Number<span class="token punctuation">)</span>
             Info<span class="token punctuation">.</span>m_PhonesNumber<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span>
         PersonsInfo<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>Info<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     Fin<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     std<span class="token operator">::</span>ostringstream Sout<span class="token punctuation">;</span>
     <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;</span>Info <span class="token operator">:</span> PersonsInfo<span class="token punctuation">)</span>
     <span class="token punctuation">{</span>
         Sout <span class="token operator">&lt;&lt;</span> Info<span class="token punctuation">.</span>m_Name<span class="token operator">&lt;&lt;</span><span class="token string">" "</span><span class="token punctuation">;</span>
         <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;</span>PhoneNumber <span class="token operator">:</span> Info<span class="token punctuation">.</span>m_PhonesNumber<span class="token punctuation">)</span>
         <span class="token punctuation">{</span>
             <span class="token function">formatPhoneNumber</span><span class="token punctuation">(</span>PhoneNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
             Sout <span class="token operator">&lt;&lt;</span> PhoneNumber <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         Sout <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

     std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> Sout<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&nbsp; </p>
</li>
</ol>
<hr>
<p>参考文献：《C++Primer第五版》</p>

            </div>

            <!-- Post Comments -->
            
    <!-- 使用 DISQUS_CLICK -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>

<!-- add animation -->
<style>
	.disqus_click_btn {
            line-height: 30px;
            margin: 0;
            min-width: 50px;
            padding: 0 14px;
            display: inline-block;
            font-family: "Roboto", "Helvetica", "Arial", sans-serif;
            font-size: 14px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0;
            overflow: hidden;
            will-change: box-shadow;
            transition: box-shadow .2s cubic-bezier(.4, 0, 1, 1), background-color .2s cubic-bezier(.4, 0, .2, 1), color .2s cubic-bezier(.4, 0, .2, 1);
            outline: 0;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            vertical-align: middle;
            border: 0;
            background: rgba(158, 158, 158, .2);
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);
            color: #fff;
            background-color: #7EC0EE;
            text-shadow: 0
        }
</style>
	
<div class="btn_click_load" id="disqus_bt"> 
    <button class="disqus_click_btn">点击查看评论</button>
</div>

<!--
<script type="text/javascript">
$('.btn_click_load').click(function() {
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'http-miccall-tech'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    document.getElementById('disqus_bt').style.display = "none";
});
</script>
-->
<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://yoursite.com/2018/01/22/C++Primer第八章IO库/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://yoursite.com/2018/01/22/C++Primer第八章IO库/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>

<script type="text/javascript">
    $('.btn_click_load').click(function() {  //click to load comments
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document;
            var s = d.createElement('script');
            s.src = '//http-miccall-tech.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
        })();
        $('.btn_click_load').css('display','none');
    });
</script>
</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>


        </div>
        <!-- Copyright 版权 start -->
                <div id="copyright">
            <ul>
                <li>&copy;Powered By <a href="https://hexo.io/zh-cn/" style="border-bottom: none;">hexo</a></li>
                <li>Design: <a href="http://miccall.tech " style="border-bottom: none;">miccall</a></li>
            </ul>
            
            	<span id="busuanzi_container_site_pv">2019总访问量<span id="busuanzi_value_site_pv"></span>次</span>
			
        </div>
    </div>
</body>



 	
</html>
